webpackJsonp([8],{"./app/scripts/containers/project/project.scss":function(e,t,r){t=e.exports=r("./node_modules/css-loader/lib/css-base.js")(),t.push([e.i,".projectPage{background:#fff}.projectPage-meta{padding-bottom:20px}.projectPage-meta-inner{max-width:1100px;min-width:320px;width:100%;margin:auto;padding:20px;display:flex;flex-wrap:wrap;justify-content:space-between}.projectPage-meta-inner h3{font-size:26px;font-family:Walsheim Pro,Myriad Pro,Helvetica,Arial,sans-serif;margin:40px 0 5px}@media (max-width:480px){.projectPage-meta-inner h3{margin-top:30px}}h2.projectPage-title{font-family:Walsheim Pro Bold,Walsheim Pro,Myriad Pro,Helvetica,Arial,sans-serif;font-size:48px;font-weight:700;margin:0;flex-basis:100%;padding:20px 0;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}@media (max-width:768px){h2.projectPage-title{font-size:36px}}@media (max-width:480px){h2.projectPage-title{font-size:30px}}.projectPage-overview{flex-basis:50%;padding-right:40px}@media (max-width:768px){.projectPage-overview{flex-basis:100%;padding-right:0}}.projectPage-projectManager{display:flex;align-items:center;padding-top:5px}.projectPage-projectManager-avatar{width:55px;height:55px;margin-right:10px}.projectPage-projectManager-avatar .generic-profile-photo{width:100%;padding-bottom:100%}.projectPage-projectManager-name{color:#ff7b5c;font-weight:700;padding-bottom:5px}.projectPage-bids{flex-basis:50%;padding-left:40px}@media (max-width:768px){.projectPage-bids{flex-basis:100%;padding-left:0}}.projectPage-bids-details{display:flex}.projectPage-bid{display:flex;flex-direction:column;margin-left:20px}.projectPage-bid:first-child{margin-left:0}.projectPage-bid-combined{flex-wrap:wrap;flex-direction:row}.projectPage-bids-details+.projectPage-bids-details .projectPage-bid-combined{margin-top:10px}.projectPage-bid-combined .projectPage-bid-amount{margin-left:20px}.projectPage-bid-combined .projectPage-bid-amount:first-child{margin-left:0}.projectPage-bid-combined .projectPage-bid-type{flex-basis:100%}.projectPage-bid-amount,.projectPage-bid-slash{color:#ff7b5c;font-size:32px;font-weight:700;line-height:41.6px}.projectPage-bid-slash{margin-left:20px;text-transform:lowercase}.projectPage-bid-andOr{line-height:41.6px;margin-left:20px;font-weight:700}.projectPage-bid-andOr,.projectPage-bid-type{color:#a19ea8;text-transform:lowercase;font-size:12px}.projectPage-bidButton{margin-top:20px}.projectPage-details-content{display:flex}.projectPage-details-content h3{font-family:Walsheim Pro,Myriad Pro,Helvetica,Arial,sans-serif;font-size:20px;margin-bottom:5px}.projectPage-details-content p{margin:0 0 40px;line-height:1.5}@media (max-width:768px){.projectPage-details-content{display:block}}.projectPage-details-description{flex-basis:65%;padding-right:20px}@media (max-width:768px){.projectPage-details-description{flex-basis:100%;padding:0}}.projectPage-details-timeline{flex-basis:35%;padding-left:20px}@media (max-width:768px){.projectPage-details-timeline{flex-basis:100%;padding:0}}.projectPage-details-private{flex-basis:100%}.projectPage-details-private-noNDA{text-align:center;padding-top:40px;padding-bottom:60px}.projectPage-details-private-lock:before{font-size:75px}.projectPage-details-inner{padding-top:40px}.projectPage-details-inner,.projectPage-tabs-header{max-width:1100px;min-width:320px;width:100%;margin:auto;padding-right:20px;padding-left:20px}@media (max-width:480px){.projectPage-tabs-header{padding-right:10px;padding-left:10px}}.projectPage-tabs-header .tab{flex-grow:0;border:1px solid #c8c6cc;margin-bottom:-1px;padding:10px 20px;border-radius:3px 3px 0 0;background:#dad9dd;font-weight:700}@media (max-width:480px){.projectPage-tabs-header .tab{font-size:12px}}.projectPage-tabs-header .tab.tab--active{background:#fafafa;border-bottom-color:#fafafa}.projectPage-tabs-header .tab+.tab,.projectPage-tabs-header .tab .fa{margin-left:5px}.projectPage-tabs-content{background:#fafafa;border-top:1px solid #c8c6cc}.submitProposal{max-width:768px;min-width:320px;width:100%;margin:auto;padding-right:20px;padding-left:20px}.submitProposal h3{margin-bottom:0}.submitProposal .tile{margin-top:60px}.submitProposal-compensationType{display:flex;flex-wrap:wrap;flex-basis:50%}.submitProposal-compensationType>.form-label{flex-basis:100%}.submitProposal-compensationType.form-set{margin-bottom:0}.submitProposal-compensationType .form-set--radio-item{flex-basis:100%}@media (max-width:768px){.submitProposal-compensationType{flex-basis:100%}}.submitProposal-compensationInput{max-width:200px}.submitProposal-actions{display:flex;align-items:center;flex-wrap:wrap;width:100%;justify-content:flex-end;padding-bottom:40px}.submitProposal-actions .button{flex-shrink:0}.submitProposal-actions .button+.button{margin-left:10px}.submitProposal-list{text-align:left;display:flex;flex-wrap:wrap}.submitProposal-list-item{color:#ff7b5c;font-weight:700;margin:5px 0;display:flex;flex-basis:50%;padding-right:5px}.submitProposal-list-item:before{content:'\\2022';padding-right:5px;color:#423d51}@media (max-width:768px){.submitProposal-list-item{flex-basis:100%}}",""])},"./app/scripts/containers/project/submitProposal.jsx":function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};r("./app/scripts/containers/project/project.scss");var s=r("./node_modules/react-router/es6/index.js"),n=r("./app/scripts/utils/analytics.js"),l=r("./node_modules/react-redux/lib/index.js"),p=r("./app/scripts/store/actions.js"),c=o(p),m=r("./app/scripts/store/store.js"),d=a(m),u=r("./app/scripts/store/api.js"),f=r("./app/scripts/utils/formUtils.js"),h=r("./app/scripts/utils/piiUtils.js"),g=r("./app/scripts/config.js"),b=r("./app/scripts/components/loader/loader.jsx"),x=a(b),P=r("./app/scripts/components/tile/tile.jsx"),y=r("./app/scripts/components/button/button.jsx"),j=a(y),v=r("./app/scripts/components/forms/formFields.js"),w=r("./app/scripts/components/errors/apiError.jsx"),E=a(w),R={formFields:{},isLoadingProfile:!0,isLoadingProject:!0,profileIncomplete:!1,isSending:!1,apiError:!1,profileError:!1,wantsCash:!1,wantsEquity:!1},S=React.createClass({displayName:"ProfileIncomplete",propTypes:{profile:React.PropTypes.object.isRequired},goToProfile:function(){var e=this.props.profile.id,t=g.urls.profileUrl(e);s.browserHistory.push({pathname:""+t})},render:function(){var e=this.props.profile,t=e.first_name,r=e.last_name,a=e.biography,o=e.role,i=e.photo_url,s=e.city,n=e.country,l=e.capacity,p=e.my_skills,c=e.work_history,m=e.contact_details,d=m.email,u=m.email_confirmed,f=m.phone,h=(!t||!r)&&React.createElement("li",{className:"submitProposal-list-item"},"Your name"),g=!i&&React.createElement("li",{className:"submitProposal-list-item"},"Profile photo"),b=!o&&React.createElement("li",{className:"submitProposal-list-item"},"Developer role"),x=!a&&React.createElement("li",{className:"submitProposal-list-item"},"Short bio"),y=(!s||!n)&&React.createElement("li",{className:"submitProposal-list-item"},"Location"),v=!l&&React.createElement("li",{className:"submitProposal-list-item"},"Availability"),w=!p.length>0&&React.createElement("li",{className:"submitProposal-list-item"},"Skills"),E=(!d||!u)&&React.createElement("li",{className:"submitProposal-list-item"},"Verified contact email"),R=!f&&React.createElement("li",{className:"submitProposal-list-item"},"Phone number"),S=!c.length>0&&React.createElement("li",{className:"submitProposal-list-item"},"Work history");return React.createElement("div",{className:"submitProposal"},React.createElement(P.Tile,{header:"Update your profile"},React.createElement("h3",null,"The following sections of your profile are required to submit a proposal:"),React.createElement("ul",{className:"submitProposal-list"},h,g,b,x,y,v,w,E,R,S),React.createElement(j["default"],{onClick:this.goToProfile},"Go to profile")))}}),F=React.createClass({displayName:"SubmitProposal",propTypes:{user:React.PropTypes.any.isRequired,profile:React.PropTypes.object,project:React.PropTypes.object,params:React.PropTypes.object},getInitialState:function(){return R},formFields:function k(){var e=this,t=this.props.project,k={compensationType:{name:"compensationType",label:"What type of compensation are you seeking?",value:"",options:[{id:"cash",label:"Cash"},{id:"equity",label:"Equity"},{id:"mix",label:"Cash / Equity Mix"}],error:!1,validator:function(t){var r=e.state.formFields,a=f.FormUtils.checks.isRequired(t);return a||(r.compensationType.error="Please choose a compensation type."),e.setState({formFields:r}),a},onChange:function(t){var r=e.state.formFields,a="cash"===t||"mix"===t,o="equity"===t||"mix"===t;r.compensationType.value=t,r.compensationType.error=!1,e.setState({formFields:r,wantsCash:a,wantsEquity:o})}},cash:{name:"cashInput",label:"Cash Offer",value:"",error:!1,validator:function(t){var r=e.state,a=r.wantsCash,o=r.formFields,i=(0,h.doesStringContainPII)(t),s=f.FormUtils.checks.isRequiredInt(t),n=!a||s&&!i;if(!n){var l=o.cash.error="Please enter a cash offer.";i&&(o.cash.error=h.piiErrors.formField),s||(o.cash.error="Your cash offer must be a valid whole number (no commas or decimals)"),t.length||(o.cash.error=l)}return e.setState({formFields:o}),n},onChange:function(t){var r=e.state.formFields;r.cash.value=t,r.cash.error=!1,e.setState({formFields:r})}},equity:{name:"equityInput",label:"Equity Offer",value:"",error:!1,validator:function(t){var r=e.state,a=r.wantsEquity,o=r.formFields,i=(0,h.doesStringContainPII)(t),s=f.FormUtils.checks.isRequired(t),n=parseFloat(t),l=n>0&&n<100,p=!a||s&&l&&!i;if(!p){var c=o.equity.error="Please enter an equity offer.";i&&(o.equity.error=h.piiErrors.formField),l||(o.equity.error="Equity offer must be a number more than 0% and less than 100%."),t.length||(o.equity.error=c)}return e.setState({formFields:o}),p},onChange:function(t){var r=e.state.formFields;r.equity.value=t,r.equity.error=!1,e.setState({formFields:r})}},hours:{name:"hours",label:"How many work hours do you need to complete this job?",value:"",error:!1,validator:function(t){var r=e.state.formFields,a=(0,h.doesStringContainPII)(t),o=f.FormUtils.checks.isRequiredInt(t),i=o&&t>=0&&!a;if(!i){var s=r.hours.error="Please enter a time estimate.";a&&(r.hours.error=h.piiErrors.formField),o||(r.hours.error="Your time estimate must be a valid number."),t.length||(r.hours.error=s)}return e.setState({formFields:r}),i},onChange:function(t){var r=e.state.formFields;r.hours.value=t,r.hours.error=!1,e.setState({formFields:r})}},coverletter:{name:"coverletter",label:"Cover Letter",value:"",helperText:"Explain why you're interested in the job and why your relevant skills make you the right person for the job.",error:!1,rows:5,validator:function(t){var r=e.state.formFields,a=(0,h.doesStringContainPII)(t),o=f.FormUtils.checks.isRequired(t)&&!a;return o||(a?r.coverletter.error=h.piiErrors.formField:r.coverletter.error="Please enter a cover letter."),e.setState({formFields:r}),o},onChange:function(t){var r=e.state.formFields;r.coverletter.value=t,r.coverletter.error=!1,e.setState({formFields:r})}}};return t&&t.questions.length&&t.questions.forEach(function(t,r){var a="question"+t.id;k[a]={name:a,label:"Answer",value:"",error:!1,rows:5,validator:function(t){var r=e.state.formFields,o=(0,h.doesStringContainPII)(t),i=f.FormUtils.checks.isRequired(t)&&!o;return i||(o?r[a].error=h.piiErrors.formField:r[a].error="Please answer this question."),e.setState({formFields:r}),i},onChange:function(t){var r=e.state.formFields;r[a].value=t,r[a].error=!1,e.setState({formFields:r})}}}),k},componentWillMount:function(){this.fetchProfile(),this.fetchProject()},componentWillUnmount:function(){d["default"].dispatch(c.projectLeave()),d["default"].dispatch(c.profileLeave())},fetchProject:function(){var e=this,t=this.props.params.projectIdOrSlug;d["default"].dispatch(c.fetchProject(t,function(){e.setState({isLoadingProject:!1,apiError:!1,formFields:e.formFields()})},function(t,r){console.error(t),e.setState({isLoadingProject:!1,apiError:r&&r.text||t})}))},fetchProfile:function(){var e=this,t=this.props.user.user_id;d["default"].dispatch(c.fetchProfile(t,function(t){e.checkProfileCompletion(t),e.setState({apiError:!1})},function(t,r){console.error(t),e.setState({isLoadingProfile:!1,apiError:r&&r.text||t})}))},checkProfileCompletion:function(e){var t=e.first_name,r=e.last_name,a=e.biography,o=e.role,i=e.photo_url,s=e.city,n=e.country,l=e.capacity,p=e.my_skills,c=e.work_history,m=e.contact_details,d=m.email,u=m.email_confirmed,f=m.phone,h=!0;t&&r&&a&&o&&d&&u&&f&&i&&s&&n&&l&&p.length>0&&c.length>0&&(h=!1),this.setState({isLoadingProfile:!1,profileIncomplete:h,profile:e})},cancelProposalProcess:function(){var e=this.state.project;(0,n.trackEvent)("Cancel Proposal Process",{project:e}),this.goToProject()},goToProposals:function(){s.browserHistory.push({pathname:"/dashboard/proposals/"})},goToProfile:function(){var e=this.props.profile.id,t=g.urls.profileUrl(e);s.browserHistory.push({pathname:""+t})},goToProject:function(){var e=this.props.project.slug,t=g.urls.projectUrl(e);s.browserHistory.push({pathname:""+t})},createProposal:function(){var e=this,t=this.state.formFields,r=this.props,a=r.project;r.user.user_id;this.setState({apiError:!1},function(){f.FormUtils.validateForm(t,function(t,r){e.setState({formFields:r}),t&&!function(){e.setState({isLoading:!0});var t={cash:r.cash.value||null,equity:r.equity.value||null,hours:r.hours.value,cover_letter:r.coverletter.value,project:a.id};a.questions.length&&(t.answers=a.questions.map(function(e){var t="question"+e.id;return{question:e.id,text:r[t].value}})),e.setState({isSending:!0,apiError:!1},function(){var r=u.api.proposal;return(0,u.post)(r,t,function(){(0,n.trackEvent)("Proposal Submitted ",{message:t.message}),e.goToProposals()},function(t,r){console.error(t),e.setState({apiError:r.text,isSending:!1})})})}()})})},render:function(){var e=this.props.project,t=this.state,r=t.formFields,a=t.wantsCash,o=t.wantsEquity,i=t.isSending,s=t.apiError,n=t.isLoadingProfile,l=t.isLoadingProject,p=t.profileIncomplete,c=t.profile,m=t.profileError;if(n||l)return React.createElement(x["default"],null);if(p)return React.createElement(S,{profile:c});if(m)return React.createElement(E["default"],{error:d});var d=s&&React.createElement(E["default"],{error:s}),u=a&&React.createElement(v.Input,{config:r.cash,className:"submitProposal-compensationInput",prefix:"$",suffix:".00",inputDisabled:i}),f=o&&React.createElement(v.Input,{config:r.equity,className:"submitProposal-compensationInput",suffix:"%",inputDisabled:i}),h=e.questions.length&&e.questions.map(function(e,t){var a="question"+e.id;return React.createElement("span",{key:t},React.createElement("h3",null,"Introduce yourself"),React.createElement(v.Textarea,{config:r[a],inputDisabled:i}))});return React.createElement("div",{className:"submitProposal"},React.createElement("h2",null,"Submit a proposal for ",React.createElement("a",{href:"",className:"brand"},e.title)),React.createElement("h3",null,"Proposed compensation for services"),React.createElement("div",{className:"submitProposal-compensation"},React.createElement(v.RadioGroup,{config:r.compensationType,className:"submitProposal-compensationType",inputDisabled:i}),React.createElement("div",{className:"submitProposal-compensationInputs"},u,f)),React.createElement(v.Input,{config:r.hours,className:"submitProposal-hoursInput",suffix:"hours",inputDisabled:i}),React.createElement("h3",null,"Introduce yourself"),React.createElement(v.Textarea,{config:r.coverletter,inputDisabled:i}),h,React.createElement("p",{className:"small"},"By clicking send you agree to Loom's ",React.createElement("a",{href:"/terms-of-service/",target:"_blank"},"Terms and Conditions")),d,React.createElement("div",{className:"submitProposal-actions"},React.createElement(j["default"],{onClick:this.cancelProposalProcess,buttonType:"secondary",disabled:i},"Cancel"),React.createElement(j["default"],{onClick:this.createProposal,disabled:i,isLoading:i},"Send proposal")))}}),q=function(e){var t=e.auth,r=e.project,a=e.profile;return i({user:t},r,a)};t["default"]=(0,l.connect)(q)(F)},"./app/scripts/utils/piiUtils.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.piiErrors=t.doesStringContainPII=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r("./app/scripts/utils/analytics.js"),i=[{regex:/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9:%_\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/gi,description:"Web links"},{regex:/[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?/gi,description:"Email addresses"},{regex:/((\+\d{1,4}(-| |\.|.{1,3})?\(?\d\)?(-| |\.|.{1,3})?\d{1,5})|(\(?\d{2,6}\)?))(-| |\.|.{1,3})?(\d{3,6})(-| |\.|.{1,3})?(\d{4,6})(( x| ext)\d{1,5}){0,1}/gi,description:"Formatted and non-formatted phone numbers with area/country codes"},{regex:/@(\w){1,30}/gi,description:"@ handles"},{regex:/(gmail|hotmail|yahoo)/gi,description:"Email Site names"},{regex:/(skype|upwork|linkedin|angellist)/gi,description:"Social Site names"},{regex:/(dotcom|dot com)/gi,description:"Miscellaneous strings people may type that could potentially be construed as PII"},{regex:/(at .{2,} dot)|(. . . . .)/gi,description:"Emails or phone numbers with deliberate spaces or spelled out special characters"}];t.doesStringContainPII=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!1,s=!1;if(i.some(function(t){var a=e.match(t.regex);if(a)return r=!0,s={matchedString:a,filter:t.description},!0}),t){var n=e.toLowerCase();if(t.user&&t.user.last_name&&t.user.last_name.length>3){var l=t.user.last_name.toLowerCase(),p=n.indexOf(l)>-1;p&&(r=!0,s={matchedString:t.user.last_name,filter:"Last Name"})}if(t.company){var c=t.company.toLowerCase(),m=n.indexOf(c)>-1;m&&(r=!0,s={matchedString:t.company,filter:"Company"})}}return"object"===a(s.matchedString)&&(s.matchedString=s.matchedString[0]),s&&(0,o.trackEvent)("PII filter triggered",s),r},t.piiErrors={formField:"For your privacy please remove any contact info or external links."}}});