webpackJsonp([2],{"./app/scripts/api/bank/index.js":function(e,t,n){"use strict";function i(e){return e=e||"",fetch(l.a.stripeConnect+"/?code="+e,{credentials:"same-origin",headers:{Accept:"application/json"}})}function a(e,t){return fetch(l.a.stripeConnect+"/",{method:"POST",credentials:"same-origin",headers:{Authorization:"JWT "+c.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({data:p({},t,{external_account:e})})})}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PATCH";return fetch(l.a.stripeConnect+"/",{method:t,credentials:"same-origin",headers:{Authorization:"JWT "+c.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})}function o(e){return fetch(l.a.stripeConnect+"/",{method:"DELETE",credentials:"same-origin",headers:{Authorization:"JWT "+c.a.get("loom_token"),Accept:"application/json"}})}t.c=i,t.a=a,t.b=o;var s=n("./node_modules/js-cookie/src/js.cookie.js"),c=n.n(s),l=n("./app/scripts/api/urls.js"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"fetchBank","/Users/will/development/loom/market-ui/app/scripts/api/bank/index.js"),__REACT_HOT_LOADER__.register(a,"createBank","/Users/will/development/loom/market-ui/app/scripts/api/bank/index.js"),__REACT_HOT_LOADER__.register(r,"updateBank","/Users/will/development/loom/market-ui/app/scripts/api/bank/index.js"),__REACT_HOT_LOADER__.register(o,"deleteBank","/Users/will/development/loom/market-ui/app/scripts/api/bank/index.js"))},"./app/scripts/api/paymentsource/index.js":function(e,t,n){"use strict";function i(){return fetch(l.a.paymentsource+"/",{credentials:"same-origin"})}function a(e){return fetch(l.a.paymentsource+"/",{method:"POST",credentials:"same-origin",headers:{Authorization:"JWT "+c.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PATCH";return fetch(l.a.paymentsource+"/",{method:t,credentials:"same-origin",headers:{Authorization:"JWT "+c.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})}function o(e){return fetch(l.a.paymentsource+"/",{method:"DELETE",credentials:"same-origin",headers:{Authorization:"JWT "+c.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})}t.c=i,t.a=a,t.d=r,t.b=o;var s=n("./node_modules/js-cookie/src/js.cookie.js"),c=n.n(s),l=n("./app/scripts/api/urls.js");"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"fetchPaymentSource","/Users/will/development/loom/market-ui/app/scripts/api/paymentsource/index.js"),__REACT_HOT_LOADER__.register(a,"createPaymentSource","/Users/will/development/loom/market-ui/app/scripts/api/paymentsource/index.js"),__REACT_HOT_LOADER__.register(r,"updatePaymentSource","/Users/will/development/loom/market-ui/app/scripts/api/paymentsource/index.js"),__REACT_HOT_LOADER__.register(o,"deletePaymentSource","/Users/will/development/loom/market-ui/app/scripts/api/paymentsource/index.js"))},"./app/scripts/components/formFields/dateInput/index.js":function(e,t,n){"use strict";var i=n("./app/scripts/components/forms/formFields.js"),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(e){var t=e.input,n=e.label,r=e.type,o=e.placeholder,s=e.helperText,c=e.prefix,l=e.disablePaste,p=void 0!==l&&l,u=e.meta,m=u.touched,d=u.error,f=m&&d;return React.createElement(i.b,a({},t,{type:r,prefix:c,config:{name:t.name,type:r,label:n,helperText:s,placeholder:o,disablePaste:p,error:f||"",value:t.value,onChange:t.onChange}}))};t.a=r,"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(r,"default","/Users/will/development/loom/market-ui/app/scripts/components/formFields/dateInput/index.js")},"./app/scripts/components/formFields/invoicePhoto/styles.scss":function(e,t){},"./app/scripts/containers/bank/details/actions/api.js":function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){return t(r.e()),a.c(e).then(function(e){if(e.status>200)throw new Error;return e.json()}).then(function(e){return t(r.f(e)),e}).catch(function(e){t(r.d(e))})}}t.a=i;var a=n("./app/scripts/api/bank/index.js"),r=n("./app/scripts/containers/bank/details/actions/index.js");"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"fetchBankDetails","/Users/will/development/loom/market-ui/app/scripts/containers/bank/details/actions/api.js")},"./app/scripts/containers/invoices/create/components/confirmation/styles.scss":function(e,t){},"./app/scripts/containers/invoices/create/components/recipient/styles.scss":function(e,t){},"./app/scripts/containers/invoices/create/components/requirements/styles.scss":function(e,t){},"./app/scripts/containers/invoices/create/components/type/styles.scss":function(e,t){},"./app/scripts/containers/invoices/create/styles.scss":function(e,t){},"./app/scripts/containers/invoices/details/components/details/styles.scss":function(e,t){},"./app/scripts/containers/invoices/details/components/status/styles.scss":function(e,t){},"./app/scripts/containers/invoices/details/styles.scss":function(e,t){},"./app/scripts/containers/invoices/edit/components/confirmation/styles.scss":function(e,t){},"./app/scripts/containers/invoices/edit/components/invoice/styles.scss":function(e,t){},"./app/scripts/containers/invoices/edit/styles.scss":function(e,t){},"./app/scripts/containers/invoices/index.js":function(e,t,n){"use strict";function i(){return fetch(q.a.invoice+"/recipients/",{credentials:"same-origin"})}function a(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).action,t=void 0===e?"received":e;return fetch(q.a.invoice+"/?action="+t,{credentials:"same-origin"})}function r(e){return fetch(q.a.invoice+"/"+e+"/",{credentials:"same-origin",headers:{Accept:"application/json"}})}function o(e){return fetch(q.a.invoice+"/",{method:"POST",credentials:"same-origin",headers:{Authorization:"JWT "+U.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"PATCH";return fetch(q.a.invoice+"/"+e+"/",{method:n,credentials:"same-origin",headers:{Authorization:"JWT "+U.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"PATCH";return fetch(q.a.invoice+"/"+e+"/",{method:n,credentials:"same-origin",headers:{Authorization:"JWT "+U.a.get("loom_token"),Accept:"application/json"},body:t.logo})}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"PATCH";return fetch(q.a.invoice+"/"+e+"/totals/",{method:n,credentials:"same-origin",headers:{Authorization:"JWT "+U.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})}function p(e){return fetch(q.a.invoice+"/"+e+"/",{method:"DELETE",credentials:"same-origin",headers:{Authorization:"JWT "+U.a.get("loom_token"),Accept:"application/json"}})}function u(e){return function(t){return t(J.h()),r(e).then(function(e){if(e.status>200)throw new Error;return e.json()}).then(function(e){return t(J.i(e)),e}).catch(function(e){t(J.g(e))})}}function m(e,t){return function(n){return n(J.k()),s(e,t).then(function(e){if(e.status>200)throw new Error;return e.json()}).then(function(e){return n(J.l(e)),e}).catch(function(e){n(J.j(e))})}}function d(){return function(e){return e(Q.x()),i().then(function(e){if(e.status>200)throw new Error;return e.json()}).then(function(t){return e(Q.y(t)),t}).catch(function(t){throw e(Q.w(t)),new M.d({_error:"Unknown error"})})}}function f(e){return function(t){return t(Q.r()),o(e).then(function(e){if(e.status>201&&400!==e.status)throw new Error(JSON.stringify({status:e.status}));return 400===e.status?e.json().then(function(t){throw new Error(JSON.stringify(Z({status:e.status},t)))}):e.json()}).then(function(e){return t(Q.s(e)),e}).catch(function(e){e.status;var n=e.message,i=n&&JSON.parse(n),a={};if(i&&400===i.status)for(var r in i)a[r]=i[r][0];else i&&i.status>=500&&(a._error="An unexpected error occurred. Please try again later.");throw t(Q.q(a)),new M.d(a)})}}function v(e){return function(t){return t(Q.u()),p(e).then(function(e){if(e.status>204)throw new Error;return e}).then(function(n){return t(Q.v(e)),e}).catch(function(e){t(Q.t(e))})}}function _(e,t){return function(n){return n(Ie.u()),s(e,t).then(function(e){if(e.status>200&&400!==e.status)throw new Error(JSON.stringify({status:e.status}));return 400===e.status?e.json().then(function(t){throw new Error(JSON.stringify(Me({status:e.status},t)))}):e.json()}).then(function(e){return n(Ie.v(e)),e}).catch(function(e){e.status;var t=e.message,i=t&&JSON.parse(t),a={};if(i&&400===i.status)for(var r in i)a[r]=i[r][0];else i&&i.status>=500&&(a._error="An unexpected error occurred. Please try again later.");throw n(Ie.t(a)),new M.d(a)})}}function h(e,t){return function(n){return n(Ie.u()),c(e,t,"PATCH").then(function(e){if(e.status>200&&400!==e.status)throw new Error(JSON.stringify({status:e.status}));return 400===e.status?e.json().then(function(t){throw new Error(JSON.stringify(Me({status:e.status},t)))}):e.json()}).then(function(e){return e}).catch(function(e){e.status;var t=e.message,i=t&&JSON.parse(t),a={};if(i&&400===i.status)for(var r in i)a[r]=i[r][0];else i&&i.status>=500&&(a._error="An unexpected error occurred. Please try again later.");throw n(Ie.t(a)),new M.d(a)})}}function y(e,t){return function(n){return n(Ie.r()),l(e,t).then(function(e){if(e.status>200&&400!==e.status)throw new Error(JSON.stringify({status:e.status}));return 400===e.status?e.json().then(function(t){throw new Error(JSON.stringify(Me({status:e.status},t)))}):e.json()}).then(function(e){return n(Ie.s(e)),e}).catch(function(e){e.status;var t=e.message,i=t&&JSON.parse(t),a={};if(i&&400===i.status)for(var r in i)a[r]=i[r][0];else i&&i.status>=500&&(a._error="An unexpected error occurred. Please try again later.");throw n(Ie.q(a)),new M.d(a)})}}function E(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function R(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function b(e){return function(t){return t(ot.h()),a(e).then(function(e){if(e.status>200)throw new Error;return e.json()}).then(function(e){return t(ot.i(e)),e}).catch(function(e){t(ot.g(e))})}}function O(e){return function(t){return t(ut.n()),a(e).then(function(e){if(e.status>200)throw new Error;return e.json()}).then(function(e){return t(ut.o(e)),e}).catch(function(e){t(ut.m(e))})}}function g(e){return function(t){return t(ut.k()),p(e).then(function(e){if(e.status>204)throw new Error;return e}).then(function(n){return t(ut.l(e)),e}).catch(function(e){t(ut.j(e))})}}function j(e){return fetch(q.a.payment+"/",{method:"POST",credentials:"same-origin",headers:{Authorization:"JWT "+U.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})}function w(e){return function(t){return t(Ct.r()),j(e).then(function(e){if(e.status>200&&400!==e.status)throw new Error(JSON.stringify({status:e.status}));return 400===e.status?e.json().then(function(t){throw new Error(JSON.stringify(Yt({status:e.status},t)))}):e}).then(function(e){return t(Ct.s()),e}).catch(function(e){e.status;var n=e.message,i=n&&JSON.parse(n),a={};if(i&&400===i.status)for(var r in i)a[r]=i[r][0];else i&&i.status>=500&&(a._error="An unexpected error occurred. Please try again later.");throw t(Ct.q(a)),new M.d(a)})}}Object.defineProperty(t,"__esModule",{value:!0});var T=n("./node_modules/react-router-dom/es/index.js"),C=n("./node_modules/react-redux/es/index.js"),A=n("./app/scripts/components/tile/tile.jsx"),k=n("./app/scripts/components/button/button.jsx"),D=n("./app/scripts/components/loader/loader.jsx"),N=n("./node_modules/moment/moment.js"),x=n.n(N),P=n("./app/scripts/utils/numberUtils.js"),Y=(n("./app/scripts/containers/invoices/details/components/details/styles.scss"),function(e){var t=e.details,n=t.hourly_items&&t.hourly_items.reduce(function(e,t){return e+Number(t.hours)*Number(t.rate)},0),i=t.fixed_items&&t.fixed_items.reduce(function(e,t){return e+Number(t.amount)},0),a=.08*(n+i),r=n+i-a;return React.createElement("div",null,React.createElement("div",{className:"invoice-header"},React.createElement("div",{className:"invoice-logo-container"},React.createElement("div",{className:"invoice-logo",style:{backgroundImage:"url("+t.logo+")"}})),React.createElement("div",{className:"invoice-contacts"},React.createElement("div",null,React.createElement("span",{className:"invoice-label"},"From:"),React.createElement("div",{className:"invoice-sender"},React.createElement("p",null,t.sender_name),React.createElement("p",null,t.sender_address),React.createElement("p",null,t.sender_address2),React.createElement("p",null,t.sender_location),React.createElement("p",null,t.recipient_email),React.createElement("p",null,t.recipient_phone))),React.createElement("div",null,React.createElement("span",{className:"invoice-label"},"To:"),React.createElement("div",{className:"invoice-recipient"},React.createElement("p",null,t.recipient_name),React.createElement("p",null,t.recipient_address),React.createElement("p",null,t.recipient_address2),React.createElement("p",null,t.recipient_location),React.createElement("p",null,t.recipient_email),React.createElement("p",null,t.recipient_phone))))),React.createElement("div",{className:"invoice-details"},React.createElement("p",null,"Invoice date: ",React.createElement("span",{className:"invoice-label"},t.sent_date?x()(t.sent_date,"YYYY-MM-DD").format("MM/DD/YYYY"):x()().format("MM/DD/YYYY"))),React.createElement("p",null,"Invoice reference number: ",React.createElement("span",{className:"invoice-label"},t.reference_id&&t.reference_id.split("-")[0])),React.createElement("p",null,"Invoice for: ",React.createElement("span",{className:"invoice-label"},t.title)),React.createElement("p",null,"Work timeframe: ",t.start_date&&t.end_date&&React.createElement("span",{className:"invoice-label"},x()(t.start_date,"YYYY-MM-DD").format("MM/DD/YYYY")," - ",x()(t.end_date,"YYYY-MM-DD").format("MM/DD/YYYY")))),React.createElement("div",{className:"invoice-items"},Boolean(t.hourly_items&&t.hourly_items.length)&&React.createElement("div",null,React.createElement("h3",null,"Hourly services"),React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Description of service"),React.createElement("th",null,"Hours"),React.createElement("th",null,"Rate"))),React.createElement("tbody",null,t.hourly_items&&t.hourly_items.map(function(e,t){return React.createElement("tr",{key:t},React.createElement("td",null,e.description),React.createElement("td",null,e.hours),React.createElement("td",null,"$",Object(P.a)(e.rate,{minimumFractionDigits:2,maximumFractionDigits:2})))})))),Boolean(t.fixed_items&&t.fixed_items.length)&&React.createElement("div",null,React.createElement("h3",null,"Flat-rate services and expenses"),React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Description of service, deliverable or expense"),React.createElement("th",null),React.createElement("th",null,"Amount"))),React.createElement("tbody",null,t.fixed_items&&t.fixed_items.map(function(e,t){return React.createElement("tr",{key:t},React.createElement("td",null,e.description),React.createElement("td",null),React.createElement("td",null,"$",Object(P.a)(Number(e.amount),{minimumFractionDigits:2,maximumFractionDigits:2})))}))))),React.createElement("div",{className:"invoice-totals"},React.createElement("div",{className:"invoice-summary"},React.createElement("table",null,React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,"Hourly fees"),React.createElement("td",null,"$",Object(P.a)(n,{minimumFractionDigits:2,maximumFractionDigits:2}))),React.createElement("tr",null,React.createElement("td",null,"Flat fees and expenses"),React.createElement("td",null,"$",Object(P.a)(i,{minimumFractionDigits:2,maximumFractionDigits:2})))),React.createElement("tfoot",{className:"invoice-sum"},React.createElement("tr",null,React.createElement("td",{className:"total-label"},"Total amount due"),React.createElement("td",null,"$",Object(P.a)(n+i,{minimumFractionDigits:2,maximumFractionDigits:2})))))),!t.internal&&React.createElement("div",{className:"invoice-net-summary"},React.createElement("table",null,React.createElement("tbody",null,React.createElement("tr",{className:"loom-fee"},React.createElement("td",null,"Loom service fee* (8%)"),React.createElement("td",null,"-$",Object(P.a)(a,{minimumFractionDigits:2,maximumFractionDigits:2}))),React.createElement("tr",{className:"net-freelancer-amount"},React.createElement("td",null,"Net received by freelancer"),React.createElement("td",null,"$",Object(P.a)(r,{minimumFractionDigits:2,maximumFractionDigits:2})))))),!t.internal&&React.createElement("div",{className:"invoice-disclaimer"},"*The 8% Loom service fee excludes any Stripe transaction or conversion fees."),React.createElement("p",{className:"invoice-label"},"Please deliver payment through the Loom platform by ",t.due_date?x()(t.due_date,"YYYY-MM-DD").format("MMMM Do, YYYY"):"")))}),S=Y,L=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Y,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/details/components/details/index.js"),function(e,t){var n=t.sender,i=t.status,a=t.due_date,r=x()(Date.now()).format("YYYY-MM-DD");return n.id===e?"pending"===i||"draft"===i?"draft":"sent"===i&&Date.parse(r)>Date.parse(a)?"past-due":"sent"===i?"sent":"paid":"sent"===i&&Date.parse(r)>Date.parse(a)?"past-due":"pending"===i||"draft"===i||"sent"===i?"unpaid":"paid"}),H=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(L,"getInvoiceStatus","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/details/utils/index.js"),n("./app/scripts/containers/invoices/details/components/status/styles.scss"),Object(T.g)(function(e){var t=e.details,n=e.user,i=L(n.user_id,t),a=t.sender.id===n.user_id,r="sent"!==t.status||"paid"!==t.status,o=function(){window.location="/dashboard/messages/"};return React.createElement("div",{className:"invoice-status"},React.createElement("h3",null,"Invoice status"),a&&React.createElement("div",null,React.createElement("h2",{className:"invoice-status-"+i},i),r&&"paid"!==i&&React.createElement(k.a,{type:"button",onClick:function(){e.history.push("/invoices/"+t.reference_id+"/edit")}},"Revise invoice"),React.createElement(k.a,{type:"button",buttonType:"secondary",onClick:o},"Message recipient")),!a&&React.createElement("div",null,React.createElement("h2",{className:"invoice-status-"+i},i),r&&"paid"!==i&&React.createElement(k.a,{type:"button",onClick:function(){e.history.push("/invoices/"+t.reference_id+"/payment")}},"Pay invoice"),React.createElement(k.a,{type:"button",buttonType:"secondary",onClick:o},"Message freelancer"),React.createElement("p",null,"Send a message to your freelancer if changes to this invoice are needed. The freelancer will need to edit and resubmit.")))})),I=H,M=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(H,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/details/components/status/index.js"),n("./node_modules/redux-form/es/index.js")),F=n("./node_modules/js-cookie/src/js.cookie.js"),U=n.n(F),q=n("./app/scripts/api/urls.js");"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"fetchAvailableRecipients","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"),__REACT_HOT_LOADER__.register(a,"fetchInvoices","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"),__REACT_HOT_LOADER__.register(r,"fetchInvoice","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"),__REACT_HOT_LOADER__.register(o,"createInvoice","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"),__REACT_HOT_LOADER__.register(s,"updateInvoice","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"),__REACT_HOT_LOADER__.register(c,"updateInvoicePhoto","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"),__REACT_HOT_LOADER__.register(l,"calcInvoiceTotals","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"),__REACT_HOT_LOADER__.register(p,"deleteInvoice","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"));var J=n("./app/scripts/containers/invoices/details/actions/index.js");"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(u,"fetchInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/details/actions/api.js"),__REACT_HOT_LOADER__.register(m,"updateInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/details/actions/api.js")),n("./app/scripts/containers/invoices/details/styles.scss");var B=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),W=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),B(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.user,n=this.props.match.params.invoiceId;this.props.dispatch(u(n)).then(function(n){n.recipient.id!==t.user_id||n.viewed||e.props.dispatch(m(n.reference_id,{viewed:!0}))}).catch(function(e){console.log(e)})}},{key:"goBack",value:function(e){e.preventDefault();var t=this.props,n=t.invoice,i=t.user;n.details.sender.id===i.user_id?this.props.history.push("/invoices/sent"):this.props.history.push("/invoices/received")}},{key:"render",value:function(){var e=this.props,t=e.invoice,n=e.user;return t.details.sender.id,n.user_id,React.createElement("div",{className:"invoice-details-container"},React.createElement("a",{href:"#",className:"back-link",onClick:this.goBack.bind(this)},React.createElement("i",{className:"material-icons"},"arrow_back")," Back to invoices"),React.createElement("div",{className:"invoice-details-content"},React.createElement(A.a,{className:"invoice-details-items"},t.isFetching&&React.createElement(D.a,null),!t.isFetching&&React.createElement(S,{details:t.details})),React.createElement("div",{className:"invoice-meta"},t.isFetching&&React.createElement(D.a,null),!t.isFetching&&React.createElement(A.a,null,React.createElement(I,{user:n,details:t.details})))))}}]),t}(),V=Object(C.b)(function(e){return{user:e.auth,invoice:e.invoices.details}})(W),$=V,z=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(W,"InvoiceDetails","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/details/index.js"),__REACT_HOT_LOADER__.register(V,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/details/index.js")),n("./node_modules/queryString/index.js")),X=n.n(z),K=n("./app/scripts/appliances/header/header.jsx"),G=n("./app/scripts/components/modal/modal.jsx"),Q=n("./app/scripts/containers/invoices/create/actions/index.js"),Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(d,"fetchInvoiceRecipients","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/actions/api.js"),__REACT_HOT_LOADER__.register(f,"createInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/actions/api.js"),__REACT_HOT_LOADER__.register(v,"deleteInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/actions/api.js"));var ee=n("./app/scripts/containers/bank/details/actions/api.js"),te=(n("./app/scripts/containers/invoices/create/components/type/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),ne=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),te(t,[{key:"setInvoiceType",value:function(e){this.props.dispatch(Object(Q.z)(e))}},{key:"render",value:function(){return React.createElement("div",{className:"invoice-type-container"},React.createElement("h2",null,"What type of invoice do you want to create?"),React.createElement("div",{className:"invoice-type-buttons"},React.createElement(k.a,{type:"button",onClick:this.setInvoiceType.bind(this,"cash")},"Cash invoice"),React.createElement(k.a,{type:"button",onClick:this.setInvoiceType.bind(this,"equity")},"Equity invoice")))}}]),t}(),ie=Object(C.b)(function(e){return{user:e.auth,invoiceCreation:e.invoices.create}})(ne),ae=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ne,"InvoiceType","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/components/type/index.js"),__REACT_HOT_LOADER__.register(ie,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/components/type/index.js")),n("./app/scripts/config.js")),re=(n("./app/scripts/containers/invoices/create/components/requirements/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),re(t,[{key:"render",value:function(){var e="https://connect.stripe.com/oauth/authorize?response_type=code&client_id="+ae.c.stripeClientID+"&scope=read_write&redirect_uri="+window.location.origin+"/invoices/new/recipient";return React.createElement("div",{className:"invoice-requirements"},React.createElement("h2",null,"Connect a Stripe account to receive payments"),React.createElement("h2",{className:"requirements-subheader"},"Before you can send an invoice, you must connect a Stripe account where you will receive payments."),React.createElement("h2",{className:"requirements-subheader"},"Why Stripe?  Stripe is an industry-leader in secure, frictionless service transactions between employers and freelancers around the world."),React.createElement("h2",{className:"requirements-subheader"},"Click below to connect an existing Stripe account or create a new one.  The process is secure, quick and easy."),React.createElement("div",{className:"requirements-actions"},React.createElement("a",{href:e,className:"button stripe-connect"},React.createElement("span",null,"Connect with Stripe"))))}}]),t}(),se=Object(T.g)(Object(C.b)(function(e){return{user:e.auth}})(oe)),ce=se,le=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(oe,"InvoiceRequirements","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/components/requirements/index.js"),__REACT_HOT_LOADER__.register(se,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/components/requirements/index.js")),n("./app/scripts/components/formFields/select/index.js")),pe=function(e){var t=e.name,n=void 0===t?"recipient":t,i=e.options;return React.createElement(M.a,{name:n,options:i,component:le.a})},ue=pe,me=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(pe,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoiceRecipient/components/recipientField/index.js"),n("./app/scripts/utils/formUtils.js")),de=function(e){var t={};return me.a.checks.isRequired(e.recipient)||(t.recipient="Please add an invoice recipient."),t},fe=de,ve=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(de,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoiceRecipient/validation.js"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),_e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),ve(t,[{key:"render",value:function(){var e=this.props,t=e.recipientOptions;return e.invalid,e.error,e.submitFailed,React.createElement("form",{className:"invoice-recipient-form"},React.createElement(ue,{options:t}))}}]),t}(),he=Object(M.o)({form:"invoiceRecipient",initialValues:{recipient:""},validate:fe,asyncValidating:!1})(_e),ye=he,Ee=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(_e,"InvoiceRecipientForm","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoiceRecipient/index.js"),__REACT_HOT_LOADER__.register(he,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoiceRecipient/index.js")),n("./app/scripts/containers/invoices/create/components/recipient/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),Re=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),Ee(t,[{key:"navigateToInvoices",value:function(){this.props.history.push("/invoices/sent")}},{key:"handleSubmit",value:function(){this.props.dispatch(Object(M.p)("invoiceRecipient"))}},{key:"setInvoiceRecipient",value:function(e){var t=this.props,n=t.user,i=t.recipients.recipientsById[e.recipient];return this.props.dispatch(f(Object.assign({},e,{sender:{id:Number(n.user_id)},recipient:{id:Number(e.recipient)},recipient_name:i.first_name+" "+i.last_name,recipient_email:i.email,sender_email:n.email,invoice_items:[],status:"draft"})))}},{key:"render",value:function(){var e=this.props,t=e.recipients,n=(e.invoice,e.bank),i=t.recipients.map(function(e){return{id:""+e.id,label:e.first_name+" "+e.last_name}});return React.createElement("div",null,!n.isFetching&&!t.isFetching&&!Boolean(t.recipients.length)&&React.createElement("div",{className:"invoice-recipient-container"},React.createElement("h2",null,"Invoices are available to freelancers actively working on Loom projects."),React.createElement("div",{className:"invoice-recipient-buttons"},React.createElement(k.a,{type:"button",onClick:this.navigateToInvoices.bind(this)},"Ok, got it")),React.createElement("p",{className:"support-details"},"Please email ",React.createElement("a",{href:"mailto:support@loom.co"},"support@loom.co")," if you are working on a Loom project so we can give you access.")),!n.isFetching&&!t.isFetching&&Boolean(t.recipients.length)&&React.createElement("div",{className:"invoice-recipient-container"},React.createElement("h2",null,"Who is this invoice for?"),React.createElement(ye,{recipientOptions:[{id:"",label:"Select an entreprenuer",disabled:!0}].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i)),initialValues:{recipient:""},onSubmit:this.setInvoiceRecipient.bind(this)}),React.createElement("div",{className:"invoice-recipient-buttons"},React.createElement(k.a,{type:"button",onClick:this.handleSubmit.bind(this)},"Continue")),React.createElement("p",{className:"support-details"},"Can't find the person you want to invoice? Send an email to ",React.createElement("a",{href:"mailto:support@loom.co"},"support@loom.co")," so we can help.")))}}]),t}(),be=Object(C.b)(function(e){return{user:e.auth,recipients:e.invoices.create.recipients,invoice:e.invoices.create.invoice,bank:e.settings.bank.details,isSubmitting:Object(M.m)("invoiceRecipient")(e)}})(Re),Oe=be,ge=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Re,"InvoiceRecipient","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/components/recipient/index.js"),__REACT_HOT_LOADER__.register(be,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/components/recipient/index.js")),n("./app/scripts/components/errors/errors.js")),je=n("./app/scripts/components/formFields/input/index.js"),we=(n("./app/scripts/features/forms/invoice/components/hourlyFeeFields/styles.scss"),function(e){var t=e.fields,n=e.isValid,i=e.onBlur,a=e.meta,r=(a.touched,a.valid,a.invalid,a.error,a.pristine);return React.createElement("table",{className:"hourly-fields"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Description of service"),React.createElement("th",null,"Hours"),React.createElement("th",null,"Rate"))),React.createElement("tbody",null,t.map(function(e,n){return React.createElement("tr",{key:n},React.createElement("td",null,React.createElement(M.a,{name:e+".description",placeholder:"e.g. development of homepage",component:je.a})),React.createElement("td",null,React.createElement(M.a,{name:e+".hours",type:"number",placeholder:"20",onBlur:i,component:je.a})),React.createElement("td",null,React.createElement(M.a,{prefix:"$",name:e+".rate",type:"number",placeholder:"50.00",onBlur:i,component:je.a}),t.length>1&&React.createElement("i",{className:"material-icons remove-item",onClick:function(){return t.remove(n)}})))})),React.createElement("tfoot",null,React.createElement("tr",null,React.createElement("td",null,React.createElement(k.a,{className:"add-button",type:"button",disabled:!n||r&&t.length<1,onClick:function(){return t.push({description:"",hours:"",rate:""})}},"Add item")))))}),Te=we,Ce=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(we,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoice/components/hourlyFeeFields/index.js"),n("./app/scripts/features/forms/invoice/components/fixedFeeFields/styles.scss"),function(e){var t=e.fields,n=e.isValid,i=e.onBlur,a=e.meta,r=(a.touched,a.valid,a.error,a.pristine);return React.createElement("table",{className:"fixed-fields"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Description of service, deliverable or expense"),React.createElement("th",null),React.createElement("th",null,"Amount"))),React.createElement("tbody",null,t.map(function(e,n){return React.createElement("tr",{key:n},React.createElement("td",null,React.createElement(M.a,{name:e+".description",placeholder:"e.g. Weekly rate, Delivery of app or Software license purchase",component:je.a})),React.createElement("td",null),React.createElement("td",null,React.createElement(M.a,{prefix:"$",name:e+".amount",type:"number",placeholder:"50.00",component:je.a,onBlur:i}),t.length>1&&React.createElement("i",{className:"material-icons remove-item",onClick:function(){return t.remove(n)}})))})),React.createElement("tfoot",null,React.createElement("tr",null,React.createElement("td",null,React.createElement(k.a,{className:"add-button",type:"button",disabled:!n||r&&t.length<1,onClick:function(){return t.push({description:"",amount:""})}},"Add item")))))}),Ae=Ce,ke=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Ce,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoice/components/fixedFeeFields/index.js"),n("./app/scripts/features/forms/invoice/components/contactField/styles.scss"),function(e){e.label;var t=e.target,n=void 0===t?"sender":t;return React.createElement("div",{className:"contact-field"},React.createElement(M.a,{name:n+"_name",placeholder:"Name or company name",component:"input"}),React.createElement("br",null),React.createElement(M.a,{name:n+"_address",placeholder:"sender"===n?"Freelancer address line 1":"Employer address line 1",component:"input"}),React.createElement(M.a,{name:n+"_address2",placeholder:"sender"===n?"Freelancer address line 2":"Employer address line 2",component:"input"}),React.createElement(M.a,{name:n+"_location",placeholder:"City, State, Postal Code",component:"input"}),React.createElement("br",null),React.createElement(M.a,{name:n+"_email",placeholder:"sender"===n?"Email: you@example.com":"Email: employer@example.com",component:"input"}),React.createElement(M.a,{name:n+"_phone",placeholder:"Phone number",component:"input"}))}),De=ke,Ne=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ke,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoice/components/contactField/index.js"),n("./app/scripts/components/formFields/invoicePhoto/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),xe=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={preview:"string"==typeof e.input.value?e.input.value:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),Ne(t,[{key:"handlePhotoSelection",value:function(e){var t=this,n=this.props,i=n.input,a=(i.value,i.onChange),r=n.meta,o=(r.touched,r.error,new FileReader),s=e.target.files[0],c=/(\.jpg|\.jpeg|\.bmp|\.gif|\.png)$/i.test(s.name);s&&c&&(o.onloadend=function(){t.setState({preview:o.result}),a(s)},o.readAsDataURL(s))}},{key:"handleRemovePhoto",value:function(e){var t=this.props,n=t.input,i=(n.value,n.onChange),a=t.meta;a.touched,a.error,this.setState({preview:""}),i("")}},{key:"render",value:function(){var e=this.props,t=(e.input.value,e.meta),n=(t.touched,t.error,this.state.preview);return React.createElement("div",null,React.createElement("div",{className:"invoice-photo-preview"},n&&React.createElement("div",{className:"generic-invoice-photo",style:{backgroundImage:"url("+n+")"}}),!n&&React.createElement(k.a,{className:"photo-upload-button",fileInput:!0,center:!0,disabled:!1,onFileSelection:this.handlePhotoSelection.bind(this)},React.createElement("span",null,React.createElement("i",{className:"material-icons"},"add")," Add logo"))),n&&React.createElement("div",{className:"invoice-photo-upload"},React.createElement(k.a,{fileInput:!0,center:!0,disabled:!1,onFileSelection:this.handlePhotoSelection.bind(this)},"Change logo")))}}]),t}(),Pe=xe,Ye=Pe,Se=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(xe,"InvoicePhotoField","/Users/will/development/loom/market-ui/app/scripts/components/formFields/invoicePhoto/index.js"),__REACT_HOT_LOADER__.register(Pe,"default","/Users/will/development/loom/market-ui/app/scripts/components/formFields/invoicePhoto/index.js")),function(e){var t=e.name,n=void 0===t?"logo":t,i=e.label,a=void 0===i?"Add logo":i;return React.createElement(M.a,{name:n,label:a,component:Ye})}),Le=Se,He=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Se,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoice/components/photoField/index.js"),n("./app/scripts/components/formFields/dateInput/index.js")),Ie=n("./app/scripts/containers/invoices/edit/actions/index.js"),Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(_,"updateInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/actions/api.js"),__REACT_HOT_LOADER__.register(h,"updateInvoicePhoto","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/actions/api.js"),__REACT_HOT_LOADER__.register(y,"calculateInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/actions/api.js"));var Fe=function(e,t){var n={},i=[],a=[],r=!1,o=!1;return me.a.checks.isRequired(e.sender_name)||(n.sender_name="Please enter your contact name."),me.a.checks.isRequired(e.sender_email)||(n.sender_email="Please enter your contact email."),me.a.checks.isRequired(e.recipient_name)||(n.recipient_name="Please enter your recipient's name."),me.a.checks.isRequired(e.recipient_email)||(n.recipient_email="Please enter your recipient's email."),me.a.checks.isRequired(e.title)||(n.title="Please enter what this invoice is for."),me.a.checks.isMomentFormat(e.start_date,"MM/DD/YYYY")||(n.start_date="Please enter a start date."),me.a.checks.isMomentFormat(e.end_date,"MM/DD/YYYY")||(n.end_date="Please enter an end date."),me.a.checks.isMomentFormat(e.due_date,"MM/DD/YYYY")||(n.due_date="Please enter a due date."),e.hourly_items.forEach(function(t,n){var a={};1===e.hourly_items.length&&(r=!Boolean(Number(t.rate))&&!Boolean(Number(t.hours))&&!t.description),t.description&&me.a.checks.isRequired(t.description)||(a.description="Please enter a description.",i[n]=a),Number.isNaN(t.hours)&&"number"!=typeof Number(t.hours)&&(a.hours="Please enter hours.",i[n]=a),Number.isNaN(t.rate)&&"number"!=typeof Number(t.rate)&&(a.rate="Please enter a rate.",i[n]=a)}),e.fixed_items.forEach(function(t,n){var i={};1===e.fixed_items.length&&(o=!Boolean(Number(t.amount))&&!t.description),t.description&&me.a.checks.isRequired(t.description)||(i.description="Please enter a description.",a[n]=i),Number.isNaN(t.amount)&&"number"!=typeof Number(t.amount)&&(i.amount="Please enter an amount.",a[n]=i)}),!r&&1===e.hourly_items.length&&i.length?n.hourly_items=i:e.hourly_items.length>1&&i.length&&(n.hourly_items=i),!o&&1===e.fixed_items.length&&a.length?n.fixed_items=a:e.fixed_items.length>1&&a.length&&(n.fixed_items=a),r&&o&&(n.invoice_items="Please add a line item to your invoice."),n},Ue=Fe,qe=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Fe,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoice/validation.js"),n("./app/scripts/features/forms/invoice/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),Je=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),qe(t,[{key:"onSubmit",value:function(){this.props.pristine?this.props.onCancel():this.props.handleSubmit()}},{key:"componentDidUpdate",value:function(e){var t=this.props.formValues&&e.formValues&&e.formValues.fixed_items.length>this.props.formValues.fixed_items.length,n=this.props.formValues&&e.formValues&&e.formValues.hourly_items.length>this.props.formValues.hourly_items.length;(t||n)&&this.calculateInvoice()}},{key:"calculateInvoice",value:function(){var e=this.props.formValues,t=e.reference_id,n=(e.logo,e.sender,e.recipient,function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["reference_id","logo","sender","recipient"]));return this.props.dispatch(y(t,{invoice_items:[].concat(E(n.hourly_items.map(function(e){return Object.assign({},e,{hours:Number(e.hours),rate:Number(e.rate),amount:Number(e.hours)*Number(e.rate)})}).filter(function(e){var t=!0;for(var n in e)"id"!==n&&e[n]&&(t=!1);return!t})),E(n.fixed_items.map(function(e){return Object.assign({},e,{hours:null,rate:null,amount:Number(e.amount)})}).filter(function(e){var t=!0;for(var n in e)"id"!==n&&e[n]&&(t=!1);return!t})))})).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this.props,t=(e.invoice,e.editInvoice),n=(e.touchedFields,e.formValues),i=e.invalid,a=(e.valid,e.error),r=e.fieldErrors,o=e.submitFailed,s=n&&n.hourly_items.reduce(function(e,t){return e+Number(t.hours)*Number(t.rate)},0),c=n&&n.fixed_items.reduce(function(e,t){return e+Number(t.amount)},0),l=t.meta.loom_fee,p=t.meta.total_amount-t.meta.loom_fee;return React.createElement("form",{className:"invoice-form"},React.createElement("div",{className:"invoice-header"},React.createElement("div",{className:"logo-field"},React.createElement(Le,null)),React.createElement("div",{className:"contact-fields"},React.createElement("div",null,React.createElement("label",{className:"form-label"},"From:"),React.createElement("div",{className:"invoice-contact"},React.createElement(De,{target:"sender"}),o&&r&&r.sender_name&&React.createElement(ge.c,null,r.sender_name),o&&r&&r.sender_email&&React.createElement(ge.c,null,r.sender_email))),React.createElement("div",null,React.createElement("label",{className:"form-label"},"To:"),React.createElement("div",{className:"invoice-contact"},React.createElement(De,{target:"recipient"}),o&&r&&r.recipient_name&&React.createElement(ge.c,null,r.recipient_name),o&&r&&r.recipient_email&&React.createElement(ge.c,null,r.recipient_email))))),React.createElement("div",{className:"invoice-details"},React.createElement("div",{className:"field-set"},React.createElement("label",{className:"form-label"},"Invoice date: ",n&&n.sent_date)),React.createElement("div",null,React.createElement("label",{className:"form-label"},"Invoice reference number: ",n&&n.reference_id&&n.reference_id.split("-")[0])),React.createElement("div",{className:"field-set subject-field"},React.createElement("label",{className:"form-label"},"Invoice for:"),React.createElement(M.a,{name:"title",placeholder:"Insert project name here",component:je.a})),React.createElement("div",{className:"field-set timeframe-field"},React.createElement("label",{className:"form-label"},"Work timeframe:"),React.createElement(M.a,{name:"start_date",placeholder:"MM/DD/YYYY",parse:function(e){return e?x()(e,"YYYY-MM-DD").format("MM/DD/YYYY"):""},component:He.a}),React.createElement("label",{className:"form-label"},"-"),React.createElement(M.a,{name:"end_date",placeholder:"MM/DD/YYYY",parse:function(e){return e?x()(e,"YYYY-MM-DD").format("MM/DD/YYYY"):""},component:He.a}))),React.createElement("h3",null,"Hourly services"),React.createElement(M.b,{name:"hourly_items",isValid:!r||!r.hourly_items,onBlur:this.calculateInvoice.bind(this),component:Te}),React.createElement("h3",null,"Flat-rate services and expenses"),React.createElement(M.b,{name:"fixed_items",isValid:!r||!r.fixed_items,onBlur:this.calculateInvoice.bind(this),component:Ae}),React.createElement(M.a,{style:{display:"none"},name:"invoice_items",component:"input"}),React.createElement("div",{className:"invoice-totals"},React.createElement("div",{className:"invoice-summary"},t.isCalculating&&React.createElement(D.a,null),!t.isCalculating&&React.createElement("table",null,React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,"Hourly fees"),React.createElement("td",null,"$",Object(P.a)(s,{minimumFractionDigits:2,maximumFractionDigits:2}))),React.createElement("tr",null,React.createElement("td",null,"Flat fees and expenses"),React.createElement("td",null,"$",Object(P.a)(c,{minimumFractionDigits:2,maximumFractionDigits:2}))),React.createElement("tr",{className:"loom-fee"},React.createElement("td",null,"Loom service fee (10%)"),React.createElement("td",null,"-$",Object(P.a)(l,{minimumFractionDigits:2,maximumFractionDigits:2})))),React.createElement("tfoot",{className:"invoice-sum"},React.createElement("tr",null,React.createElement("td",{className:"total-label"},"Total you will receive"),React.createElement("td",null,"$",Object(P.a)(p,{minimumFractionDigits:2,maximumFractionDigits:2})))))),React.createElement("div",{className:"invoice-delivery-date"},React.createElement("label",{className:"form-label"},"Please deliver payment through the Loom platform by"),React.createElement(M.a,{name:"due_date",placeholder:"MM/DD/YYYY",parse:function(e){return e?x()(e,"YYYY-MM-DD").format("MM/DD/YYYY"):""},component:He.a}))),o&&r&&r.invoice_items&&React.createElement(ge.b,null,r.invoice_items),o&&i&&!a&&React.createElement("div",{className:"field-set"},React.createElement(ge.b,null,"Please fix the errors above and try again.")),o&&a&&React.createElement("div",{className:"field-set"},React.createElement(ge.a,{error:a})))}}]),t}();Je=Object(M.o)({form:"invoice",validate:Ue,asyncValidating:!1,touchOnBlur:!1})(Je);var Be=Object(C.b)(function(e){return{invoice:e.invoices.details,editInvoice:e.invoices.edit.invoice,formValues:Object(M.j)("invoice")(e),fieldErrors:Object(M.i)("invoice")(e)}})(Je),We=Be,Ve=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Je,"InvoiceForm","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoice/index.js"),__REACT_HOT_LOADER__.register(Be,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoice/index.js")),n("./app/scripts/containers/invoices/edit/components/invoice/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),$e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),Ve(t,[{key:"showCancelConfirmation",value:function(){if(this.props.isPristine)return this.props.history.push("/invoices/sent");this.props.dispatch(Object(Ie.w)())}},{key:"hideCancelConfirmation",value:function(){this.props.dispatch(Object(Ie.p)())}},{key:"handleSubmit",value:function(e){this.props.dispatch(Object(M.e)("invoice","status",e)),this.props.dispatch(Object(M.p)("invoice"))}},{key:"updateInvoiceLogo",value:function(e){var t=e.reference_id,n=e.logo;if(n&&"string"!=typeof n){var i=new FormData;return i.append("logo",n,n.name),this.props.dispatch(h(t,{logo:i}))}return Promise.resolve(e)}},{key:"updateInvoice",value:function(e){var t=this,n=e.reference_id,i=(e.logo,e.sender,e.recipient,function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["reference_id","logo","sender","recipient"]));return this.updateInvoiceLogo(e).then(function(){return t.props.dispatch(_(n,Object.assign({},i,{due_date:x()(i.due_date,"MM/DD/YYYY").format("YYYY-MM-DD"),sent_date:x()(i.sent_date,"MM/DD/YYYY").format("YYYY-MM-DD"),start_date:x()(i.start_date,"MM/DD/YYYY").format("YYYY-MM-DD"),end_date:x()(i.end_date,"MM/DD/YYYY").format("YYYY-MM-DD"),invoice_items:[].concat(R(i.hourly_items.map(function(e){return Object.assign({},e,{hours:Number(e.hours),rate:Number(e.rate),amount:Number(e.hours)*Number(e.rate)})}).filter(function(e){var t=!0;for(var n in e)"id"!==n&&e[n]&&(t=!1);return!t})),R(i.fixed_items.map(function(e){return Object.assign({},e,{hours:null,rate:null,amount:Number(e.amount)})}).filter(function(e){var t=!0;for(var n in e)"id"!==n&&e[n]&&(t=!1);return!t})))})))}).then(function(e){"draft"===e.status&&t.props.history.push("/invoices/sent")}).catch(function(e){throw new M.d(e)})}},{key:"render",value:function(){var e=this.props,t=e.invoice,n=(e.editInvoice,e.isPristine),i=e.isSubmitting,a=e.match.params;return React.createElement("div",{className:"invoice-items-container"},React.createElement(A.a,null,t.isFetching&&React.createElement(D.a,null),!t.isFetching&&React.createElement("div",null,React.createElement(We,{initialValues:Object.assign({},t.details,{title:t.details.title||"",due_date:t.details.due_date?x()(t.details.due_date,"YYYY-MM-DD").format("MM/DD/YYYY"):"",sent_date:t.details.sent_date?x()(t.details.sent_date,"YYYY-MM-DD").format("MM/DD/YYYY"):x()().format("MM/DD/YYYY"),start_date:t.details.start_date?x()(t.details.start_date,"YYYY-MM-DD").format("MM/DD/YYYY"):"",end_date:t.details.end_date?x()(t.details.end_date,"YYYY-MM-DD").format("MM/DD/YYYY"):"",hourly_items:t.details.hourly_items&&t.details.hourly_items.length?t.details.hourly_items:[{description:"",hours:"",rate:"",amount:""}],fixed_items:t.details.fixed_items&&t.details.fixed_items.length?t.details.fixed_items:[{description:"",hours:"",rate:"",amount:""}],sender_name:t.details.sender_name||"",sender_email:t.details.sender_email||"",recipient_name:t.details.recipient_name||"",recipient_email:t.details.recipient_email||""}),onSubmit:this.updateInvoice.bind(this)}),React.createElement("div",{className:"invoice-form-footer"},React.createElement(k.a,{type:"button",buttonType:"secondary",onClick:this.showCancelConfirmation.bind(this)},"Cancel"),React.createElement(k.a,{type:"button",isLoading:i,disabled:"sent"===t.details.status&&n||i,onClick:this.props.handleSubmit.bind(null,"sent")},a.invoiceId&&"sent"===t.details.status?"Send revised invoice":"Send invoice")))))}}]),t}(),ze=Object(C.b)(function(e){return{user:e.auth,invoice:e.invoices.edit.invoice,isPristine:Object(M.l)("invoice")(e),isSubmitting:Object(M.m)("invoice")(e)}})($e),Xe=ze,Ke=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register($e,"EditInvoiceItems","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/components/invoice/index.js"),__REACT_HOT_LOADER__.register(ze,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/components/invoice/index.js")),n("./app/scripts/containers/invoices/create/components/confirmation/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),Ge=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),Ke(t,[{key:"navigateToInvoices",value:function(){var e=this.props.invoice.details;this.props.history.push("/invoices/"+e.reference_id)}},{key:"render",value:function(){var e=this.props.invoice;return React.createElement("div",{className:"invoice-confirmation"},React.createElement("div",{className:"confirmation-icon"}),React.createElement("h2",null,"Invoice sent to ",React.createElement("span",null,e.details.recipient_name),"!"),React.createElement("h2",{className:"confirmation-subheader"},"We'll alert you when they send payment. If anything needs to change, you can revise the invoice from the invoices tab in your dashboard."),React.createElement("div",{className:"confirmation-actions"},React.createElement(k.a,{type:"button",onClick:this.navigateToInvoices.bind(this,"equity")},"Ok, I got it")))}}]),t}(),Qe=Object(C.b)(function(e){return{user:e.auth,invoice:e.invoices.create.invoice}})(Ge),Ze=Qe,et=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ge,"InvoiceConfirmation","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/components/confirmation/index.js"),__REACT_HOT_LOADER__.register(Qe,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/components/confirmation/index.js")),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),tt=function(e){var t=e.match,n=t.path,i=(t.url,function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["match"]));return React.createElement(T.f,null,React.createElement(T.e,{path:n+"/stripe",render:function(e){return React.createElement(ce,et({},e,i))}}),React.createElement(T.e,{path:n+"/recipient",render:function(e){return React.createElement(Oe,et({},e,i))}}),React.createElement(T.e,{path:n+"/invoice",render:function(e){return React.createElement(Xe,et({},e,i))}}),React.createElement(T.e,{path:n+"/confirmation",render:function(e){return React.createElement(Ze,et({},e,i))}}))},nt=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(tt,"routes","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/routes.js"),n("./app/scripts/containers/invoices/create/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),it=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),nt(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=(t.user,t.creationSteps),i=(t.invoice,t.location),a=this.props.location.search,r=X.a.parse(a).code,o=void 0===r?"":r,s=n.steps.findIndex(function(e){return e.route.test(i.pathname)});o?this.props.dispatch(Object(ee.a)(o)).then(function(t){e.props.dispatch(d()).then(function(){e.props.dispatch(Object(Q.n)())})}):0!==s&&this.props.history.replace(n.steps[0].path),this.props.dispatch(Object(Q.n)()),this.props.dispatch(d())}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.creationSteps,i=t.location,a=e.creationSteps,r=e.location;if(n.step!==a.step)this.goToRequiredRoute(a);else if(i.pathname!==r.pathname){var o=a.steps.findIndex(function(e){return e.route.test(r.pathname)});this.props.dispatch(Object(Q.o)(o))}}},{key:"goToRequiredRoute",value:function(e){var t=e.step,n=e.steps;!e.isComplete&&n[t]?this.props.history.push(n[t].path):this.props.history.push("/invoices/sent")}},{key:"showCancelConfirmation",value:function(){this.props.creationSteps.step<=0?this.navigateToInvoices():this.props.dispatch(Object(Q.A)())}},{key:"hideCancelConfirmation",value:function(){this.props.dispatch(Object(Q.p)())}},{key:"navigateToInvoices",value:function(){this.hideCancelConfirmation(),this.props.history.push("/invoices/sent")}},{key:"goBack",value:function(e){e.preventDefault(),this.props.history.goBack()}},{key:"deleteInvoice",value:function(){var e=this,t=this.props.invoice.details;this.props.dispatch(v(t.reference_id)).then(function(){e.navigateToInvoices()}).catch(function(e){console.log(e)})}},{key:"handleSubmit",value:function(e){var t=this;new Promise(function(n,i){return t.props.dispatch(Object(M.e)("invoice","status",e)),n()}).then(function(){t.props.dispatch(Object(M.p)("invoice")),t.hideCancelConfirmation()})}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.bank,i=e.creationSteps,a=e.invoice,r=e.recipients,o=e.isSubmitting;return n.isFetching||r.isFetching?React.createElement(D.a,null):React.createElement("div",{className:"invoice-creation-container"},React.createElement("div",{className:"sticky-header"},React.createElement(K.a,null),React.createElement("div",{className:"progress-bar"},React.createElement("div",{style:{width:i.progress+"%"}}))),i.header&&React.createElement("div",{className:"step-controller"},t.connected&&!r.isFetching&&React.createElement("div",{className:"step-controller-content"},React.createElement("span",{className:"prev-button"}),React.createElement("h2",null,i.header(r)),React.createElement("span",{className:"next-button"})),React.createElement("div",{className:"cancel-button",onClick:this.showCancelConfirmation.bind(this)},React.createElement("i",{className:"material-icons"},"close"))),React.createElement("div",{className:"invoice-creation-content"},tt(Object.assign({},this.props,{handleSubmit:this.handleSubmit.bind(this)}))),React.createElement(G.c,{className:"invoice-confirmation-modal",open:a.showConfirmation,header:"Save as draft?",footer:React.createElement("div",{className:"modal-footer"},React.createElement(k.a,{type:"button",buttonType:"secondary",onClick:this.deleteInvoice.bind(this)},"No, discard invoice"),React.createElement(k.a,{type:"button",isLoading:o,disabled:o,onClick:this.handleSubmit.bind(this,"draft")},"Yes, save for later")),onClose:this.hideCancelConfirmation.bind(this)},React.createElement("h2",null,"Do you want to save this invoice as a draft to complete later?")))}}]),t}(),at=Object(T.g)(Object(C.b)(function(e){return{user:e.auth,recipients:e.invoices.create.recipients,creationSteps:e.invoices.create.creationSteps,invoice:e.invoices.create.invoice,bank:e.settings.bank.details}})(it)),rt=at,ot=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(it,"CreateInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/index.js"),__REACT_HOT_LOADER__.register(at,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/index.js")),n("./app/scripts/components/profilePhoto/profilePhoto.jsx"),n("./app/scripts/containers/invoices/received/actions/index.js"));"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(b,"fetchInvoices","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/received/actions/api.js"),n("./app/scripts/containers/invoices/received/styles.scss");var st=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ct=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),st(t,[{key:"componentWillMount",value:function(){this.props.dispatch(b())}},{key:"navigateToInvoiceCreate",value:function(){this.props.history.push("/invoices/new")}},{key:"navigateToInvoiceDetails",value:function(e){this.props.history.push("/invoices/"+e)}},{key:"getInvoiceStatus",value:function(e){var t=e.status,n=e.due_date,i=x()(Date.now()).format("YYYY-MM-DD");return"sent"===t&&Date.parse(i)>Date.parse(n)?"past-due":"pending"===t||"draft"===t||"sent"===t?"unpaid":"paid"}},{key:"render",value:function(){var e=this,t=this.props.invoices;return React.createElement("div",{className:"invoices-received-container"},React.createElement("ul",{className:"mobile-invoices-nav"},React.createElement("li",null,React.createElement(T.c,{to:"/invoices/sent",activeClassName:"active"},"New and sent invoices")),React.createElement("li",null,React.createElement(T.c,{to:"/invoices/received",activeClassName:"active"},"Received invoices")),React.createElement("li",null,React.createElement(k.a,{type:"button",onClick:this.navigateToInvoiceCreate.bind(this)},"Create new invoice"))),React.createElement("h2",null,"Review and pay invoices from freelancers"),React.createElement(A.a,{header:"Received invoices"},t.isFetching&&React.createElement(D.a,null),!t.isFetching&&t.invoices.length>0&&React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"From"),React.createElement("th",null,"Invoice ID"),React.createElement("th",{className:"total-amount-cell"},"Total Amount"),React.createElement("th",{className:"net-amout-cell"},"Net Amount"),React.createElement("th",null,"Status"),React.createElement("th",{className:"due-date-cell"},"Due date"))),React.createElement("tbody",null,t&&t.invoices.map(function(t,n){var i=t.invoice_items.reduce(function(e,t){var n=t.amount;return e+Number(n)},0),a=i-.1*i,r=(t.sent_date&&x()(t.sent_date,"YYYY-MM-DD").format("MMMM Do, YYYY"),t.due_date?x()(t.due_date,"YYYY-MM-DD").format("MMMM Do, YYYY"):""),o=e.getInvoiceStatus(t);return React.createElement("tr",{key:n,onClick:e.navigateToInvoiceDetails.bind(e,t.reference_id)},React.createElement("td",null,t.sender_name),React.createElement("td",null,t.reference_id&&t.reference_id.split("-")[0]),React.createElement("td",{className:"total-amount-cell"},"$",Object(P.a)(i,{minimumFractionDigits:2,maximumFractionDigits:2})),React.createElement("td",{className:"net-amout-cell"},"$",Object(P.a)(a,{minimumFractionDigits:2,maximumFractionDigits:2})),React.createElement("td",null,React.createElement("span",{className:"invoice-"+o},o)),React.createElement("td",{className:"due-date-cell"},r))}))),!t.isFetching&&!t.invoices.length&&React.createElement("div",{className:"invoices-empty"},"You have not received any invoices... yet.")))}}]),t}(),lt=Object(C.b)(function(e){return{user:e.auth,invoices:e.invoices.received}})(ct),pt=lt,ut=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ct,"ReceivedInvoices","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/received/index.js"),__REACT_HOT_LOADER__.register(lt,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/received/index.js")),n("./app/scripts/containers/invoices/sent/actions/index.js"));"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(O,"fetchInvoices","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/sent/actions/api.js"),__REACT_HOT_LOADER__.register(g,"deleteInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/sent/actions/api.js")),n("./app/scripts/containers/invoices/sent/styles.scss");var mt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),dt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),mt(t,[{key:"componentWillMount",value:function(){this.props.dispatch(O({action:"sent"}))}},{key:"navigateToInvoiceDetails",value:function(e){this.props.history.push("/invoices/"+e)}},{key:"navigateToInvoiceEdit",value:function(e){this.props.history.push("/invoices/"+e+"/edit")}},{key:"navigateToInvoiceCreate",value:function(){this.props.history.push("/invoices/new")}},{key:"showDeleteConfirmation",value:function(e,t){t.stopPropagation(),this.props.dispatch(Object(ut.p)(e))}},{key:"hideDeleteConfirmation",value:function(){this.props.dispatch(Object(ut.i)())}},{key:"deleteInvoice",value:function(){var e=this.props.invoices.confirmationInvoiceId;this.props.dispatch(g(e))}},{key:"getInvoiceStatus",value:function(e){var t=e.status,n=e.due_date,i=x()(Date.now()).format("YYYY-MM-DD");return"pending"===t||"draft"===t?"draft":"sent"===t&&Date.parse(i)>Date.parse(n)?"past-due":"sent"===t?"sent":"paid"}},{key:"render",value:function(){var e=this,t=this.props.invoices;return React.createElement("div",{className:"invoices-sent-container"},React.createElement("ul",{className:"mobile-invoices-nav"},React.createElement("li",null,React.createElement(T.c,{to:"/invoices/sent",activeClassName:"active"},"New and sent invoices")),React.createElement("li",null,React.createElement(T.c,{to:"/invoices/received",activeClassName:"active"},"Received invoices")),React.createElement("li",null,React.createElement(k.a,{type:"button",onClick:this.navigateToInvoiceCreate.bind(this)},"Create new invoice"))),React.createElement("div",{className:"invoices-sent-header"},React.createElement("h2",null,"Create and send invoices"),React.createElement(k.a,{type:"button",onClick:this.navigateToInvoiceCreate.bind(this)},"Create new invoice")),React.createElement(A.a,{header:"My invoices"},t.isFetching&&React.createElement(D.a,null),!t.isFetching&&t.invoices.length>0&&React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Client"),React.createElement("th",null,"Invoice ID"),React.createElement("th",{className:"total-amount-cell"},"Total Amount"),React.createElement("th",{className:"net-amout-cell"},"Net Amount"),React.createElement("th",null,"Status"),React.createElement("th",{className:"due-date-cell"},"Due date"),React.createElement("th",null))),React.createElement("tbody",null,t&&t.invoices.map(function(t,n){var i=t.invoice_items.reduce(function(e,t){var n=t.amount;return e+Number(n)},0),a=i-.1*i,r=t.due_date?x()(t.due_date,"YYYY-MM-DD").format("MMMM Do, YYYY"):"",o=e.getInvoiceStatus(t),s="draft"===o?e.navigateToInvoiceEdit.bind(e,t.reference_id):e.navigateToInvoiceDetails.bind(e,t.reference_id);return React.createElement("tr",{key:n,onClick:s},React.createElement("td",null,t.recipient_name),React.createElement("td",null,t.reference_id&&t.reference_id.split("-")[0]),React.createElement("td",{className:"total-amount-cell"},"$",Object(P.a)(i,{minimumFractionDigits:2,maximumFractionDigits:2})),React.createElement("td",{className:"net-amout-cell"},"$",Object(P.a)(a,{minimumFractionDigits:2,maximumFractionDigits:2})),React.createElement("td",null,React.createElement("span",{className:"invoice-"+o},o,t.viewed&&"paid"!==o&&"draft"!==o&&React.createElement("i",{className:"viewed-status"},"seen by client"))),React.createElement("td",{className:"due-date-cell"},r),React.createElement("td",null,"draft"===o&&React.createElement("i",{className:"delete-button",onClick:e.showDeleteConfirmation.bind(e,t.reference_id)})))}))),!t.isFetching&&!t.invoices.length&&React.createElement("div",{className:"invoices-empty"},"You haven't created any invoices... yet.")),React.createElement(G.c,{className:"invoice-delete-modal",open:t.showConfirmation,header:"Confirmation",footer:React.createElement("div",{className:"modal-footer"},React.createElement(k.a,{type:"button",buttonType:"secondary",onClick:this.hideDeleteConfirmation.bind(this)},"No, keep it"),React.createElement(k.a,{type:"button",isLoading:t.isDeleting,disabled:t.isDeleting,onClick:this.deleteInvoice.bind(this)},"Yes, delete it")),onClose:this.hideDeleteConfirmation.bind(this)},React.createElement("h2",null,"Are you sure want to delete this invoice draft?")))}}]),t}(),ft=Object(C.b)(function(e){return{invoices:e.invoices.sent}})(dt),vt=ft,_t=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(dt,"SentInvoices","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/sent/index.js"),__REACT_HOT_LOADER__.register(ft,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/sent/index.js")),n("./app/scripts/containers/invoices/edit/components/confirmation/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),ht=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),_t(t,[{key:"navigateToInvoices",value:function(){var e=this.props.invoice.details;this.props.history.push("/invoices/"+e.reference_id)}},{key:"render",value:function(){var e=this.props.invoice;return React.createElement("div",{className:"invoice-confirmation"},React.createElement("div",{className:"invoice-confirmation-message"},React.createElement("div",{className:"confirmation-icon"}),React.createElement("h2",null,"draft"===e.prevStatus?"Invoice sent to":"Revised invoice sent to"," ",React.createElement("span",null,e.details.recipient_name),"!"),React.createElement("h2",{className:"confirmation-subheader"},"We'll alert you when they send payment. If anything needs to change, you can revise the invoice from the invoices tab in your dashboard."),React.createElement("div",{className:"confirmation-actions"},React.createElement(k.a,{type:"button",onClick:this.navigateToInvoices.bind(this)},"Ok, I got it"))))}}]),t}(),yt=Object(C.b)(function(e){return{user:e.auth,invoice:e.invoices.edit.invoice}})(ht),Et=yt,Rt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ht,"InvoiceConfirmation","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/components/confirmation/index.js"),__REACT_HOT_LOADER__.register(yt,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/components/confirmation/index.js")),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),bt=function(e){var t=e.match,n=t.path,i=(t.url,function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}(e,["match"]));return React.createElement(T.f,null,React.createElement(T.e,{exact:!0,path:""+n,render:function(e){return React.createElement(Xe,Rt({},e,i))}}),React.createElement(T.e,{exact:!0,path:n+"/confirmation",render:function(e){return React.createElement(Et,Rt({},e,i))}}))},Ot=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(bt,"routes","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/routes.js"),n("./app/scripts/containers/invoices/edit/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),gt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),Ot(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.user,i=t.editSteps,a=(t.invoice,t.location),r=t.match.params,o=i.steps.findIndex(function(e){return e.route.test(a.pathname)});(o>0||o<0)&&this.props.history.replace(i.steps[0].path(r.invoiceId)),this.props.dispatch(Object(Ie.n)()),this.props.dispatch(u(r.invoiceId)).then(function(t){t.sender.id!==n.user_id&&e.props.history.replace("/invoices/sent")}).catch(function(e){console.log(e)})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.editSteps,i=t.location,a=e.editSteps,r=e.location;if(n.step!==a.step)this.goToRequiredRoute(a);else if(i.pathname!==r.pathname){var o=a.steps.findIndex(function(e){return e.route.test(r.pathname)});this.props.dispatch(Object(Ie.o)(o))}}},{key:"goToRequiredRoute",value:function(e){var t=e.step,n=e.steps,i=e.isComplete,a=this.props.match.params;this.props.invoice.details,!i&&n[t]?this.props.history.push(n[t].path(a.invoiceId)):this.props.history.push("/invoices/sent")}},{key:"showCancelConfirmation",value:function(){this.props.dispatch(Object(Ie.w)())}},{key:"hideCancelConfirmation",value:function(){this.props.dispatch(Object(Ie.p)())}},{key:"navigateToInvoices",value:function(){this.hideCancelConfirmation(),this.props.history.push("/invoices/sent")}},{key:"navigateToInvoice",value:function(e){this.hideCancelConfirmation(),this.props.history.push("/invoices/"+e)}},{key:"handleSubmit",value:function(e){var t=this;new Promise(function(n,i){return t.props.dispatch(Object(M.e)("invoice","status",e)),n()}).then(function(){t.props.dispatch(Object(M.p)("invoice")),t.hideCancelConfirmation()})}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.editSteps,i=e.invoice,a=e.editInvoice,r=i.details.sender.id===t.user_id;return React.createElement("div",{className:"invoice-edit-container"},React.createElement("div",{className:"sticky-header"},React.createElement(K.a,null),React.createElement("div",{className:"progress-bar"},React.createElement("div",{style:{width:n.progress+"%"}}))),n.header&&React.createElement("div",{className:"step-controller"},React.createElement("div",{className:"step-controller-content"},React.createElement("span",{className:"prev-button"}),React.createElement("h2",null,n.header(i.details)),React.createElement("span",{className:"next-button"})),React.createElement("div",{className:"cancel-button",onClick:this.showCancelConfirmation.bind(this)},React.createElement("i",{className:"material-icons"},"close"))),React.createElement("div",{className:"invoice-edit-content"},!i.isFetching&&r&&bt(Object.assign({},this.props,{handleSubmit:this.handleSubmit.bind(this)}))),React.createElement(G.c,{className:"invoice-confirmation-modal",open:a.showConfirmation,header:"Are you sure?",footer:React.createElement("div",{className:"modal-footer"},React.createElement(k.a,{type:"button",buttonType:"secondary",onClick:"sent"===i.details.status?this.navigateToInvoice.bind(this,i.details.reference_id):this.navigateToInvoices.bind(this)},"Yes, discard changes"),React.createElement(k.a,{type:"button",onClick:"sent"===i.details.status?this.hideCancelConfirmation.bind(this):this.handleSubmit.bind(this,"draft")},"sent"===i.details.status?"No, keep editing":"No, save changes")),onClose:this.hideCancelConfirmation.bind(this)},React.createElement("h2",null,"You made edits to this invoice. Are you sure you want to leave and discard those edits?")))}}]),t}(),jt=Object(C.b)(function(e){return{user:e.auth,editSteps:e.invoices.edit.editSteps,invoice:e.invoices.details,editInvoice:e.invoices.edit.invoice,isPristine:Object(M.l)("invoice")(e)}})(gt),wt=jt,Tt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(gt,"EditInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/index.js"),__REACT_HOT_LOADER__.register(jt,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/index.js")),n("./app/scripts/features/forms/payment/index.js")),Ct=n("./app/scripts/containers/invoices/payment/actions/index.js"),At=n("./app/scripts/containers/settings/payments/actions/api.js"),kt=(n("./app/scripts/containers/invoices/payment/components/requirements/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),Dt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),kt(t,[{key:"handleSubmit",value:function(){this.props.dispatch(Object(M.p)("payment"))}},{key:"savePaymentSource",value:function(e){var t=this,n=(this.props.payments,e.name),i=e.number,a=e.exp,r=e.cvc;return new Promise(function(e,t){window.Stripe.card.createToken({name:n,number:i,exp:a,cvc:r},function(n,i){return i.error?t(i.error.message):e(i.id)})}).then(function(e){return t.props.dispatch(Object(At.a)({stripe_token:e}))}).catch(function(e){throw new M.d({_error:e.errors.message})})}},{key:"render",value:function(){var e=this.props,t=e.payments,n=e.isSubmitting;return React.createElement("div",{className:"invoice-payment-requirements"},React.createElement(Tt.a,{optionalUpdate:!0,initialValues:Object.assign({},t.card,{exp:t.card.exp_month&&t.card.exp_year?t.card.exp_month+"/"+t.card.exp_year:""}),onSubmit:this.savePaymentSource.bind(this)}),React.createElement("div",{className:"requirements-actions"},React.createElement(k.a,{type:"button",buttonType:"secondary",onClick:function(){}},"Cancel"),React.createElement(k.a,{type:"button",isLoading:n,disabled:n,onClick:this.handleSubmit.bind(this,"equity")},"Save and continue")))}}]),t}(),Nt=Object(C.b)(function(e){return{user:e.auth,payments:e.settings.payments,isSubmitting:Object(M.m)("payment")(e)}})(Dt),xt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Dt,"InvoiceRequirements","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/components/requirements/index.js"),__REACT_HOT_LOADER__.register(Nt,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/components/requirements/index.js")),n("./app/scripts/containers/settings/payments/components/paymentDetails/index.js")),Pt=n("./app/scripts/api/paymentsource/index.js");"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(j,"createPayment","/Users/will/development/loom/market-ui/app/scripts/api/payment/index.js");var Yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(w,"createPayment","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/actions/api.js"),n("./app/scripts/containers/invoices/payment/components/review/styles.scss");var St=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Lt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={useNewCard:!e.user.payments_enabled},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),St(t,[{key:"componentWillMount",value:function(){var e=this.props.user;e.payments_enabled&&this.props.dispatch(Object(At.c)(e.user_id))}},{key:"handleSubmit",value:function(){this.props.dispatch(Object(M.p)("payment"))}},{key:"savePaymentSource",value:function(e){var t=this,n=this.props,i=n.payments,a=n.invoice,r=e.name,o=e.number,s=e.exp,c=e.cvc,l=e.save,p=void 0,u=void 0;return new Promise(function(e,t){window.Stripe.card.createToken({name:r,number:o,exp:s,cvc:c},function(n,i){return i.error?t(i.error.message):e(i)})}).then(function(e){var n=e.id,a=e.card;return p=n,u=a.country,l?Object(Pt.b)({source_id:i.card.id}).then(function(){return t.props.dispatch(Object(At.a)({stripe_token:n}))}).catch(function(e){throw new M.d({_error:e.errors.message})}):n}).then(function(){var e={invoice:a.details.reference_id};return l||(e.token=p,e.country=u),t.props.dispatch(w(e))}).catch(function(e){console.log(e)})}},{key:"sendPayment",value:function(){var e=this.props.invoice;this.state.useNewCard?this.handleSubmit():this.props.dispatch(w({invoice:e.details.reference_id}))}},{key:"navigateToInvoiceDetails",value:function(){var e=this.props.invoice;this.props.history.push("/invoices/"+e.details.reference_id)}},{key:"hidePaymentConfirmation",value:function(){this.props.dispatch(Object(Ct.p)())}},{key:"handleConfirmation",value:function(){var e=this.props,t=(e.invoice,e.invoicePayment);this.hidePaymentConfirmation(),t.paymentSuccess&&this.navigateToInvoiceDetails()}},{key:"togglePaymentSource",value:function(e){this.setState({useNewCard:"newCard"===e.currentTarget.value})}},{key:"render",value:function(){var e=this.state.useNewCard,t=this.props,n=t.user,i=t.payments,a=t.invoice,r=t.invoicePayment,o=(t.paymentSteps,t.isSubmitting),s=Object(P.a)(a.details.total_amount,{minimumFractionDigits:2,maximumFractionDigits:2}),c=a.details.sender_name,l=a.details.title,p=a.details.reference_id&&a.details.reference_id.split("-")[0];return React.createElement("div",{className:"invoice-payment-review"},React.createElement("h2",{className:"confirmation-subheader"},"Pay ",React.createElement("span",null,"$",s)," to ",c," for work on ",l,"."),React.createElement("div",{className:"payment-tile"},i.isFetching&&React.createElement(D.a,null),!i.isFetching&&React.createElement("div",null,n.payments_enabled&&React.createElement("div",null,React.createElement("label",{className:"checkout-option-label"},React.createElement("input",{type:"radio",value:"currentCard",checked:!e,onChange:this.togglePaymentSource.bind(this)})," Pay with saved card"),React.createElement("div",{className:"checkout-option current-card "+(e?"use-new":"")},React.createElement(xt.a,null))),n.payments_enabled&&React.createElement("label",{className:"checkout-option-label"},React.createElement("input",{type:"radio",value:"newCard",checked:e,onChange:this.togglePaymentSource.bind(this)})," Pay with a different card"),React.createElement("div",{className:"checkout-option new-card-form "+(e?"use-new":"")},React.createElement(Tt.a,{optionalUpdate:!0,initialValues:{name:"",number:"",cvc:"",exp:"",tos:!1},onSubmit:this.savePaymentSource.bind(this)})))),React.createElement("div",{className:"invoice-payment-footer"},React.createElement(k.a,{type:"button",buttonType:"secondary",onClick:this.navigateToInvoiceDetails.bind(this)},"Cancel"),React.createElement(k.a,{type:"button",isLoading:r.isSaving||o,disabled:r.isSaving||o,onClick:this.sendPayment.bind(this)},"Pay invoice")),React.createElement("div",{className:"stripe-tag"},"Secure payment processing ",React.createElement("i",{className:"stripe-icon"})),React.createElement(G.c,{className:"payment-confirmation-modal",open:r.showPaymentConfirmation,header:r.paymentSuccess?"Payment success!":"Payment error!",footer:React.createElement("div",{className:"modal-footer"},React.createElement(k.a,{type:"button",onClick:this.handleConfirmation.bind(this)},"Ok, got it"))},r.paymentSuccess&&React.createElement("div",null,React.createElement("div",{className:"payment-success-icon"}),React.createElement("h2",null,"You paid ",React.createElement("span",null,"$",s)," to ",c," for invoice ",p,".")),r.error&&React.createElement("div",null,React.createElement("div",{className:"payment-error-icon"}),React.createElement("h2",null,"We could not process the payment on your card. Try again or use a different card."))))}}]),t}(),Ht=Object(C.b)(function(e){return{user:e.auth,invoice:e.invoices.details,invoicePayment:e.invoices.payment.payment,paymentSteps:e.invoices.payment.steps,payments:e.settings.payments,isSubmitting:Object(M.m)("payment")(e)}})(Lt),It=Ht,Mt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Lt,"InvoicePaymentReview","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/components/review/index.js"),__REACT_HOT_LOADER__.register(Ht,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/components/review/index.js")),function(e){var t=e.match,n=t.path;return t.url,React.createElement(T.f,null,React.createElement(T.e,{path:n+"/review",component:It}))}),Ft=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Mt,"routes","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/routes.js"),n("./app/scripts/containers/invoices/payment/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),Ut=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),Ft(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.user,i=t.paymentSteps,a=t.location,r=t.match.params,o=i.steps.findIndex(function(e){return e.route.test(a.pathname)}),s=a.state;this.props.dispatch(u(r.invoiceId)).then(function(t){"paid"===t.status||t.recipient.id!==n.user_id?e.props.history.replace("/invoices/received"):(o>0||o<0)&&e.props.history.replace(i.steps[0].path(r.invoiceId)),e.props.dispatch(Object(Ct.m)(Object.assign({},s)))}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.props.location;var e=window.document.querySelector("nav.dashboardNav-section");e&&(e.style.display="none")}},{key:"componentWillUnmount",value:function(){var e=window.document.querySelector("nav.dashboardNav-section");e&&(e.style.display="block"),this.props.dispatch(Object(Ct.m)({entryPath:null,exitPath:null}))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.paymentSteps,i=t.location,a=e.paymentSteps,r=e.location;if(n.step!==a.step)this.goToRequiredRoute(a);else if(i.pathname!==r.pathname){var o=a.steps.findIndex(function(e){return e.route.test(r.pathname)});this.props.dispatch(Object(Ct.n)(o))}}},{key:"goToRequiredRoute",value:function(e){var t=e.step,n=e.steps,i=e.isComplete,a=this.props.match.params;!i&&n[t]&&this.props.history.push(n[t].path(a.invoiceId))}},{key:"navigateToInvoiceDetails",value:function(){var e=this.props.invoice;this.props.history.push("/invoices/"+e.details.reference_id)}},{key:"goToEntryRoute",value:function(){var e=this.props,t=e.paymentSteps,n=e.invoice,i=(e.location,t.entryPath);this.hideCancelConfirmation(),i?this.props.history.push(i):this.props.history.push("/invoices/"+n.details.reference_id)}},{key:"showCancelConfirmation",value:function(){this.props.paymentSteps.step<=0?this.goToEntryRoute():this.props.dispatch(Object(Ct.t)())}},{key:"hideCancelConfirmation",value:function(){this.props.dispatch(Object(Ct.o)())}},{key:"goBack",value:function(e){e.preventDefault(),this.props.history.goBack()}},{key:"render",value:function(){var e=this.props,t=(e.user,e.paymentSteps),n=e.invoice;return e.payments,e.location,e.isSubmitting,React.createElement("div",{className:"invoice-payment-creation-container"},React.createElement("div",{className:"sticky-header"},React.createElement(K.a,null),React.createElement("div",{className:"progress-bar"},React.createElement("div",{style:{width:t.progress+"%"}}))),t.header&&React.createElement("div",{className:"step-controller"},React.createElement("div",{className:"step-controller-content"},React.createElement("span",{className:"prev-button"},t.step>0&&t.backLink&&React.createElement("a",{href:"#",onClick:this.goBack.bind(this)},React.createElement("i",{className:"material-icons"},"chevron_left")," ",t.backLink())),React.createElement("h2",null,t.header(n.details)),React.createElement("span",{className:"next-button"})),React.createElement("div",{className:"cancel-button",onClick:this.navigateToInvoiceDetails.bind(this)},React.createElement("i",{className:"material-icons"},"close"))),React.createElement("div",{className:"invoice-payment-creation-content"},n.isFetching&&React.createElement(D.a,null),!n.isFetching&&Mt(this.props)))}}]),t}(),qt=Object(C.b)(function(e){return{user:e.auth,paymentSteps:e.invoices.payment.steps,invoice:e.invoices.details,payments:e.settings.payments}})(Ut),Jt=qt,Bt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ut,"SendPayment","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/index.js"),__REACT_HOT_LOADER__.register(qt,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/index.js")),function(e){var t=e.match,n=t.path,i=t.url;return React.createElement(T.f,null,React.createElement(T.e,{exact:!0,path:""+n,render:function(){return React.createElement(T.d,{to:i+"/sent"})}}),React.createElement(T.e,{path:n+"/sent",component:vt}),React.createElement(T.e,{path:n+"/received",component:pt}),React.createElement(T.e,{path:n+"/new",component:rt}),React.createElement(T.e,{exact:!0,path:n+"/:invoiceId",component:$}),React.createElement(T.e,{path:n+"/:invoiceId/edit",component:wt}),React.createElement(T.e,{path:n+"/:invoiceId/payment",component:Jt}))});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Bt,"routes","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/routes.js"),n("./app/scripts/containers/invoices/styles.scss"),n.d(t,"InvoicesContainer",function(){return Wt});var Wt=function(e){return React.createElement("div",{className:"invoices-container"},Bt(e))};"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Wt,"InvoicesContainer","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/index.js")},"./app/scripts/containers/invoices/payment/components/requirements/styles.scss":function(e,t){},"./app/scripts/containers/invoices/payment/components/review/styles.scss":function(e,t){},"./app/scripts/containers/invoices/payment/styles.scss":function(e,t){},"./app/scripts/containers/invoices/received/styles.scss":function(e,t){},"./app/scripts/containers/invoices/sent/styles.scss":function(e,t){},"./app/scripts/containers/invoices/styles.scss":function(e,t){},"./app/scripts/containers/settings/payments/actions/api.js":function(e,t,n){"use strict";function i(e){return function(t){return t(l.z()),c.c(e).then(function(e){if(e.status>200)throw new Error;return e.json()}).then(function(e){return t(l.A(e[0]||{})),e}).catch(function(e){t(l.y(e))})}}function a(e){return function(t){return t(l.t()),c.a(e).then(function(e){if(e.status>201&&400!==e.status&&402!==e.status)throw new Error(JSON.stringify({status:e.status}));return 400===e.status||402===e.status?e.json().then(function(t){throw new Error(JSON.stringify(p({status:e.status},t)))}):e.json()}).then(function(e){var n=e.sources?e.sources.data[0]:e;return t(l.u(n)),e}).catch(function(e){e.status;var n=e.message,i=n&&JSON.parse(n),a={};throw i&&400===i.status?a._error=i.error:i&&i.status>=500&&(a._error="An unexpected error occurred. Please try again later."),t(l.s(a)),new s.d(a)})}}function r(e){return function(t){return t(l.C()),c.d(e).then(function(e){if(e.status>200)throw new Error;return e.json()}).then(function(e){return t(l.D(e)),e}).catch(function(e){throw t(l.B(e)),new s.d({_error:"Unknown error:"})})}}function o(e){return function(t){return t(l.w()),c.b(e).then(function(e){if(e.status>202)throw new Error;return e.json()}).then(function(e){return t(l.x()),e}).catch(function(e){t(l.v(e))})}}t.c=i,t.a=a,t.d=r,t.b=o;var s=n("./node_modules/redux-form/es/index.js"),c=n("./app/scripts/api/paymentsource/index.js"),l=n("./app/scripts/containers/settings/payments/actions/index.js"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"fetchPaymentSource","/Users/will/development/loom/market-ui/app/scripts/containers/settings/payments/actions/api.js"),__REACT_HOT_LOADER__.register(a,"createPaymentSource","/Users/will/development/loom/market-ui/app/scripts/containers/settings/payments/actions/api.js"),__REACT_HOT_LOADER__.register(r,"updatePaymentSource","/Users/will/development/loom/market-ui/app/scripts/containers/settings/payments/actions/api.js"),__REACT_HOT_LOADER__.register(o,"deletePaymentSource","/Users/will/development/loom/market-ui/app/scripts/containers/settings/payments/actions/api.js"))},"./app/scripts/containers/settings/payments/components/paymentDetails/index.js":function(e,t,n){"use strict";var i=n("./node_modules/react-redux/es/index.js"),a=(n("./app/scripts/components/button/button.jsx"),n("./app/scripts/components/modal/modal.jsx"),n("./app/scripts/containers/settings/payments/actions/index.js"),n("./app/scripts/containers/settings/payments/components/paymentDetails/styles.scss")),r=(n.n(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),r(t,[{key:"render",value:function(){var e=this.props.payments.card;return React.createElement("div",{className:"payment-details"},React.createElement("div",{className:"field-set card-info"},React.createElement("span",null,"Name on card"),React.createElement("p",null,e.name)),React.createElement("div",{className:"card-row"},React.createElement("div",{className:"field-set"},React.createElement("span",null,"Card info"),React.createElement("p",null,React.createElement("b",null,e.brand.toUpperCase())," - XXXX-XXXX-XXXX-",e.last4)),React.createElement("div",{className:"field-set card-exp"},React.createElement("span",null,"Expiration"),React.createElement("p",null,e.exp_month+"/"+String(e.exp_year).split("").splice(-2).join("")))))}}]),t}(),s=Object(i.b)(function(e){return{payments:e.settings.payments}})(o);t.a=s,"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(o,"PaymentDetails","/Users/will/development/loom/market-ui/app/scripts/containers/settings/payments/components/paymentDetails/index.js"),__REACT_HOT_LOADER__.register(s,"default","/Users/will/development/loom/market-ui/app/scripts/containers/settings/payments/components/paymentDetails/index.js"))},"./app/scripts/containers/settings/payments/components/paymentDetails/styles.scss":function(e,t){},"./app/scripts/features/forms/invoice/components/contactField/styles.scss":function(e,t){},"./app/scripts/features/forms/invoice/components/fixedFeeFields/styles.scss":function(e,t){},"./app/scripts/features/forms/invoice/components/hourlyFeeFields/styles.scss":function(e,t){},"./app/scripts/features/forms/invoice/styles.scss":function(e,t){},"./app/scripts/features/forms/payment/index.js":function(e,t,n){"use strict";var i=n("./node_modules/redux-form/es/index.js"),a=n("./app/scripts/components/errors/errors.js"),r=n("./app/scripts/components/formFields/input/index.js"),o=n("./app/scripts/components/formFields/checkbox/index.js"),s=(n("./app/scripts/features/forms/terms/components/termsField/index.js"),n("./app/scripts/utils/formUtils.js")),c=function(e){var t={};return s.a.checks.isRequired(e.name)||(t.name="Please enter the name on your card."),e.number&&window.Stripe.card.validateCardNumber(e.number)||(t.number="Please enter a valid card number."),e.exp&&window.Stripe.card.validateExpiry(e.exp)||(t.exp="Please enter a valid expiration date."),e.cvc&&window.Stripe.card.validateCVC(e.cvc)||(t.cvc="Please enter a valid security code."),t},l=c,p=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(c,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/payment/validation.js"),n("./app/scripts/features/forms/payment/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,React.Component),p(t,[{key:"render",value:function(){var e=this.props,t=e.optionalUpdate,n=(e.invalid,e.error),s=e.submitFailed,c=e.isSubmitting,l=e.termsText,p=void 0===l?"":l;return React.createElement("form",{className:"payments-form"},React.createElement("div",{className:"form-body"},React.createElement("div",{className:"field-set"},React.createElement(i.a,{name:"name",type:"text",label:"Name on card",component:r.a})),React.createElement("div",{className:"field-set"},React.createElement(i.a,{name:"number",label:"Card number",component:r.a})),React.createElement("div",{className:"field-set card-exp-cvv"},React.createElement(i.a,{name:"exp",type:"text",label:"Expiration",placeholder:"MM/YY",component:r.a}),React.createElement(i.a,{name:"cvc",type:"text",label:"CVV",component:r.a})),t&&React.createElement("div",{className:"field-set card-checkbox"},React.createElement(i.a,{name:"save",label:React.createElement("span",null,"Save card for future payments"),component:o.a})),p&&React.createElement("div",{className:"field-set card-terms"},React.createElement(i.a,{name:"tos",disabled:c,label:React.createElement("span",null,p),component:o.a})),s&&n&&React.createElement("div",{className:"field-set"},React.createElement(a.b,null,n))))}}]),t}(),m=Object(i.o)({form:"payment",validate:l,asyncValidating:!1,touchOnBlur:!1})(u);t.a=m,"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(u,"CreditCardForm","/Users/will/development/loom/market-ui/app/scripts/features/forms/payment/index.js"),__REACT_HOT_LOADER__.register(m,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/payment/index.js"))},"./app/scripts/features/forms/payment/styles.scss":function(e,t){},"./app/scripts/features/forms/terms/components/termsField/index.js":function(e,t,n){"use strict";var i=n("./node_modules/redux-form/es/index.js"),a=n("./app/scripts/components/formFields/checkbox/index.js"),r=function(e){e.label;var t=e.disabled,n=e.name,r=void 0===n?"tos":n;return React.createElement(i.a,{name:r,disabled:t,label:React.createElement("span",null,"By checking this box, you agree to Loom's ",React.createElement("a",{href:"/terms-of-service/",target:"_blank"},"Term of Service")," and ",React.createElement("a",{href:"/privacy/",target:"_blank"},"Privacy Policy"),", which includes the payment terms stated above."),component:a.a})};t.a=r,"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(r,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/terms/components/termsField/index.js")},"./node_modules/queryString/decode.js":function(e,t,n){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,a){t=t||"&",n=n||"=";var r={};if("string"!=typeof e||0===e.length)return r;var o=/\+/g;e=e.split(t);var s=1e3;a&&"number"==typeof a.maxKeys&&(s=a.maxKeys);var c=e.length;s>0&&c>s&&(c=s);for(var l=0;l<c;++l){var p,u,m,d,f=e[l].replace(o,"%20"),v=f.indexOf(n);v>=0?(p=f.substr(0,v),u=f.substr(v+1)):(p=f,u=""),m=decodeURIComponent(p),d=decodeURIComponent(u),i(r,m)?Array.isArray(r[m])?r[m].push(d):r[m]=[r[m],d]:r[m]=d}return r}},"./node_modules/queryString/encode.js":function(e,t,n){"use strict";var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(a){var r=encodeURIComponent(i(a))+n;return Array.isArray(e[a])?e[a].map(function(e){return r+encodeURIComponent(i(e))}).join(t):r+encodeURIComponent(i(e[a]))}).join(t):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(e)):""}},"./node_modules/queryString/index.js":function(e,t,n){"use strict";t.decode=t.parse=n("./node_modules/queryString/decode.js"),t.encode=t.stringify=n("./node_modules/queryString/encode.js")}});