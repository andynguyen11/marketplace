webpackJsonp([2],{"./app/scripts/api/paymentsource/index.js":function(e,t,n){"use strict";function i(){return fetch(l.a.paymentsource+"/",{credentials:"same-origin"})}function a(e){return fetch(l.a.paymentsource+"/",{method:"POST",credentials:"same-origin",headers:{Authorization:"JWT "+s.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PATCH";return fetch(l.a.paymentsource+"/",{method:t,credentials:"same-origin",headers:{Authorization:"JWT "+s.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})}function o(e){return fetch(l.a.paymentsource+"/",{method:"DELETE",credentials:"same-origin",headers:{Authorization:"JWT "+s.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})}t.c=i,t.a=a,t.d=r,t.b=o;var c=n("./node_modules/js-cookie/src/js.cookie.js"),s=n.n(c),l=n("./app/scripts/api/urls.js");!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"fetchPaymentSource","/Users/will/development/loom/market-ui/app/scripts/api/paymentsource/index.js"),__REACT_HOT_LOADER__.register(a,"createPaymentSource","/Users/will/development/loom/market-ui/app/scripts/api/paymentsource/index.js"),__REACT_HOT_LOADER__.register(r,"updatePaymentSource","/Users/will/development/loom/market-ui/app/scripts/api/paymentsource/index.js"),__REACT_HOT_LOADER__.register(o,"deletePaymentSource","/Users/will/development/loom/market-ui/app/scripts/api/paymentsource/index.js"))}()},"./app/scripts/components/formFields/dateInput/index.js":function(e,t,n){"use strict";var i=n("./app/scripts/components/forms/formFields.js"),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(e){var t=e.input,n=e.label,r=e.type,o=e.placeholder,c=e.helperText,s=e.prefix,l=e.disablePaste,u=void 0!==l&&l,p=e.meta,m=p.touched,d=p.error,f=m&&d;return React.createElement(i.b,a({},t,{type:r,prefix:s,config:{name:t.name,type:r,label:n,helperText:c,placeholder:o,disablePaste:u,error:f||"",value:t.value,onChange:t.onChange}}))};t.a=r,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(r,"default","/Users/will/development/loom/market-ui/app/scripts/components/formFields/dateInput/index.js")}()},"./app/scripts/components/formFields/invoicePhoto/styles.scss":function(e,t){},"./app/scripts/containers/invoices/create/components/confirmation/styles.scss":function(e,t){},"./app/scripts/containers/invoices/create/components/recipient/styles.scss":function(e,t){},"./app/scripts/containers/invoices/create/components/type/styles.scss":function(e,t){},"./app/scripts/containers/invoices/create/styles.scss":function(e,t){},"./app/scripts/containers/invoices/details/components/details/styles.scss":function(e,t){},"./app/scripts/containers/invoices/details/components/status/styles.scss":function(e,t){},"./app/scripts/containers/invoices/details/styles.scss":function(e,t){},"./app/scripts/containers/invoices/edit/components/confirmation/styles.scss":function(e,t){},"./app/scripts/containers/invoices/edit/components/invoice/styles.scss":function(e,t){},"./app/scripts/containers/invoices/edit/styles.scss":function(e,t){},"./app/scripts/containers/invoices/index.js":function(e,t,n){"use strict";function i(){return fetch(Ue.a.invoice+"/recipients/",{credentials:"same-origin"})}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.action,n=void 0===t?"received":t;return fetch(Ue.a.invoice+"/?action="+n,{credentials:"same-origin"})}function r(e){return fetch(Ue.a.invoice+"/"+e+"/",{credentials:"same-origin",headers:{Accept:"application/json"}})}function o(e){return fetch(Ue.a.invoice+"/",{method:"POST",credentials:"same-origin",headers:{Authorization:"JWT "+Fe.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"PATCH";return fetch(Ue.a.invoice+"/"+e+"/",{method:n,credentials:"same-origin",headers:{Authorization:"JWT "+Fe.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"PATCH";return fetch(Ue.a.invoice+"/"+e+"/",{method:n,credentials:"same-origin",headers:{Authorization:"JWT "+Fe.a.get("loom_token"),Accept:"application/json"},body:t.logo})}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"PATCH";return fetch(Ue.a.invoice+"/"+e+"/totals/",{method:n,credentials:"same-origin",headers:{Authorization:"JWT "+Fe.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})}function u(e){return fetch(Ue.a.invoice+"/"+e+"/",{method:"DELETE",credentials:"same-origin",headers:{Authorization:"JWT "+Fe.a.get("loom_token"),Accept:"application/json"}})}function p(e){return function(t){return t(Je.h()),r(e).then(function(e){if(e.status>200)throw new Error;return e.json()}).then(function(e){return t(Je.i(e)),e}).catch(function(e){t(Je.g(e))})}}function m(e,t){return function(n){return n(Je.k()),c(e,t).then(function(e){if(e.status>200)throw new Error;return e.json()}).then(function(e){return n(Je.l(e)),e}).catch(function(e){n(Je.j(e))})}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(){return function(e){return e(ze.x()),i().then(function(e){if(e.status>200)throw new Error;return e.json()}).then(function(t){return e(ze.y(t)),t}).catch(function(t){throw e(ze.w(t)),new Ie.d({_error:"Unknown error"})})}}function _(e){return function(t){return t(ze.r()),o(e).then(function(e){if(e.status>201&&400!==e.status)throw new Error(JSON.stringify({status:e.status}));return 400===e.status?e.json().then(function(t){throw new Error(JSON.stringify(Ge({status:e.status},t)))}):e.json()}).then(function(e){return t(ze.s(e)),e}).catch(function(e){var n=(e.status,e.message),i=n&&JSON.parse(n),a={};if(i&&400===i.status)for(var r in i)a[r]=i[r][0];else i&&i.status>=500&&(a._error="An unexpected error occurred. Please try again later.");throw t(ze.q(a)),new Ie.d(a)})}}function y(e){return function(t){return t(ze.u()),u(e).then(function(e){if(e.status>204)throw new Error;return e}).then(function(n){return t(ze.v(e)),e}).catch(function(e){t(ze.t(e))})}}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function j(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function x(e,t){return function(n){return n(kt.u()),c(e,t).then(function(e){if(e.status>200&&400!==e.status)throw new Error(JSON.stringify({status:e.status}));return 400===e.status?e.json().then(function(t){throw new Error(JSON.stringify(Dt({status:e.status},t)))}):e.json()}).then(function(e){return n(kt.v(e)),e}).catch(function(e){var t=(e.status,e.message),i=t&&JSON.parse(t),a={};if(i&&400===i.status)for(var r in i)a[r]=i[r][0];else i&&i.status>=500&&(a._error="An unexpected error occurred. Please try again later.");throw n(kt.t(a)),new Ie.d(a)})}}function Y(e,t){return function(n){return n(kt.u()),s(e,t,"PATCH").then(function(e){if(e.status>200&&400!==e.status)throw new Error(JSON.stringify({status:e.status}));return 400===e.status?e.json().then(function(t){throw new Error(JSON.stringify(Dt({status:e.status},t)))}):e.json()}).then(function(e){return e}).catch(function(e){var t=(e.status,e.message),i=t&&JSON.parse(t),a={};if(i&&400===i.status)for(var r in i)a[r]=i[r][0];else i&&i.status>=500&&(a._error="An unexpected error occurred. Please try again later.");throw n(kt.t(a)),new Ie.d(a)})}}function P(e,t){return function(n){return n(kt.r()),l(e,t).then(function(e){if(e.status>200&&400!==e.status)throw new Error(JSON.stringify({status:e.status}));return 400===e.status?e.json().then(function(t){throw new Error(JSON.stringify(Dt({status:e.status},t)))}):e.json()}).then(function(e){return n(kt.s(e)),e}).catch(function(e){var t=(e.status,e.message),i=t&&JSON.parse(t),a={};if(i&&400===i.status)for(var r in i)a[r]=i[r][0];else i&&i.status>=500&&(a._error="An unexpected error occurred. Please try again later.");throw n(kt.q(a)),new Ie.d(a)})}}function S(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function L(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function F(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function U(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function X(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function K(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Q(e){return function(t){return t(Kt.h()),a(e).then(function(e){if(e.status>200)throw new Error;return e.json()}).then(function(e){return t(Kt.i(e)),e}).catch(function(e){t(Kt.g(e))})}}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ne(e){return function(t){return t(nn.n()),a(e).then(function(e){if(e.status>200)throw new Error;return e.json()}).then(function(e){return t(nn.o(e)),e}).catch(function(e){t(nn.m(e))})}}function ie(e){return function(t){return t(nn.k()),u(e).then(function(e){if(e.status>204)throw new Error;return e}).then(function(n){return t(nn.l(e)),e}).catch(function(e){t(nn.j(e))})}}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ue(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function de(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function he(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _e(e){return fetch(Ue.a.payment+"/",{method:"POST",credentials:"same-origin",headers:{Authorization:"JWT "+Fe.a.get("loom_token"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})}function ye(e){return function(t){return t(En.r()),_e(e).then(function(e){if(e.status>200&&400!==e.status)throw new Error(JSON.stringify({status:e.status}));return 400===e.status?e.json().then(function(t){throw new Error(JSON.stringify(Tn({status:e.status},t)))}):e}).then(function(e){return t(En.s()),e}).catch(function(e){var n=(e.status,e.message),i=n&&JSON.parse(n),a={};if(i&&400===i.status)for(var r in i)a[r]=i[r][0];else i&&i.status>=500&&(a._error="An unexpected error occurred. Please try again later.");throw t(En.q(a)),new Ie.d(a)})}}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function be(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function we(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var je=n("./node_modules/react-router-dom/es/index.js"),Te=n("./node_modules/react-redux/es/index.js"),Ce=n("./app/scripts/components/tile/tile.jsx"),Ae=n("./app/scripts/components/button/button.jsx"),ke=n("./app/scripts/components/loader/loader.jsx"),De=n("./node_modules/moment/moment.js"),Ne=n.n(De),xe=n("./app/scripts/utils/numberUtils.js"),Ye=(n("./app/scripts/containers/invoices/details/components/details/styles.scss"),function(e){var t=e.details,n=t.hourly_items&&t.hourly_items.reduce(function(e,t){return e+Number(t.hours)*Number(t.rate)},0),i=t.fixed_items&&t.fixed_items.reduce(function(e,t){return e+Number(t.amount)},0),a=.1*(n+i),r=n+i-a;return React.createElement("div",null,React.createElement("div",{className:"invoice-header"},React.createElement("div",{className:"invoice-logo-container"},React.createElement("div",{className:"invoice-logo",style:{backgroundImage:"url("+t.logo+")"}})),React.createElement("div",{className:"invoice-contacts"},React.createElement("div",null,React.createElement("span",{className:"invoice-label"},"From:"),React.createElement("div",{className:"invoice-sender"},React.createElement("p",null,t.sender_name),React.createElement("p",null,t.sender_address),React.createElement("p",null,t.sender_address2),React.createElement("p",null,t.sender_location),React.createElement("p",null,t.recipient_email),React.createElement("p",null,t.recipient_phone))),React.createElement("div",null,React.createElement("span",{className:"invoice-label"},"To:"),React.createElement("div",{className:"invoice-recipient"},React.createElement("p",null,t.recipient_name),React.createElement("p",null,t.recipient_address),React.createElement("p",null,t.recipient_address2),React.createElement("p",null,t.recipient_location),React.createElement("p",null,t.recipient_email),React.createElement("p",null,t.recipient_phone))))),React.createElement("div",{className:"invoice-details"},React.createElement("p",null,"Invoice date: ",React.createElement("span",{className:"invoice-label"},t.sent_date?Ne()(t.sent_date,"YYYY-MM-DD").format("MM/DD/YYYY"):Ne()().format("MM/DD/YYYY"))),React.createElement("p",null,"Invoice reference number: ",React.createElement("span",{className:"invoice-label"},t.reference_id&&t.reference_id.split("-")[0])),React.createElement("p",null,"Invoice for: ",React.createElement("span",{className:"invoice-label"},t.title)),React.createElement("p",null,"Work timeframe: ",t.start_date&&t.end_date&&React.createElement("span",{className:"invoice-label"},Ne()(t.start_date,"YYYY-MM-DD").format("MM/DD/YYYY")," - ",Ne()(t.end_date,"YYYY-MM-DD").format("MM/DD/YYYY")))),React.createElement("div",{className:"invoice-items"},Boolean(t.hourly_items&&t.hourly_items.length)&&React.createElement("div",null,React.createElement("h3",null,"Hourly services"),React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Description of service"),React.createElement("th",null,"Hours"),React.createElement("th",null,"Rate"))),React.createElement("tbody",null,t.hourly_items&&t.hourly_items.map(function(e,t){return React.createElement("tr",{key:t},React.createElement("td",null,e.description),React.createElement("td",null,e.hours),React.createElement("td",null,"$",Object(xe.a)(e.rate,{minimumFractionDigits:2,maximumFractionDigits:2})))})))),Boolean(t.fixed_items&&t.fixed_items.length)&&React.createElement("div",null,React.createElement("h3",null,"Flat-rate services and expenses"),React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Description of service, deliverable or expense"),React.createElement("th",null),React.createElement("th",null,"Amount"))),React.createElement("tbody",null,t.fixed_items&&t.fixed_items.map(function(e,t){return React.createElement("tr",{key:t},React.createElement("td",null,e.description),React.createElement("td",null),React.createElement("td",null,"$",Object(xe.a)(Number(e.amount),{minimumFractionDigits:2,maximumFractionDigits:2})))}))))),React.createElement("div",{className:"invoice-totals"},React.createElement("div",{className:"invoice-summary"},React.createElement("table",null,React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,"Hourly fees"),React.createElement("td",null,"$",Object(xe.a)(n,{minimumFractionDigits:2,maximumFractionDigits:2}))),React.createElement("tr",null,React.createElement("td",null,"Flat fees and expenses"),React.createElement("td",null,"$",Object(xe.a)(i,{minimumFractionDigits:2,maximumFractionDigits:2})))),React.createElement("tfoot",{className:"invoice-sum"},React.createElement("tr",null,React.createElement("td",{className:"total-label"},"Total amount due"),React.createElement("td",null,"$",Object(xe.a)(n+i,{minimumFractionDigits:2,maximumFractionDigits:2})))))),!t.internal&&React.createElement("div",{className:"invoice-net-summary"},React.createElement("table",null,React.createElement("tbody",null,React.createElement("tr",{className:"loom-fee"},React.createElement("td",null,"Loom service fee (10%)"),React.createElement("td",null,"-$",Object(xe.a)(a,{minimumFractionDigits:2,maximumFractionDigits:2}))),React.createElement("tr",{className:"net-freelancer-amount"},React.createElement("td",null,"Net received by freelancer"),React.createElement("td",null,"$",Object(xe.a)(r,{minimumFractionDigits:2,maximumFractionDigits:2})))))),React.createElement("p",{className:"invoice-label"},"Please deliver payment through the Loom platform by ",t.due_date?Ne()(t.due_date,"YYYY-MM-DD").format("MMMM Do, YYYY"):"")))}),Pe=Ye,Se=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Ye,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/details/components/details/index.js")}(),function(e,t){var n=t.sender,i=t.status,a=t.due_date,r=Ne()(Date.now()).format("YYYY-MM-DD");return n.id===e?"pending"===i||"draft"===i?"draft":"sent"===i&&Date.parse(r)>Date.parse(a)?"past-due":"sent"===i?"sent":"paid":"sent"===i&&Date.parse(r)>Date.parse(a)?"past-due":"pending"===i||"draft"===i||"sent"===i?"unpaid":"paid"}),Le=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Se,"getInvoiceStatus","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/details/utils/index.js")}(),n("./app/scripts/containers/invoices/details/components/status/styles.scss"),Object(je.g)(function(e){var t=e.details,n=e.user,i=Se(n.user_id,t),a=t.sender.id===n.user_id,r="sent"!==t.status||"paid"!==t.status,o=function(){e.history.push("/invoices/"+t.reference_id+"/edit")},c=function(){window.location="/dashboard/messages/"},s=function(){e.history.push("/invoices/"+t.reference_id+"/payment")};return React.createElement("div",{className:"invoice-status"},React.createElement("h3",null,"Invoice status"),a&&React.createElement("div",null,React.createElement("h2",{className:"invoice-status-"+i},i),r&&"paid"!==i&&React.createElement(Ae.a,{type:"button",onClick:o},"Revise invoice"),React.createElement(Ae.a,{type:"button",buttonType:"secondary",onClick:c},"Message recipient")),!a&&React.createElement("div",null,React.createElement("h2",{className:"invoice-status-"+i},i),r&&"paid"!==i&&React.createElement(Ae.a,{type:"button",onClick:s},"Pay invoice"),React.createElement(Ae.a,{type:"button",buttonType:"secondary",onClick:c},"Message freelancer"),React.createElement("p",null,"Send a message to your freelancer if changes to this invoice are needed. The freelancer will need to edit and resubmit.")))})),He=Le,Ie=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Le,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/details/components/status/index.js")}(),n("./node_modules/redux-form/es/index.js")),Me=n("./node_modules/js-cookie/src/js.cookie.js"),Fe=n.n(Me),Ue=n("./app/scripts/api/urls.js"),Je=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"fetchAvailableRecipients","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"),__REACT_HOT_LOADER__.register(a,"fetchInvoices","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"),__REACT_HOT_LOADER__.register(r,"fetchInvoice","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"),__REACT_HOT_LOADER__.register(o,"createInvoice","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"),__REACT_HOT_LOADER__.register(c,"updateInvoice","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"),__REACT_HOT_LOADER__.register(s,"updateInvoicePhoto","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"),__REACT_HOT_LOADER__.register(l,"calcInvoiceTotals","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"),__REACT_HOT_LOADER__.register(u,"deleteInvoice","/Users/will/development/loom/market-ui/app/scripts/api/invoice/index.js"))}(),n("./app/scripts/containers/invoices/details/actions/index.js")),qe=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(p,"fetchInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/details/actions/api.js"),__REACT_HOT_LOADER__.register(m,"updateInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/details/actions/api.js"))}(),n("./app/scripts/containers/invoices/details/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),We=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,e),qe(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.user,n=this.props.match.params.invoiceId;this.props.dispatch(p(n)).then(function(n){n.recipient.id!==t.user_id||n.viewed||e.props.dispatch(m(n.reference_id,{viewed:!0}))}).catch(function(e){console.log(e)})}},{key:"goBack",value:function(e){e.preventDefault();var t=this.props,n=t.invoice,i=t.user;n.details.sender.id===i.user_id?this.props.history.push("/invoices/sent"):this.props.history.push("/invoices/received")}},{key:"render",value:function(){var e=this.props,t=e.invoice,n=e.user;return t.details.sender.id,n.user_id,React.createElement("div",{className:"invoice-details-container"},React.createElement("a",{href:"#",className:"back-link",onClick:this.goBack.bind(this)},React.createElement("i",{className:"material-icons"},"arrow_back")," Back to invoices"),React.createElement("div",{className:"invoice-details-content"},React.createElement(Ce.a,{className:"invoice-details-items"},t.isFetching&&React.createElement(ke.a,null),!t.isFetching&&React.createElement(Pe,{details:t.details})),React.createElement("div",{className:"invoice-meta"},t.isFetching&&React.createElement(ke.a,null),!t.isFetching&&React.createElement(Ce.a,null,React.createElement(He,{user:n,details:t.details})))))}}]),t}(React.Component),Be=Object(Te.b)(function(e){return{user:e.auth,invoice:e.invoices.details}})(We),Ve=Be,$e=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(We,"InvoiceDetails","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/details/index.js"),__REACT_HOT_LOADER__.register(Be,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/details/index.js"))}(),n("./app/scripts/appliances/header/header.jsx")),Xe=n("./app/scripts/components/modal/modal.jsx"),ze=n("./app/scripts/containers/invoices/create/actions/index.js"),Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ke=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(h,"fetchInvoiceRecipients","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/actions/api.js"),__REACT_HOT_LOADER__.register(_,"createInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/actions/api.js"),__REACT_HOT_LOADER__.register(y,"deleteInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/actions/api.js"))}(),n("./app/scripts/containers/invoices/create/components/type/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),Qe=function(e){function t(){return E(this,t),R(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b(t,e),Ke(t,[{key:"setInvoiceType",value:function(e){this.props.dispatch(Object(ze.z)(e))}},{key:"render",value:function(){return React.createElement("div",{className:"invoice-type-container"},React.createElement("h2",null,"What type of invoice do you want to create?"),React.createElement("div",{className:"invoice-type-buttons"},React.createElement(Ae.a,{type:"button",onClick:this.setInvoiceType.bind(this,"cash")},"Cash invoice"),React.createElement(Ae.a,{type:"button",onClick:this.setInvoiceType.bind(this,"equity")},"Equity invoice")))}}]),t}(React.Component),Ze=Object(Te.b)(function(e){return{user:e.auth,invoiceCreation:e.invoices.create}})(Qe),et=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Qe,"InvoiceType","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/components/type/index.js"),__REACT_HOT_LOADER__.register(Ze,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/components/type/index.js"))}(),n("./app/scripts/components/formFields/select/index.js")),tt=function(e){var t=e.name,n=void 0===t?"recipient":t,i=e.options;return React.createElement(Ie.a,{name:n,options:i,component:et.a})},nt=tt,it=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(tt,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoiceRecipient/components/recipientField/index.js")}(),n("./app/scripts/utils/formUtils.js")),at=function(e){var t={};return it.a.checks.isRequired(e.recipient)||(t.recipient="Please add an invoice recipient."),t},rt=at,ot=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(at,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoiceRecipient/validation.js")}(),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),ct=function(e){function t(){return O(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,e),ot(t,[{key:"render",value:function(){var e=this.props,t=e.recipientOptions;return e.invalid,e.error,e.submitFailed,React.createElement("form",{className:"invoice-recipient-form"},React.createElement(nt,{options:t}))}}]),t}(React.Component),st=Object(Ie.o)({form:"invoiceRecipient",initialValues:{recipient:""},validate:rt,asyncValidating:!1})(ct),lt=st,ut=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ct,"InvoiceRecipientForm","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoiceRecipient/index.js"),__REACT_HOT_LOADER__.register(st,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoiceRecipient/index.js"))}(),n("./app/scripts/containers/invoices/create/components/recipient/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),pt=function(e){function t(){return T(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return A(t,e),ut(t,[{key:"navigateToInvoices",value:function(){this.props.history.push("/invoices/sent")}},{key:"handleSubmit",value:function(){this.props.dispatch(Object(Ie.p)("invoiceRecipient"))}},{key:"setInvoiceRecipient",value:function(e){var t=this.props,n=t.user,i=t.recipients,a=i.recipientsById[e.recipient];return this.props.dispatch(_(Object.assign({},e,{sender:{id:Number(n.user_id)},recipient:{id:Number(e.recipient)},recipient_name:a.first_name+" "+a.last_name,recipient_email:a.email,sender_email:n.email,invoice_items:[],status:"draft"})))}},{key:"render",value:function(){var e=this.props,t=e.recipients,n=(e.invoice,t.recipients.map(function(e){return{id:""+e.id,label:e.first_name+" "+e.last_name}}));return React.createElement("div",null,!Boolean(t.recipients.length)&&React.createElement("div",{className:"invoice-recipient-container"},React.createElement("h2",null,"Invoices are available to freelancers actively working on Loom projects."),React.createElement("div",{className:"invoice-recipient-buttons"},React.createElement(Ae.a,{type:"button",onClick:this.navigateToInvoices.bind(this)},"Ok, got it")),React.createElement("p",{className:"support-details"},"Please email ",React.createElement("a",{href:"mailto:support@loom.co"},"support@loom.co")," if you are working on a Loom project so we can give you access.")),Boolean(t.recipients.length)&&React.createElement("div",{className:"invoice-recipient-container"},React.createElement("h2",null,"Who is this invoice for?"),React.createElement(lt,{recipientOptions:[{id:"",label:"Select an entreprenuer",disabled:!0}].concat(j(n)),initialValues:{recipient:""},onSubmit:this.setInvoiceRecipient.bind(this)}),React.createElement("div",{className:"invoice-recipient-buttons"},React.createElement(Ae.a,{type:"button",onClick:this.handleSubmit.bind(this)},"Continue")),React.createElement("p",{className:"support-details"},"Can't find the person you want to invoice? Send an email to ",React.createElement("a",{href:"mailto:support@loom.co"},"support@loom.co")," so we can help.")))}}]),t}(React.Component),mt=Object(Te.b)(function(e){return{user:e.auth,recipients:e.invoices.create.recipients,invoice:e.invoices.create.invoice,isSubmitting:Object(Ie.m)("invoiceRecipient")(e)}})(pt),dt=mt,ft=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(pt,"InvoiceRecipient","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/components/recipient/index.js"),__REACT_HOT_LOADER__.register(mt,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/components/recipient/index.js"))}(),n("./app/scripts/components/errors/errors.js")),vt=n("./app/scripts/components/formFields/input/index.js"),ht=(n("./app/scripts/features/forms/invoice/components/hourlyFeeFields/styles.scss"),function(e){var t=e.fields,n=e.isValid,i=e.onBlur,a=e.meta,r=(a.touched,a.valid,a.invalid,a.error,a.pristine);return React.createElement("table",{className:"hourly-fields"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Description of service"),React.createElement("th",null,"Hours"),React.createElement("th",null,"Rate"))),React.createElement("tbody",null,t.map(function(e,n){return React.createElement("tr",{key:n},React.createElement("td",null,React.createElement(Ie.a,{name:e+".description",placeholder:"e.g. development of homepage",component:vt.a})),React.createElement("td",null,React.createElement(Ie.a,{name:e+".hours",type:"number",placeholder:"20",onBlur:i,component:vt.a})),React.createElement("td",null,React.createElement(Ie.a,{prefix:"$",name:e+".rate",type:"number",placeholder:"50.00",onBlur:i,component:vt.a}),t.length>1&&React.createElement("i",{className:"material-icons remove-item",onClick:function(){return t.remove(n)}})))})),React.createElement("tfoot",null,React.createElement("tr",null,React.createElement("td",null,React.createElement(Ae.a,{className:"add-button",type:"button",disabled:!n||r&&t.length<1,onClick:function(){return t.push({description:"",hours:"",rate:""})}},"Add item")))))}),_t=ht,yt=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ht,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoice/components/hourlyFeeFields/index.js")}(),n("./app/scripts/features/forms/invoice/components/fixedFeeFields/styles.scss"),function(e){var t=e.fields,n=e.isValid,i=e.onBlur,a=e.meta,r=(a.touched,a.valid,a.error,a.pristine);return React.createElement("table",{className:"fixed-fields"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Description of service, deliverable or expense"),React.createElement("th",null),React.createElement("th",null,"Amount"))),React.createElement("tbody",null,t.map(function(e,n){return React.createElement("tr",{key:n},React.createElement("td",null,React.createElement(Ie.a,{name:e+".description",placeholder:"e.g. Weekly rate, Delivery of app or Software license purchase",component:vt.a})),React.createElement("td",null),React.createElement("td",null,React.createElement(Ie.a,{prefix:"$",name:e+".amount",type:"number",placeholder:"50.00",component:vt.a,onBlur:i}),t.length>1&&React.createElement("i",{className:"material-icons remove-item",onClick:function(){return t.remove(n)}})))})),React.createElement("tfoot",null,React.createElement("tr",null,React.createElement("td",null,React.createElement(Ae.a,{className:"add-button",type:"button",disabled:!n||r&&t.length<1,onClick:function(){return t.push({description:"",amount:""})}},"Add item")))))}),Et=yt,Rt=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(yt,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoice/components/fixedFeeFields/index.js")}(),n("./app/scripts/features/forms/invoice/components/contactField/styles.scss"),function(e){var t=(e.label,e.target),n=void 0===t?"sender":t;return React.createElement("div",{className:"contact-field"},React.createElement(Ie.a,{name:n+"_name",placeholder:"Name or company name",component:"input"}),React.createElement("br",null),React.createElement(Ie.a,{name:n+"_address",placeholder:"sender"===n?"Freelancer address line 1":"Employer address line 1",component:"input"}),React.createElement(Ie.a,{name:n+"_address2",placeholder:"sender"===n?"Freelancer address line 2":"Employer address line 2",component:"input"}),React.createElement(Ie.a,{name:n+"_location",placeholder:"City, State, Postal Code",component:"input"}),React.createElement("br",null),React.createElement(Ie.a,{name:n+"_email",placeholder:"sender"===n?"Email: you@example.com":"Email: employer@example.com",component:"input"}),React.createElement(Ie.a,{name:n+"_phone",placeholder:"Phone number",component:"input"}))}),bt=Rt,Ot=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Rt,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoice/components/contactField/index.js")}(),n("./app/scripts/components/formFields/invoicePhoto/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),gt=function(e){function t(e){k(this,t);var n=D(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={preview:"string"==typeof e.input.value?e.input.value:""},n}return N(t,e),Ot(t,[{key:"handlePhotoSelection",value:function(e){var t=this,n=this.props,i=n.input,a=(i.value,i.onChange),r=n.meta,o=(r.touched,r.error,new FileReader),c=e.target.files[0],s=/(\.jpg|\.jpeg|\.bmp|\.gif|\.png)$/i.test(c.name);c&&s&&(o.onloadend=function(){t.setState({preview:o.result}),a(c)},o.readAsDataURL(c))}},{key:"handleRemovePhoto",value:function(e){var t=this.props,n=t.input,i=(n.value,n.onChange),a=t.meta;a.touched,a.error,this.setState({preview:""}),i("")}},{key:"render",value:function(){var e=this.props,t=(e.input.value,e.meta),n=(t.touched,t.error,this.state.preview);return React.createElement("div",null,React.createElement("div",{className:"invoice-photo-preview"},n&&React.createElement("div",{className:"generic-invoice-photo",style:{backgroundImage:"url("+n+")"}}),!n&&React.createElement(Ae.a,{className:"photo-upload-button",fileInput:!0,center:!0,disabled:!1,onFileSelection:this.handlePhotoSelection.bind(this)},React.createElement("span",null,React.createElement("i",{className:"material-icons"},"add")," Add logo"))),n&&React.createElement("div",{className:"invoice-photo-upload"},React.createElement(Ae.a,{fileInput:!0,center:!0,disabled:!1,onFileSelection:this.handlePhotoSelection.bind(this)},"Change logo")))}}]),t}(React.Component),wt=gt,jt=wt,Tt=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(gt,"InvoicePhotoField","/Users/will/development/loom/market-ui/app/scripts/components/formFields/invoicePhoto/index.js"),__REACT_HOT_LOADER__.register(wt,"default","/Users/will/development/loom/market-ui/app/scripts/components/formFields/invoicePhoto/index.js"))}(),function(e){var t=e.name,n=void 0===t?"logo":t,i=e.label,a=void 0===i?"Add logo":i;return React.createElement(Ie.a,{name:n,label:a,component:jt})}),Ct=Tt,At=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Tt,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoice/components/photoField/index.js")}(),n("./app/scripts/components/formFields/dateInput/index.js")),kt=n("./app/scripts/containers/invoices/edit/actions/index.js"),Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Nt=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(x,"updateInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/actions/api.js"),__REACT_HOT_LOADER__.register(Y,"updateInvoicePhoto","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/actions/api.js"),__REACT_HOT_LOADER__.register(P,"calculateInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/actions/api.js"))}(),function(e,t){var n={},i=[],a=[],r=!1,o=!1;return it.a.checks.isRequired(e.sender_name)||(n.sender_name="Please enter your contact name."),it.a.checks.isRequired(e.sender_email)||(n.sender_email="Please enter your contact email."),it.a.checks.isRequired(e.recipient_name)||(n.recipient_name="Please enter your recipient's name."),it.a.checks.isRequired(e.recipient_email)||(n.recipient_email="Please enter your recipient's email."),it.a.checks.isRequired(e.title)||(n.title="Please enter what this invoice is for."),it.a.checks.isMomentFormat(e.start_date,"MM/DD/YYYY")||(n.start_date="Please enter a start date."),it.a.checks.isMomentFormat(e.end_date,"MM/DD/YYYY")||(n.end_date="Please enter an end date."),it.a.checks.isMomentFormat(e.due_date,"MM/DD/YYYY")||(n.due_date="Please enter a due date."),e.hourly_items.forEach(function(t,n){var a={};1===e.hourly_items.length&&(r=!Boolean(Number(t.rate))&&!Boolean(Number(t.hours))&&!t.description),t.description&&it.a.checks.isRequired(t.description)||(a.description="Please enter a description.",i[n]=a),Number.isNaN(t.hours)&&"number"!=typeof Number(t.hours)&&(a.hours="Please enter hours.",i[n]=a),Number.isNaN(t.rate)&&"number"!=typeof Number(t.rate)&&(a.rate="Please enter a rate.",i[n]=a)}),e.fixed_items.forEach(function(t,n){var i={};1===e.fixed_items.length&&(o=!Boolean(Number(t.amount))&&!t.description),t.description&&it.a.checks.isRequired(t.description)||(i.description="Please enter a description.",a[n]=i),Number.isNaN(t.amount)&&"number"!=typeof Number(t.amount)&&(i.amount="Please enter an amount.",a[n]=i)}),!r&&1===e.hourly_items.length&&i.length?n.hourly_items=i:e.hourly_items.length>1&&i.length&&(n.hourly_items=i),!o&&1===e.fixed_items.length&&a.length?n.fixed_items=a:e.fixed_items.length>1&&a.length&&(n.fixed_items=a),r&&o&&(n.invoice_items="Please add a line item to your invoice."),n}),xt=Nt,Yt=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Nt,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoice/validation.js")}(),n("./app/scripts/features/forms/invoice/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),Pt=function(e){function t(){return H(this,t),I(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return M(t,e),Yt(t,[{key:"onSubmit",value:function(){this.props.pristine?this.props.onCancel():this.props.handleSubmit()}},{key:"componentDidUpdate",value:function(e){var t=this.props.formValues&&e.formValues&&e.formValues.fixed_items.length>this.props.formValues.fixed_items.length,n=this.props.formValues&&e.formValues&&e.formValues.hourly_items.length>this.props.formValues.hourly_items.length;(t||n)&&this.calculateInvoice()}},{key:"calculateInvoice",value:function(){var e=this.props.formValues,t=e.reference_id,n=(e.logo,e.sender,e.recipient,L(e,["reference_id","logo","sender","recipient"]));return this.props.dispatch(P(t,{invoice_items:[].concat(S(n.hourly_items.map(function(e){return Object.assign({},e,{hours:Number(e.hours),rate:Number(e.rate),amount:Number(e.hours)*Number(e.rate)})}).filter(function(e){var t=!0;for(var n in e)"id"!==n&&e[n]&&(t=!1);return!t})),S(n.fixed_items.map(function(e){return Object.assign({},e,{hours:null,rate:null,amount:Number(e.amount)})}).filter(function(e){var t=!0;for(var n in e)"id"!==n&&e[n]&&(t=!1);return!t})))})).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this.props,t=(e.invoice,e.editInvoice),n=(e.touchedFields,e.formValues),i=e.invalid,a=(e.valid,e.error),r=e.fieldErrors,o=e.submitFailed,c=n&&n.hourly_items.reduce(function(e,t){return e+Number(t.hours)*Number(t.rate)},0),s=n&&n.fixed_items.reduce(function(e,t){return e+Number(t.amount)},0),l=t.meta.loom_fee,u=t.meta.total_amount-t.meta.loom_fee;return React.createElement("form",{className:"invoice-form"},React.createElement("div",{className:"invoice-header"},React.createElement("div",{className:"logo-field"},React.createElement(Ct,null)),React.createElement("div",{className:"contact-fields"},React.createElement("div",null,React.createElement("label",{className:"form-label"},"From:"),React.createElement("div",{className:"invoice-contact"},React.createElement(bt,{target:"sender"}),o&&r&&r.sender_name&&React.createElement(ft.c,null,r.sender_name),o&&r&&r.sender_email&&React.createElement(ft.c,null,r.sender_email))),React.createElement("div",null,React.createElement("label",{className:"form-label"},"To:"),React.createElement("div",{className:"invoice-contact"},React.createElement(bt,{target:"recipient"}),o&&r&&r.recipient_name&&React.createElement(ft.c,null,r.recipient_name),o&&r&&r.recipient_email&&React.createElement(ft.c,null,r.recipient_email))))),React.createElement("div",{className:"invoice-details"},React.createElement("div",{className:"field-set"},React.createElement("label",{className:"form-label"},"Invoice date: ",n&&n.sent_date)),React.createElement("div",null,React.createElement("label",{className:"form-label"},"Invoice reference number: ",n&&n.reference_id&&n.reference_id.split("-")[0])),React.createElement("div",{className:"field-set subject-field"},React.createElement("label",{className:"form-label"},"Invoice for:"),React.createElement(Ie.a,{name:"title",placeholder:"Insert project name here",component:vt.a})),React.createElement("div",{className:"field-set timeframe-field"},React.createElement("label",{className:"form-label"},"Work timeframe:"),React.createElement(Ie.a,{name:"start_date",placeholder:"MM/DD/YYYY",parse:function(e){return e?Ne()(e,"YYYY-MM-DD").format("MM/DD/YYYY"):""},component:At.a}),React.createElement("label",{className:"form-label"},"-"),React.createElement(Ie.a,{name:"end_date",placeholder:"MM/DD/YYYY",parse:function(e){return e?Ne()(e,"YYYY-MM-DD").format("MM/DD/YYYY"):""},component:At.a}))),React.createElement("h3",null,"Hourly services"),React.createElement(Ie.b,{name:"hourly_items",isValid:!r||!r.hourly_items,onBlur:this.calculateInvoice.bind(this),component:_t}),React.createElement("h3",null,"Flat-rate services and expenses"),React.createElement(Ie.b,{name:"fixed_items",isValid:!r||!r.fixed_items,onBlur:this.calculateInvoice.bind(this),component:Et}),React.createElement(Ie.a,{style:{display:"none"},name:"invoice_items",component:"input"}),React.createElement("div",{className:"invoice-totals"},React.createElement("div",{className:"invoice-summary"},t.isCalculating&&React.createElement(ke.a,null),!t.isCalculating&&React.createElement("table",null,React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,"Hourly fees"),React.createElement("td",null,"$",Object(xe.a)(c,{minimumFractionDigits:2,maximumFractionDigits:2}))),React.createElement("tr",null,React.createElement("td",null,"Flat fees and expenses"),React.createElement("td",null,"$",Object(xe.a)(s,{minimumFractionDigits:2,maximumFractionDigits:2}))),React.createElement("tr",{className:"loom-fee"},React.createElement("td",null,"Loom service fee (10%)"),React.createElement("td",null,"-$",Object(xe.a)(l,{minimumFractionDigits:2,maximumFractionDigits:2})))),React.createElement("tfoot",{className:"invoice-sum"},React.createElement("tr",null,React.createElement("td",{className:"total-label"},"Total you will receive"),React.createElement("td",null,"$",Object(xe.a)(u,{minimumFractionDigits:2,maximumFractionDigits:2})))))),React.createElement("div",{className:"invoice-delivery-date"},React.createElement("label",{className:"form-label"},"Please deliver payment through the Loom platform by"),React.createElement(Ie.a,{name:"due_date",placeholder:"MM/DD/YYYY",parse:function(e){return e?Ne()(e,"YYYY-MM-DD").format("MM/DD/YYYY"):""},component:At.a}))),o&&r&&r.invoice_items&&React.createElement(ft.b,null,r.invoice_items),o&&i&&!a&&React.createElement("div",{className:"field-set"},React.createElement(ft.b,null,"Please fix the errors above and try again.")),o&&a&&React.createElement("div",{className:"field-set"},React.createElement(ft.a,{error:a})))}}]),t}(React.Component);Pt=Object(Ie.o)({form:"invoice",validate:xt,asyncValidating:!1,touchOnBlur:!1})(Pt);var St=Object(Te.b)(function(e){return{invoice:e.invoices.details,editInvoice:e.invoices.edit.invoice,formValues:Object(Ie.j)("invoice")(e),fieldErrors:Object(Ie.i)("invoice")(e)}})(Pt),Lt=St,Ht=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Pt,"InvoiceForm","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoice/index.js"),__REACT_HOT_LOADER__.register(St,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/invoice/index.js"))}(),n("./app/scripts/containers/invoices/edit/components/invoice/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),It=function(e){function t(){return J(this,t),q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return W(t,e),Ht(t,[{key:"showCancelConfirmation",value:function(){if(this.props.isPristine)return this.props.history.push("/invoices/sent");this.props.dispatch(Object(kt.w)())}},{key:"hideCancelConfirmation",value:function(){this.props.dispatch(Object(kt.p)())}},{key:"handleSubmit",value:function(e){this.props.dispatch(Object(Ie.e)("invoice","status",e)),this.props.dispatch(Object(Ie.p)("invoice"))}},{key:"updateInvoiceLogo",value:function(e){var t=e.reference_id,n=e.logo;if(n&&"string"!=typeof n){var i=new FormData;return i.append("logo",n,n.name),this.props.dispatch(Y(t,{logo:i}))}return Promise.resolve(e)}},{key:"updateInvoice",value:function(e){var t=this,n=e.reference_id,i=(e.logo,e.sender,e.recipient,U(e,["reference_id","logo","sender","recipient"]));return this.updateInvoiceLogo(e).then(function(){return t.props.dispatch(x(n,Object.assign({},i,{due_date:Ne()(i.due_date,"MM/DD/YYYY").format("YYYY-MM-DD"),sent_date:Ne()(i.sent_date,"MM/DD/YYYY").format("YYYY-MM-DD"),start_date:Ne()(i.start_date,"MM/DD/YYYY").format("YYYY-MM-DD"),end_date:Ne()(i.end_date,"MM/DD/YYYY").format("YYYY-MM-DD"),invoice_items:[].concat(F(i.hourly_items.map(function(e){return Object.assign({},e,{hours:Number(e.hours),rate:Number(e.rate),amount:Number(e.hours)*Number(e.rate)})}).filter(function(e){var t=!0;for(var n in e)"id"!==n&&e[n]&&(t=!1);return!t})),F(i.fixed_items.map(function(e){return Object.assign({},e,{hours:null,rate:null,amount:Number(e.amount)})}).filter(function(e){var t=!0;for(var n in e)"id"!==n&&e[n]&&(t=!1);return!t})))})))}).then(function(e){"draft"===e.status&&t.props.history.push("/invoices/sent")}).catch(function(e){throw new Ie.d(e)})}},{key:"render",value:function(){var e=this.props,t=e.invoice,n=(e.editInvoice,e.isPristine),i=e.isSubmitting,a=e.match.params;return React.createElement("div",{className:"invoice-items-container"},React.createElement(Ce.a,null,t.isFetching&&React.createElement(ke.a,null),!t.isFetching&&React.createElement("div",null,React.createElement(Lt,{initialValues:Object.assign({},t.details,{title:t.details.title||"",due_date:t.details.due_date?Ne()(t.details.due_date,"YYYY-MM-DD").format("MM/DD/YYYY"):"",sent_date:t.details.sent_date?Ne()(t.details.sent_date,"YYYY-MM-DD").format("MM/DD/YYYY"):Ne()().format("MM/DD/YYYY"),start_date:t.details.start_date?Ne()(t.details.start_date,"YYYY-MM-DD").format("MM/DD/YYYY"):"",end_date:t.details.end_date?Ne()(t.details.end_date,"YYYY-MM-DD").format("MM/DD/YYYY"):"",hourly_items:t.details.hourly_items&&t.details.hourly_items.length?t.details.hourly_items:[{description:"",hours:"",rate:"",amount:""}],fixed_items:t.details.fixed_items&&t.details.fixed_items.length?t.details.fixed_items:[{description:"",hours:"",rate:"",amount:""}],sender_name:t.details.sender_name||"",sender_email:t.details.sender_email||"",recipient_name:t.details.recipient_name||"",recipient_email:t.details.recipient_email||""}),onSubmit:this.updateInvoice.bind(this)}),React.createElement("div",{className:"invoice-form-footer"},React.createElement(Ae.a,{type:"button",buttonType:"secondary",onClick:this.showCancelConfirmation.bind(this)},"Cancel"),React.createElement(Ae.a,{type:"button",isLoading:i,disabled:"sent"===t.details.status&&n||i,onClick:this.props.handleSubmit.bind(null,"sent")},a.invoiceId&&"sent"===t.details.status?"Send revised invoice":"Send invoice")))))}}]),t}(React.Component),Mt=Object(Te.b)(function(e){return{user:e.auth,invoice:e.invoices.edit.invoice,isPristine:Object(Ie.l)("invoice")(e),isSubmitting:Object(Ie.m)("invoice")(e)}})(It),Ft=Mt,Ut=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(It,"EditInvoiceItems","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/components/invoice/index.js"),__REACT_HOT_LOADER__.register(Mt,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/components/invoice/index.js"))}(),n("./app/scripts/containers/invoices/create/components/confirmation/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),Jt=function(e){function t(){return B(this,t),V(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return $(t,e),Ut(t,[{key:"navigateToInvoices",value:function(){var e=this.props.invoice.details;this.props.history.push("/invoices/"+e.reference_id)}},{key:"render",value:function(){var e=this.props.invoice;return React.createElement("div",{className:"invoice-confirmation"},React.createElement("div",{className:"confirmation-icon"}),React.createElement("h2",null,"Invoice sent to ",React.createElement("span",null,e.details.recipient_name),"!"),React.createElement("h2",{className:"confirmation-subheader"},"We'll alert you when they send payment. If anything needs to change, you can revise the invoice from the invoices tab in your dashboard."),React.createElement("div",{className:"confirmation-actions"},React.createElement(Ae.a,{type:"button",onClick:this.navigateToInvoices.bind(this,"equity")},"Ok, I got it")))}}]),t}(React.Component),qt=Object(Te.b)(function(e){return{user:e.auth,invoice:e.invoices.create.invoice}})(Jt),Wt=qt,Bt=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Jt,"InvoiceConfirmation","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/components/confirmation/index.js"),__REACT_HOT_LOADER__.register(qt,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/components/confirmation/index.js"))}(),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),Vt=function(e){var t=e.match,n=t.path,i=t.url,a=X(e,["match"]);return React.createElement(je.f,null,React.createElement(je.e,{exact:!0,path:""+n,render:function(){return React.createElement(je.d,{to:i+"/recipient"})}}),React.createElement(je.e,{path:n+"/recipient",render:function(e){return React.createElement(dt,Bt({},e,a))}}),React.createElement(je.e,{path:n+"/invoice",render:function(e){return React.createElement(Ft,Bt({},e,a))}}),React.createElement(je.e,{path:n+"/confirmation",render:function(e){return React.createElement(Wt,Bt({},e,a))}}))},$t=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Vt,"routes","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/routes.js")}(),n("./app/scripts/containers/invoices/create/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),Xt=function(e){function t(){return z(this,t),G(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return K(t,e),$t(t,[{key:"componentWillMount",value:function(){var e=this.props,t=(e.user,e.creationSteps),n=(e.invoice,e.location),i=t.steps.findIndex(function(e){return e.route.test(n.pathname)}),a=this.getAccountStatus();"connected"===a||"verified"===a?((i>0||i<0)&&this.props.history.replace(t.steps[0].path),this.props.dispatch(Object(ze.n)()),this.props.dispatch(h())):this.props.history.replace({pathname:"/profile/settings/bank/setup/",state:{entryPath:n.pathname,exitPath:n.pathname,referrerType:"invoice"}})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.creationSteps,i=t.location,a=e.creationSteps,r=e.location;if(n.step!==a.step)this.goToRequiredRoute(a);else if(i.pathname!==r.pathname){var o=a.steps.findIndex(function(e){return e.route.test(r.pathname)});this.props.dispatch(Object(ze.o)(o))}}},{key:"getAccountStatus",value:function(){var e=this.props.user,t=e.connected,n=e.payouts_enabled,i=e.verification;return t&&n&&"verified"===i?"verified":t&&n&&"verified"!==i?"connected":t&&!n&&"unverified"===i?"pending":t&&!n?"blocked":void 0}},{key:"goToRequiredRoute",value:function(e){var t=e.step,n=e.steps;!e.isComplete&&n[t]?this.props.history.push(n[t].path):this.props.history.push("/invoices/sent")}},{key:"showCancelConfirmation",value:function(){this.props.creationSteps.step<=0?this.navigateToInvoices():this.props.dispatch(Object(ze.A)())}},{key:"hideCancelConfirmation",value:function(){this.props.dispatch(Object(ze.p)())}},{key:"navigateToInvoices",value:function(){this.hideCancelConfirmation(),this.props.history.push("/invoices/sent")}},{key:"goBack",value:function(e){e.preventDefault(),this.props.history.goBack()}},{key:"deleteInvoice",value:function(){var e=this,t=this.props.invoice.details;this.props.dispatch(y(t.reference_id)).then(function(){e.navigateToInvoices()}).catch(function(e){console.log(e)})}},{key:"handleSubmit",value:function(e){var t=this;new Promise(function(n,i){return t.props.dispatch(Object(Ie.e)("invoice","status",e)),n()}).then(function(){t.props.dispatch(Object(Ie.p)("invoice")),t.hideCancelConfirmation()})}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.creationSteps,i=e.invoice,a=e.recipients,r=e.isSubmitting;return React.createElement("div",{className:"invoice-creation-container"},React.createElement("div",{className:"sticky-header"},React.createElement($e.a,null),t.connected&&!a.isFetching&&React.createElement("div",{className:"progress-bar"},React.createElement("div",{style:{width:n.progress+"%"}}))),n.header&&React.createElement("div",{className:"step-controller"},t.connected&&!a.isFetching&&React.createElement("div",{className:"step-controller-content"},React.createElement("span",{className:"prev-button"}),React.createElement("h2",null,n.header(a)),React.createElement("span",{className:"next-button"})),React.createElement("div",{className:"cancel-button",onClick:this.showCancelConfirmation.bind(this)},React.createElement("i",{className:"material-icons"},"close"))),React.createElement("div",{className:"invoice-creation-content"},t.connected&&!a.isFetching&&Vt(Object.assign({},this.props,{handleSubmit:this.handleSubmit.bind(this)}))),React.createElement(Xe.c,{className:"invoice-confirmation-modal",open:i.showConfirmation,header:"Save as draft?",footer:React.createElement("div",{className:"modal-footer"},React.createElement(Ae.a,{type:"button",buttonType:"secondary",onClick:this.deleteInvoice.bind(this)},"No, discard invoice"),React.createElement(Ae.a,{type:"button",isLoading:r,disabled:r,onClick:this.handleSubmit.bind(this,"draft")},"Yes, save for later")),onClose:this.hideCancelConfirmation.bind(this)},React.createElement("h2",null,"Do you want to save this invoice as a draft to complete later?")))}}]),t}(React.Component),zt=Object(Te.b)(function(e){return{user:e.auth,recipients:e.invoices.create.recipients,creationSteps:e.invoices.create.creationSteps,invoice:e.invoices.create.invoice}})(Xt),Gt=zt,Kt=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Xt,"CreateInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/index.js"),__REACT_HOT_LOADER__.register(zt,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/create/index.js"))}(),n("./app/scripts/components/profilePhoto/profilePhoto.jsx"),n("./app/scripts/containers/invoices/received/actions/index.js")),Qt=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Q,"fetchInvoices","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/received/actions/api.js")}(),n("./app/scripts/containers/invoices/received/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),Zt=function(e){function t(){return Z(this,t),ee(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return te(t,e),Qt(t,[{key:"componentWillMount",value:function(){this.props.dispatch(Q())}},{key:"navigateToInvoiceCreate",value:function(){this.props.history.push("/invoices/new")}},{key:"navigateToInvoiceDetails",value:function(e){this.props.history.push("/invoices/"+e)}},{key:"getInvoiceStatus",value:function(e){var t=e.status,n=e.due_date,i=Ne()(Date.now()).format("YYYY-MM-DD");return"sent"===t&&Date.parse(i)>Date.parse(n)?"past-due":"pending"===t||"draft"===t||"sent"===t?"unpaid":"paid"}},{key:"render",value:function(){var e=this,t=this.props.invoices;return React.createElement("div",{className:"invoices-received-container"},React.createElement("ul",{className:"mobile-invoices-nav"},React.createElement("li",null,React.createElement(je.c,{to:"/invoices/sent",activeClassName:"active"},"New and sent invoices")),React.createElement("li",null,React.createElement(je.c,{to:"/invoices/received",activeClassName:"active"},"Received invoices")),React.createElement("li",null,React.createElement(Ae.a,{type:"button",onClick:this.navigateToInvoiceCreate.bind(this)},"Create new invoice"))),React.createElement("h2",null,"Review and pay invoices from freelancers"),React.createElement(Ce.a,{header:"Received invoices"},t.isFetching&&React.createElement(ke.a,null),!t.isFetching&&t.invoices.length>0&&React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"From"),React.createElement("th",null,"Invoice ID"),React.createElement("th",{className:"total-amount-cell"},"Total Amount"),React.createElement("th",{className:"net-amout-cell"},"Net Amount"),React.createElement("th",null,"Status"),React.createElement("th",{className:"due-date-cell"},"Due date"))),React.createElement("tbody",null,t&&t.invoices.map(function(t,n){var i=t.invoice_items.reduce(function(e,t){var n=t.amount;return e+Number(n)},0),a=i-.1*i,r=(t.sent_date&&Ne()(t.sent_date,"YYYY-MM-DD").format("MMMM Do, YYYY"),t.due_date?Ne()(t.due_date,"YYYY-MM-DD").format("MMMM Do, YYYY"):""),o=e.getInvoiceStatus(t);return React.createElement("tr",{key:n,onClick:e.navigateToInvoiceDetails.bind(e,t.reference_id)},React.createElement("td",null,t.sender_name),React.createElement("td",null,t.reference_id&&t.reference_id.split("-")[0]),React.createElement("td",{className:"total-amount-cell"},"$",Object(xe.a)(i,{minimumFractionDigits:2,maximumFractionDigits:2})),React.createElement("td",{className:"net-amout-cell"},"$",Object(xe.a)(a,{minimumFractionDigits:2,maximumFractionDigits:2})),React.createElement("td",null,React.createElement("span",{className:"invoice-"+o},o)),React.createElement("td",{className:"due-date-cell"},r))}))),!t.isFetching&&!t.invoices.length&&React.createElement("div",{className:"invoices-empty"},"You have not received any invoices... yet.")))}}]),t}(React.Component),en=Object(Te.b)(function(e){return{user:e.auth,invoices:e.invoices.received}})(Zt),tn=en,nn=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Zt,"ReceivedInvoices","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/received/index.js"),__REACT_HOT_LOADER__.register(en,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/received/index.js"))}(),n("./app/scripts/containers/invoices/sent/actions/index.js")),an=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ne,"fetchInvoices","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/sent/actions/api.js"),__REACT_HOT_LOADER__.register(ie,"deleteInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/sent/actions/api.js"))}(),n("./app/scripts/containers/invoices/sent/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),rn=function(e){function t(){return ae(this,t),re(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return oe(t,e),an(t,[{key:"componentWillMount",value:function(){this.props.dispatch(ne({action:"sent"}))}},{key:"navigateToInvoiceDetails",value:function(e){this.props.history.push("/invoices/"+e)}},{key:"navigateToInvoiceEdit",value:function(e){this.props.history.push("/invoices/"+e+"/edit")}},{key:"navigateToInvoiceCreate",value:function(){this.props.history.push("/invoices/new")}},{key:"showDeleteConfirmation",value:function(e,t){t.stopPropagation(),this.props.dispatch(Object(nn.p)(e))}},{key:"hideDeleteConfirmation",value:function(){this.props.dispatch(Object(nn.i)())}},{key:"deleteInvoice",value:function(){var e=this.props.invoices.confirmationInvoiceId;this.props.dispatch(ie(e))}},{key:"getInvoiceStatus",value:function(e){var t=e.status,n=e.due_date,i=Ne()(Date.now()).format("YYYY-MM-DD");return"pending"===t||"draft"===t?"draft":"sent"===t&&Date.parse(i)>Date.parse(n)?"past-due":"sent"===t?"sent":"paid"}},{key:"render",value:function(){var e=this,t=this.props.invoices;return React.createElement("div",{className:"invoices-sent-container"},React.createElement("ul",{className:"mobile-invoices-nav"},React.createElement("li",null,React.createElement(je.c,{to:"/invoices/sent",activeClassName:"active"},"New and sent invoices")),React.createElement("li",null,React.createElement(je.c,{to:"/invoices/received",activeClassName:"active"},"Received invoices")),React.createElement("li",null,React.createElement(Ae.a,{type:"button",onClick:this.navigateToInvoiceCreate.bind(this)},"Create new invoice"))),React.createElement("div",{className:"invoices-sent-header"},React.createElement("h2",null,"Create and send invoices"),React.createElement(Ae.a,{type:"button",onClick:this.navigateToInvoiceCreate.bind(this)},"Create new invoice")),React.createElement(Ce.a,{header:"My invoices"},t.isFetching&&React.createElement(ke.a,null),!t.isFetching&&t.invoices.length>0&&React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Client"),React.createElement("th",null,"Invoice ID"),React.createElement("th",{className:"total-amount-cell"},"Total Amount"),React.createElement("th",{className:"net-amout-cell"},"Net Amount"),React.createElement("th",null,"Status"),React.createElement("th",{className:"due-date-cell"},"Due date"),React.createElement("th",null))),React.createElement("tbody",null,t&&t.invoices.map(function(t,n){var i=t.invoice_items.reduce(function(e,t){var n=t.amount;return e+Number(n)},0),a=i-.1*i,r=t.due_date?Ne()(t.due_date,"YYYY-MM-DD").format("MMMM Do, YYYY"):"",o=e.getInvoiceStatus(t),c="draft"===o?e.navigateToInvoiceEdit.bind(e,t.reference_id):e.navigateToInvoiceDetails.bind(e,t.reference_id);return React.createElement("tr",{key:n,onClick:c},React.createElement("td",null,t.recipient_name),React.createElement("td",null,t.reference_id&&t.reference_id.split("-")[0]),React.createElement("td",{className:"total-amount-cell"},"$",Object(xe.a)(i,{minimumFractionDigits:2,maximumFractionDigits:2})),React.createElement("td",{className:"net-amout-cell"},"$",Object(xe.a)(a,{minimumFractionDigits:2,maximumFractionDigits:2})),React.createElement("td",null,React.createElement("span",{className:"invoice-"+o},o,t.viewed&&"paid"!==o&&"draft"!==o&&React.createElement("i",{className:"viewed-status"},"seen by client"))),React.createElement("td",{className:"due-date-cell"},r),React.createElement("td",null,"draft"===o&&React.createElement("i",{className:"delete-button",onClick:e.showDeleteConfirmation.bind(e,t.reference_id)})))}))),!t.isFetching&&!t.invoices.length&&React.createElement("div",{className:"invoices-empty"},"You haven't created any invoices... yet.")),React.createElement(Xe.c,{className:"invoice-delete-modal",open:t.showConfirmation,header:"Confirmation",footer:React.createElement("div",{className:"modal-footer"},React.createElement(Ae.a,{type:"button",buttonType:"secondary",onClick:this.hideDeleteConfirmation.bind(this)},"No, keep it"),React.createElement(Ae.a,{type:"button",isLoading:t.isDeleting,disabled:t.isDeleting,onClick:this.deleteInvoice.bind(this)},"Yes, delete it")),onClose:this.hideDeleteConfirmation.bind(this)},React.createElement("h2",null,"Are you sure want to delete this invoice draft?")))}}]),t}(React.Component),on=Object(Te.b)(function(e){return{invoices:e.invoices.sent}})(rn),cn=on,sn=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(rn,"SentInvoices","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/sent/index.js"),__REACT_HOT_LOADER__.register(on,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/sent/index.js"))}(),n("./app/scripts/containers/invoices/edit/components/confirmation/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),ln=function(e){function t(){return ce(this,t),se(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return le(t,e),sn(t,[{key:"navigateToInvoices",value:function(){var e=this.props.invoice.details;this.props.history.push("/invoices/"+e.reference_id)}},{key:"render",value:function(){var e=this.props.invoice;return React.createElement("div",{className:"invoice-confirmation"},React.createElement("div",{className:"invoice-confirmation-message"},React.createElement("div",{className:"confirmation-icon"}),React.createElement("h2",null,"draft"===e.prevStatus?"Invoice sent to":"Revised invoice sent to"," ",React.createElement("span",null,e.details.recipient_name),"!"),React.createElement("h2",{className:"confirmation-subheader"},"We'll alert you when they send payment. If anything needs to change, you can revise the invoice from the invoices tab in your dashboard."),React.createElement("div",{className:"confirmation-actions"},React.createElement(Ae.a,{type:"button",onClick:this.navigateToInvoices.bind(this)},"Ok, I got it"))))}}]),t}(React.Component),un=Object(Te.b)(function(e){return{user:e.auth,invoice:e.invoices.edit.invoice}})(ln),pn=un,mn=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ln,"InvoiceConfirmation","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/components/confirmation/index.js"),__REACT_HOT_LOADER__.register(un,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/components/confirmation/index.js"))}(),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),dn=function(e){var t=e.match,n=t.path,i=(t.url,ue(e,["match"]));return React.createElement(je.f,null,React.createElement(je.e,{exact:!0,path:""+n,render:function(e){return React.createElement(Ft,mn({},e,i))}}),React.createElement(je.e,{exact:!0,path:n+"/confirmation",render:function(e){return React.createElement(pn,mn({},e,i))}}))},fn=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(dn,"routes","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/routes.js")}(),n("./app/scripts/containers/invoices/edit/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),vn=function(e){function t(){return pe(this,t),me(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return de(t,e),fn(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.user,i=t.editSteps,a=(t.invoice,t.location),r=t.match.params,o=i.steps.findIndex(function(e){return e.route.test(a.pathname)});(o>0||o<0)&&this.props.history.replace(i.steps[0].path(r.invoiceId)),this.props.dispatch(Object(kt.n)()),this.props.dispatch(p(r.invoiceId)).then(function(t){t.sender.id!==n.user_id&&e.props.history.replace("/invoices/sent")}).catch(function(e){console.log(e)})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.editSteps,i=t.location,a=e.editSteps,r=e.location;if(n.step!==a.step)this.goToRequiredRoute(a);else if(i.pathname!==r.pathname){var o=a.steps.findIndex(function(e){return e.route.test(r.pathname)});this.props.dispatch(Object(kt.o)(o))}}},{key:"goToRequiredRoute",value:function(e){var t=e.step,n=e.steps,i=e.isComplete,a=this.props.match.params;this.props.invoice.details,!i&&n[t]?this.props.history.push(n[t].path(a.invoiceId)):this.props.history.push("/invoices/sent")}},{key:"showCancelConfirmation",value:function(){this.props.dispatch(Object(kt.w)())}},{key:"hideCancelConfirmation",value:function(){this.props.dispatch(Object(kt.p)())}},{key:"navigateToInvoices",value:function(){this.hideCancelConfirmation(),this.props.history.push("/invoices/sent")}},{key:"navigateToInvoice",value:function(e){this.hideCancelConfirmation(),this.props.history.push("/invoices/"+e)}},{key:"handleSubmit",value:function(e){var t=this;new Promise(function(n,i){return t.props.dispatch(Object(Ie.e)("invoice","status",e)),n()}).then(function(){t.props.dispatch(Object(Ie.p)("invoice")),t.hideCancelConfirmation()})}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.editSteps,i=e.invoice,a=e.editInvoice,r=i.details.sender.id===t.user_id;return React.createElement("div",{className:"invoice-edit-container"},React.createElement("div",{className:"sticky-header"},React.createElement($e.a,null),React.createElement("div",{className:"progress-bar"},React.createElement("div",{style:{width:n.progress+"%"}}))),n.header&&React.createElement("div",{className:"step-controller"},React.createElement("div",{className:"step-controller-content"},React.createElement("span",{className:"prev-button"}),React.createElement("h2",null,n.header(i.details)),React.createElement("span",{className:"next-button"})),React.createElement("div",{className:"cancel-button",onClick:this.showCancelConfirmation.bind(this)},React.createElement("i",{className:"material-icons"},"close"))),React.createElement("div",{className:"invoice-edit-content"},!i.isFetching&&r&&dn(Object.assign({},this.props,{handleSubmit:this.handleSubmit.bind(this)}))),React.createElement(Xe.c,{className:"invoice-confirmation-modal",open:a.showConfirmation,header:"Are you sure?",footer:React.createElement("div",{className:"modal-footer"},React.createElement(Ae.a,{type:"button",buttonType:"secondary",onClick:"sent"===i.details.status?this.navigateToInvoice.bind(this,i.details.reference_id):this.navigateToInvoices.bind(this)},"Yes, discard changes"),React.createElement(Ae.a,{type:"button",onClick:"sent"===i.details.status?this.hideCancelConfirmation.bind(this):this.handleSubmit.bind(this,"draft")},"sent"===i.details.status?"No, keep editing":"No, save changes")),onClose:this.hideCancelConfirmation.bind(this)},React.createElement("h2",null,"You made edits to this invoice. Are you sure you want to leave and discard those edits?")))}}]),t}(React.Component),hn=Object(Te.b)(function(e){return{user:e.auth,editSteps:e.invoices.edit.editSteps,invoice:e.invoices.details,editInvoice:e.invoices.edit.invoice,isPristine:Object(Ie.l)("invoice")(e)}})(vn),_n=hn,yn=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(vn,"EditInvoice","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/index.js"),__REACT_HOT_LOADER__.register(hn,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/edit/index.js"))}(),n("./app/scripts/features/forms/payment/index.js")),En=n("./app/scripts/containers/invoices/payment/actions/index.js"),Rn=n("./app/scripts/containers/settings/payments/actions/api.js"),bn=(n("./app/scripts/containers/invoices/payment/components/requirements/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),On=function(e){function t(){return fe(this,t),ve(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return he(t,e),bn(t,[{key:"handleSubmit",value:function(){this.props.dispatch(Object(Ie.p)("payment"))}},{key:"savePaymentSource",value:function(e){var t=this,n=(this.props.payments,e.name),i=e.number,a=e.exp,r=e.cvc;return new Promise(function(e,t){window.Stripe.card.createToken({name:n,number:i,exp:a,cvc:r},function(n,i){return i.error?t(i.error.message):e(i.id)})}).then(function(e){return t.props.dispatch(Object(Rn.a)({stripe_token:e}))}).catch(function(e){throw new Ie.d({_error:e.errors.message})})}},{key:"render",value:function(){var e=this.props,t=e.payments,n=e.isSubmitting;return React.createElement("div",{className:"invoice-payment-requirements"},React.createElement(yn.a,{optionalUpdate:!0,initialValues:Object.assign({},t.card,{exp:t.card.exp_month&&t.card.exp_year?t.card.exp_month+"/"+t.card.exp_year:""}),onSubmit:this.savePaymentSource.bind(this)}),React.createElement("div",{className:"requirements-actions"},React.createElement(Ae.a,{type:"button",buttonType:"secondary",onClick:function(){}},"Cancel"),React.createElement(Ae.a,{type:"button",isLoading:n,disabled:n,onClick:this.handleSubmit.bind(this,"equity")},"Save and continue")))}}]),t}(React.Component),gn=Object(Te.b)(function(e){return{user:e.auth,payments:e.settings.payments,isSubmitting:Object(Ie.m)("payment")(e)}})(On),wn=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(On,"InvoiceRequirements","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/components/requirements/index.js"),__REACT_HOT_LOADER__.register(gn,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/components/requirements/index.js"))}(),n("./app/scripts/containers/settings/payments/components/paymentDetails/index.js")),jn=n("./app/scripts/api/paymentsource/index.js"),Tn=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(_e,"createPayment","/Users/will/development/loom/market-ui/app/scripts/api/payment/index.js")}(),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),Cn=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ye,"createPayment","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/actions/api.js")}(),n("./app/scripts/containers/invoices/payment/components/review/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),An=function(e){function t(e){Ee(this,t);var n=Re(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={useNewCard:!e.user.payments_enabled},n}return be(t,e),Cn(t,[{key:"componentWillMount",value:function(){var e=this.props.user;e.payments_enabled&&this.props.dispatch(Object(Rn.c)(e.user_id))}},{key:"handleSubmit",value:function(){this.props.dispatch(Object(Ie.p)("payment"))}},{key:"savePaymentSource",value:function(e){var t=this,n=this.props,i=n.payments,a=n.invoice,r=e.name,o=e.number,c=e.exp,s=e.cvc,l=e.save,u=void 0,p=void 0;return new Promise(function(e,t){window.Stripe.card.createToken({name:r,number:o,exp:c,cvc:s},function(n,i){return i.error?t(i.error.message):e(i)})}).then(function(e){var n=e.id,a=e.card;return u=n,p=a.country,l?Object(jn.b)({source_id:i.card.id}).then(function(){return t.props.dispatch(Object(Rn.a)({stripe_token:n}))}).catch(function(e){throw new Ie.d({_error:e.errors.message})}):n}).then(function(){var e={invoice:a.details.reference_id};return l||(e.token=u,e.country=p),t.props.dispatch(ye(e))}).catch(function(e){console.log(e)})}},{key:"sendPayment",value:function(){var e=this.props.invoice;this.state.useNewCard?this.handleSubmit():this.props.dispatch(ye({invoice:e.details.reference_id}))}},{key:"navigateToInvoiceDetails",value:function(){var e=this.props.invoice;this.props.history.push("/invoices/"+e.details.reference_id)}},{key:"hidePaymentConfirmation",value:function(){this.props.dispatch(Object(En.p)())}},{key:"handleConfirmation",value:function(){var e=this.props,t=(e.invoice,e.invoicePayment);this.hidePaymentConfirmation(),t.paymentSuccess&&this.navigateToInvoiceDetails()}},{key:"togglePaymentSource",value:function(e){this.setState({useNewCard:"newCard"===e.currentTarget.value})}},{key:"render",value:function(){var e=this.state.useNewCard,t=this.props,n=t.user,i=t.payments,a=t.invoice,r=t.invoicePayment,o=(t.paymentSteps,t.isSubmitting),c=Object(xe.a)(a.details.total_amount,{minimumFractionDigits:2,maximumFractionDigits:2}),s=a.details.sender_name,l=a.details.title,u=a.details.reference_id&&a.details.reference_id.split("-")[0];return React.createElement("div",{className:"invoice-payment-review"},React.createElement("h2",{className:"confirmation-subheader"},"Pay ",React.createElement("span",null,"$",c)," to ",s," for work on ",l,"."),React.createElement("div",{className:"payment-tile"},i.isFetching&&React.createElement(ke.a,null),!i.isFetching&&React.createElement("div",null,n.payments_enabled&&React.createElement("div",null,React.createElement("label",{className:"checkout-option-label"},React.createElement("input",{type:"radio",value:"currentCard",checked:!e,onChange:this.togglePaymentSource.bind(this)})," Pay with saved card"),React.createElement("div",{className:"checkout-option current-card "+(e?"use-new":"")},React.createElement(wn.a,null))),n.payments_enabled&&React.createElement("label",{className:"checkout-option-label"},React.createElement("input",{type:"radio",value:"newCard",checked:e,onChange:this.togglePaymentSource.bind(this)})," Pay with a different card"),React.createElement("div",{className:"checkout-option new-card-form "+(e?"use-new":"")},React.createElement(yn.a,{optionalUpdate:!0,initialValues:{name:"",number:"",cvc:"",exp:"",tos:!1},onSubmit:this.savePaymentSource.bind(this)})))),React.createElement("div",{className:"invoice-payment-footer"},React.createElement(Ae.a,{type:"button",buttonType:"secondary",onClick:this.navigateToInvoiceDetails.bind(this)},"Cancel"),React.createElement(Ae.a,{type:"button",isLoading:r.isSaving||o,disabled:r.isSaving||o,onClick:this.sendPayment.bind(this)},"Pay invoice")),React.createElement("div",{className:"stripe-tag"},"Secure payment processing ",React.createElement("i",{className:"stripe-icon"})),React.createElement(Xe.c,{className:"payment-confirmation-modal",open:r.showPaymentConfirmation,header:r.paymentSuccess?"Payment success!":"Payment error!",footer:React.createElement("div",{className:"modal-footer"},React.createElement(Ae.a,{type:"button",onClick:this.handleConfirmation.bind(this)},"Ok, got it"))},r.paymentSuccess&&React.createElement("div",null,React.createElement("div",{className:"payment-success-icon"}),React.createElement("h2",null,"You paid ",React.createElement("span",null,"$",c)," to ",s," for invoice ",u,".")),r.error&&React.createElement("div",null,React.createElement("div",{className:"payment-error-icon"}),React.createElement("h2",null,"We could not process the payment on your card. Try again or use a different card."))))}}]),t}(React.Component),kn=Object(Te.b)(function(e){return{user:e.auth,invoice:e.invoices.details,invoicePayment:e.invoices.payment.payment,paymentSteps:e.invoices.payment.steps,payments:e.settings.payments,isSubmitting:Object(Ie.m)("payment")(e)}})(An),Dn=kn,Nn=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(An,"InvoicePaymentReview","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/components/review/index.js"),__REACT_HOT_LOADER__.register(kn,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/components/review/index.js"))}(),function(e){var t=e.match,n=t.path;return t.url,React.createElement(je.f,null,React.createElement(je.e,{path:n+"/review",component:Dn}))}),xn=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Nn,"routes","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/routes.js")}(),n("./app/scripts/containers/invoices/payment/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),Yn=function(e){function t(){return Oe(this,t),ge(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return we(t,e),xn(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.user,i=t.paymentSteps,a=t.location,r=t.match.params,o=i.steps.findIndex(function(e){return e.route.test(a.pathname)}),c=a.state;this.props.dispatch(p(r.invoiceId)).then(function(t){"paid"===t.status||t.recipient.id!==n.user_id?e.props.history.replace("/invoices/received"):(o>0||o<0)&&e.props.history.replace(i.steps[0].path(r.invoiceId)),e.props.dispatch(Object(En.m)(Object.assign({},c)))}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){var e=(this.props.location,window.document.querySelector("nav.dashboardNav-section"));e&&(e.style.display="none")}},{key:"componentWillUnmount",value:function(){var e=window.document.querySelector("nav.dashboardNav-section");e&&(e.style.display="block"),this.props.dispatch(Object(En.m)({entryPath:null,exitPath:null}))}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.paymentSteps,i=t.location,a=e.paymentSteps,r=e.location;if(n.step!==a.step)this.goToRequiredRoute(a);else if(i.pathname!==r.pathname){var o=a.steps.findIndex(function(e){return e.route.test(r.pathname)});this.props.dispatch(Object(En.n)(o))}}},{key:"goToRequiredRoute",value:function(e){var t=e.step,n=e.steps,i=e.isComplete,a=this.props.match.params;!i&&n[t]&&this.props.history.push(n[t].path(a.invoiceId))}},{key:"navigateToInvoiceDetails",value:function(){var e=this.props.invoice;this.props.history.push("/invoices/"+e.details.reference_id)}},{key:"goToEntryRoute",value:function(){var e=this.props,t=e.paymentSteps,n=e.invoice,i=(e.location,t.entryPath);this.hideCancelConfirmation(),i?this.props.history.push(i):this.props.history.push("/invoices/"+n.details.reference_id)}},{key:"showCancelConfirmation",value:function(){this.props.paymentSteps.step<=0?this.goToEntryRoute():this.props.dispatch(Object(En.t)())}},{key:"hideCancelConfirmation",value:function(){this.props.dispatch(Object(En.o)())}},{key:"goBack",value:function(e){e.preventDefault(),this.props.history.goBack()}},{key:"render",value:function(){var e=this.props,t=(e.user,e.paymentSteps),n=e.invoice;return e.payments,e.location,e.isSubmitting,React.createElement("div",{className:"invoice-payment-creation-container"},React.createElement("div",{className:"sticky-header"},React.createElement($e.a,null),React.createElement("div",{className:"progress-bar"},React.createElement("div",{style:{width:t.progress+"%"}}))),t.header&&React.createElement("div",{className:"step-controller"},React.createElement("div",{className:"step-controller-content"},React.createElement("span",{className:"prev-button"},t.step>0&&t.backLink&&React.createElement("a",{href:"#",onClick:this.goBack.bind(this)},React.createElement("i",{className:"material-icons"},"chevron_left")," ",t.backLink())),React.createElement("h2",null,t.header(n.details)),React.createElement("span",{className:"next-button"})),React.createElement("div",{className:"cancel-button",onClick:this.navigateToInvoiceDetails.bind(this)},React.createElement("i",{className:"material-icons"},"close"))),React.createElement("div",{className:"invoice-payment-creation-content"},n.isFetching&&React.createElement(ke.a,null),!n.isFetching&&Nn(this.props)))}}]),t}(React.Component),Pn=Object(Te.b)(function(e){return{user:e.auth,paymentSteps:e.invoices.payment.steps,invoice:e.invoices.details,payments:e.settings.payments}})(Yn),Sn=Pn,Ln=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Yn,"SendPayment","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/index.js"),__REACT_HOT_LOADER__.register(Pn,"default","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/payment/index.js"))}(),function(e){var t=e.match,n=t.path,i=t.url;return React.createElement(je.f,null,React.createElement(je.e,{exact:!0,path:""+n,render:function(){return React.createElement(je.d,{to:i+"/sent"})}}),React.createElement(je.e,{path:n+"/sent",component:cn}),React.createElement(je.e,{path:n+"/received",component:tn}),React.createElement(je.e,{path:n+"/new",component:Gt}),React.createElement(je.e,{exact:!0,path:n+"/:invoiceId",component:Ve}),React.createElement(je.e,{path:n+"/:invoiceId/edit",component:_n}),React.createElement(je.e,{path:n+"/:invoiceId/payment",component:Sn}))});(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Ln,"routes","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/routes.js")})(),n("./app/scripts/containers/invoices/styles.scss"),n.d(t,"InvoicesContainer",function(){return Hn});var Hn=function(e){return React.createElement("div",{className:"invoices-container"},Ln(e))};!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Hn,"InvoicesContainer","/Users/will/development/loom/market-ui/app/scripts/containers/invoices/index.js")}()},"./app/scripts/containers/invoices/payment/components/requirements/styles.scss":function(e,t){},"./app/scripts/containers/invoices/payment/components/review/styles.scss":function(e,t){},"./app/scripts/containers/invoices/payment/styles.scss":function(e,t){},"./app/scripts/containers/invoices/received/styles.scss":function(e,t){},"./app/scripts/containers/invoices/sent/styles.scss":function(e,t){},"./app/scripts/containers/invoices/styles.scss":function(e,t){},"./app/scripts/containers/settings/payments/actions/api.js":function(e,t,n){"use strict";function i(e){return function(t){return t(l.z()),s.c(e).then(function(e){if(e.status>200)throw new Error;return e.json()}).then(function(e){return t(l.A(e[0]||{})),e}).catch(function(e){t(l.y(e))})}}function a(e){return function(t){return t(l.t()),s.a(e).then(function(e){if(e.status>201&&400!==e.status&&402!==e.status)throw new Error(JSON.stringify({status:e.status}));return 400===e.status||402===e.status?e.json().then(function(t){throw new Error(JSON.stringify(u({status:e.status},t)))}):e.json()}).then(function(e){var n=e.sources?e.sources.data[0]:e;return t(l.u(n)),e}).catch(function(e){var n=(e.status,e.message),i=n&&JSON.parse(n),a={};throw i&&400===i.status?a._error=i.error:i&&i.status>=500&&(a._error="An unexpected error occurred. Please try again later."),t(l.s(a)),new c.d(a)})}}function r(e){return function(t){return t(l.C()),s.d(e).then(function(e){if(e.status>200)throw new Error;return e.json()}).then(function(e){return t(l.D(e)),e}).catch(function(e){throw t(l.B(e)),new c.d({_error:"Unknown error:"})})}}function o(e){return function(t){return t(l.w()),s.b(e).then(function(e){if(e.status>202)throw new Error;return e.json()}).then(function(e){return t(l.x()),e}).catch(function(e){t(l.v(e))})}}t.c=i,t.a=a,t.d=r,t.b=o;var c=n("./node_modules/redux-form/es/index.js"),s=n("./app/scripts/api/paymentsource/index.js"),l=n("./app/scripts/containers/settings/payments/actions/index.js"),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"fetchPaymentSource","/Users/will/development/loom/market-ui/app/scripts/containers/settings/payments/actions/api.js"),__REACT_HOT_LOADER__.register(a,"createPaymentSource","/Users/will/development/loom/market-ui/app/scripts/containers/settings/payments/actions/api.js"),__REACT_HOT_LOADER__.register(r,"updatePaymentSource","/Users/will/development/loom/market-ui/app/scripts/containers/settings/payments/actions/api.js"),__REACT_HOT_LOADER__.register(o,"deletePaymentSource","/Users/will/development/loom/market-ui/app/scripts/containers/settings/payments/actions/api.js"))}()},"./app/scripts/containers/settings/payments/components/paymentDetails/index.js":function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n("./node_modules/react-redux/es/index.js"),c=(n("./app/scripts/components/button/button.jsx"),n("./app/scripts/components/modal/modal.jsx"),n("./app/scripts/containers/settings/payments/actions/index.js"),n("./app/scripts/containers/settings/payments/components/paymentDetails/styles.scss")),s=(n.n(c),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),l=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),s(t,[{key:"render",value:function(){var e=this.props.payments,t=e.card;return React.createElement("div",{className:"payment-details"},React.createElement("div",{className:"field-set card-info"},React.createElement("span",null,"Name on card"),React.createElement("p",null,t.name)),React.createElement("div",{className:"card-row"},React.createElement("div",{className:"field-set"},React.createElement("span",null,"Card info"),React.createElement("p",null,React.createElement("b",null,t.brand.toUpperCase())," - XXXX-XXXX-XXXX-",t.last4)),React.createElement("div",{className:"field-set card-exp"},React.createElement("span",null,"Expiration"),React.createElement("p",null,t.exp_month+"/"+String(t.exp_year).split("").splice(-2).join("")))))}}]),t}(React.Component),u=Object(o.b)(function(e){return{payments:e.settings.payments}})(l);t.a=u,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(l,"PaymentDetails","/Users/will/development/loom/market-ui/app/scripts/containers/settings/payments/components/paymentDetails/index.js"),__REACT_HOT_LOADER__.register(u,"default","/Users/will/development/loom/market-ui/app/scripts/containers/settings/payments/components/paymentDetails/index.js"))}()},"./app/scripts/containers/settings/payments/components/paymentDetails/styles.scss":function(e,t){},"./app/scripts/features/forms/invoice/components/contactField/styles.scss":function(e,t){},"./app/scripts/features/forms/invoice/components/fixedFeeFields/styles.scss":function(e,t){},"./app/scripts/features/forms/invoice/components/hourlyFeeFields/styles.scss":function(e,t){},"./app/scripts/features/forms/invoice/styles.scss":function(e,t){},"./app/scripts/features/forms/payment/index.js":function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n("./node_modules/redux-form/es/index.js"),c=n("./app/scripts/components/errors/errors.js"),s=n("./app/scripts/components/formFields/input/index.js"),l=n("./app/scripts/components/formFields/checkbox/index.js"),u=(n("./app/scripts/features/forms/terms/components/termsField/index.js"),n("./app/scripts/utils/formUtils.js")),p=function(e){var t={};return u.a.checks.isRequired(e.name)||(t.name="Please enter the name on your card."),e.number&&window.Stripe.card.validateCardNumber(e.number)||(t.number="Please enter a valid card number."),e.exp&&window.Stripe.card.validateExpiry(e.exp)||(t.exp="Please enter a valid expiration date."),e.cvc&&window.Stripe.card.validateCVC(e.cvc)||(t.cvc="Please enter a valid security code."),t},m=p,d=(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(p,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/payment/validation.js")}(),n("./app/scripts/features/forms/payment/styles.scss"),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),f=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),d(t,[{key:"render",value:function(){var e=this.props,t=e.optionalUpdate,n=(e.invalid,e.error),i=e.submitFailed,a=e.isSubmitting,r=e.termsText,u=void 0===r?"":r;return React.createElement("form",{className:"payments-form"},React.createElement("div",{className:"form-body"},React.createElement("div",{className:"field-set"},React.createElement(o.a,{name:"name",type:"text",label:"Name on card",component:s.a})),React.createElement("div",{className:"field-set"},React.createElement(o.a,{name:"number",label:"Card number",component:s.a})),React.createElement("div",{className:"field-set card-exp-cvv"},React.createElement(o.a,{name:"exp",type:"text",label:"Expiration",placeholder:"MM/YY",component:s.a}),React.createElement(o.a,{name:"cvc",type:"text",label:"CVV",component:s.a})),t&&React.createElement("div",{className:"field-set card-checkbox"},React.createElement(o.a,{name:"save",label:React.createElement("span",null,"Save card for future payments"),component:l.a})),u&&React.createElement("div",{className:"field-set card-terms"},React.createElement(o.a,{name:"tos",disabled:a,label:React.createElement("span",null,u),component:l.a})),i&&n&&React.createElement("div",{className:"field-set"},React.createElement(c.b,null,n))))}}]),t}(React.Component),v=Object(o.o)({form:"payment",validate:m,asyncValidating:!1,touchOnBlur:!1})(f);t.a=v,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(f,"CreditCardForm","/Users/will/development/loom/market-ui/app/scripts/features/forms/payment/index.js"),__REACT_HOT_LOADER__.register(v,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/payment/index.js"))}()},"./app/scripts/features/forms/payment/styles.scss":function(e,t){},"./app/scripts/features/forms/terms/components/termsField/index.js":function(e,t,n){"use strict";var i=n("./node_modules/redux-form/es/index.js"),a=n("./app/scripts/components/formFields/checkbox/index.js"),r=function(e){var t=(e.label,e.disabled),n=e.name,r=void 0===n?"tos":n;return React.createElement(i.a,{name:r,disabled:t,label:React.createElement("span",null,"By checking this box, you agree to Loom's ",React.createElement("a",{href:"/terms-of-service/",target:"_blank"},"Term of Service")," and ",React.createElement("a",{href:"/privacy/",target:"_blank"},"Privacy Policy"),", which includes the payment terms stated above."),component:a.a})};t.a=r,function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(r,"default","/Users/will/development/loom/market-ui/app/scripts/features/forms/terms/components/termsField/index.js")}()}});