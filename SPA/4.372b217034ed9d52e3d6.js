webpackJsonp([4],{"./app/scripts/containers/editProject/editProject.js":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.submitQuestionsData=t.submitProjectData=t.getProjectData=t.getEditProjectLink=t.createEmptyProjectState=void 0;var s=a("./app/scripts/store/api.js"),r=a("./app/scripts/utils/formUtils.js"),o={projectId:null,data:{company:"",project_manager:null,skills:[],title:"",type:"",start_date:"",end_date:"",estimated_cash:"",estimated_equity_percentage:"",mix:!1,short_blurb:"",project_image:null,background:"",progress:"",scope:"",milestones:"",specs:"",private_info:"",published:!1,freelancerType:"",questions:[]},budgetType:"",apiError:!1,formError:!1,isSending:!1,isLoading:!0,profileIncomplete:!0,profile:{}};t.createEmptyProjectState=function(e){var t=Object.assign({},o);return e&&(t.data.project_manager=e.user_id,t.data.company=e.company_id),t},t.getEditProjectLink=function(e,t){return t?"/project/edit/"+t+"/"+e:"/project/create/"+e},t.getProjectData=function(e,t,a){if(e){var r=s.api.project(e),o=[r,t,a];s.get.apply(void 0,o)}else console.error("`getProjectData` method expects a projectId, a successCallback and an errorCallback.")},t.submitProjectData=function(e,t,a){if(e&&t&&a){var o=s.api.project();e.id&&(o=s.api.project(e.id));var i=[o,(0,r.objectToFormData)(e),t,a];e.id?s.patch.apply(void 0,i):s.post.apply(void 0,i)}else console.error("`submitProjectData` method expects a data object, a successCallback and an errorCallback.")},t.submitQuestionsData=function(e,t,a){if(e&&t&&a){var r=s.api.questions,o=[r,e,t,a];s.patch.apply(void 0,o)}else console.error("`submitQuestionsData` method expects a data object, a successCallback and an errorCallback.")}},"./app/scripts/containers/editProject/progressBar.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a("./node_modules/classnames/index.js"),o=s(r),i={basics:{displayName:"Basics",isEnabled:!1,isActive:!1,isCompleted:!0},budget:{displayName:"Budget",isEnabled:!1,isActive:!1,isCompleted:!0},details:{displayName:"Details",isEnabled:!1,isActive:!1,isCompleted:!0},questions:{displayName:"Proposal Questions",isEnabled:!1,isActive:!1,isCompleted:!0}},n=React.createClass({displayName:"ProgressBar",propTypes:{currentStep:React.PropTypes.string.isRequired,onSelection:React.PropTypes.func.isRequired,isEditing:React.PropTypes.bool},getDefaultProps:function(){return{isEditing:!1}},getInitialState:function(){return{steps:i}},configureState:function(){var e=this.props,t=e.currentStep,a=e.isEditing,s=this.state.steps,r=Object.keys(i),o=r.indexOf(t);r.forEach(function(e,t){var r=s[e];r.isEnabled=t<=o||a,r.isActive=t===o,r.isCompleted=t<o||a}),this.setState({steps:s})},componentWillMount:function(){this.configureState()},goToStep:function(e){var t=this.props.onSelection,a=this.state.steps,s=a[e],r=s.isActive,o=s.isEnabled;o&&!r&&t(e)},render:function(){var e=this,t=this.state.steps,a=Object.keys(i),s=a.map(function(a,s){var r=t[a],i=r.displayName,n=r.isEnabled,c=r.isActive,l=r.isCompleted,p=function(){e.goToStep(a)},u=(0,o["default"])("progressBar-item",{"progressBar-item--complete":l,"progressBar-item--active":c,"progressBar-item--disabled":!n}),d=s+1,m=!l||c?d:React.createElement("i",{className:"fa fa-check","aria-hidden":"true"});return React.createElement("a",{className:u,key:s,onClick:p},React.createElement("div",{className:"progressBar-item-dot"},m)," ",i)});return React.createElement("div",{className:"progressBar"},s)}});t["default"]=n},"./app/scripts/containers/editProject/questions.jsx":function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a("./node_modules/react-redux/lib/index.js"),o=a("./node_modules/react-router/es6/index.js"),i=a("./app/scripts/utils/formUtils.js"),n=a("./app/scripts/utils/elementUtils.js"),c=a("./app/scripts/containers/editProject/editProject.js"),l=a("./app/scripts/utils/piiUtils.js"),p=a("./app/scripts/config.js"),u=a("./app/scripts/components/loader/loader.jsx"),d=s(u),m=a("./app/scripts/containers/editProject/progressBar.jsx"),f=s(m),j=a("./app/scripts/components/forms/formFields.js"),h=a("./app/scripts/components/button/button.jsx"),g=s(h),b=a("./app/scripts/components/errors/errors.js"),v=a("./app/scripts/components/modal/modal.jsx"),E=React.createClass({displayName:"ProjectQuestions",propTypes:{user:React.PropTypes.object,params:React.PropTypes.object.isRequired,router:React.PropTypes.object,location:React.PropTypes.object.isRequired},getInitialState:function(){var e=this.props,t=e.user,a=e.params.projectId,s=(0,c.createEmptyProjectState)(t,a);return Object.assign({},s,{examplesModalOpen:!1,formFields:{}})},formFields:function P(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],P={},a=3;t&&t.sort(function(e,t){return e.ordering-t.ordering});for(var s=function(a){var s=t[a],r=a+1,o="question"+r,i=s?s.text:"";P[o]={name:o,label:"Proposal question #"+r,value:i,error:!1,rows:3,validator:function(t){var a=e.props.user,s=e.state.formFields,r=(0,l.doesStringContainPII)(t,{user:a});return r&&(s[o].error=l.piiErrors.formField),e.setState({formFields:s}),!r},onChange:function(t){var a=e.state.formFields;a[o].value=t,a[o].error=!1,e.setState({formFields:a,formError:!1})}},s&&(P[o].question=s)},r=0;r<a;r++)s(r);return P},componentWillMount:function(){var e=this,t=this.props,a=t.router,s=t.location.state,r=t.params.projectId;if(r)(0,c.getProjectData)(r,function(t){var a=t.questions;e.setState({data:t,isLoading:!1,questions:a,formFields:e.formFields(a)})},function(t,a){console.error(t),e.setState({isSending:!1,apiError:a.text})});else if(s&&s.data){var o=Object.assign({},s.data);this.setState({data:o,questions:o.questions,formFields:this.formFields(o.questions),isLoading:!1})}else a.replace("/")},componentDidMount:function(){(0,n.scrollToTop)()},submitQuestions:function(){var e=this,t=this.state,a=t.data,s=t.formFields;i.FormUtils.validateForm(s,function(t){if(e.setState({formError:!t,apiError:!1}),t){e.setState({isSending:!0});var r=[];Object.keys(s).forEach(function(e){var t=s[e],o=t.question,i=t.value,n={text:i,project:a.id};o?r.push(Object.assign({},o,n)):r.push(n)}),(0,c.submitQuestionsData)(r,function(){e.goToProjectPage(a.slug)},function(t,a){console.error(t),e.setState({isSending:!1,apiError:a.text})})}})},goToProjectPage:function(e){var t=p.urls.projectUrl(e);delete window.sessionStorage.loomNewProjectId,o.browserHistory.push({pathname:t})},goToStep:function(e,t){var a=this.props.params.projectId;o.browserHistory.push({pathname:(0,c.getEditProjectLink)(e,a),state:{data:t}})},openExamplesModal:function(e){e.preventDefault(),this.setState({examplesModalOpen:!0})},closeExamplesModal:function(){this.setState({examplesModalOpen:!1})},render:function(){var e=this.props.params.projectId,t=this.state,a=t.formFields,s=t.isSending,r=t.isLoading,o=t.formError,i=t.apiError,n=t.examplesModalOpen,c=o&&React.createElement(b.FormError,null,"Please fix the errors above and try again."),l=i&&React.createElement(b.ApiError,{error:i});if(r)return React.createElement(d["default"],null);var p=!!e,u=React.createElement("div",{className:"editProject-modal-footer"},React.createElement(g["default"],{shrink:!0,onClick:this.closeExamplesModal},"Okay, I got it"));return React.createElement("div",{className:"editProject"},React.createElement(f["default"],{currentStep:"questions",isEditing:p,onSelection:this.goToStep}),React.createElement("div",{className:"editProject-headcap"},React.createElement("h2",null,"Use profile questions to learn more about developers before you connect!"),React.createElement("p",{className:"larger light"},"A cover letter and estimated fee are required from each freelancer to submit a proposal on your project. You can also include up to 3 questions that freelancers must answer as part of their proposal")),React.createElement("p",null,React.createElement("a",{href:"",onClick:this.openExamplesModal},"Show me some example questions")),React.createElement(j.Textarea,{config:a.question1,inputDisabled:s}),React.createElement(j.Textarea,{config:a.question2,inputDisabled:s}),React.createElement(j.Textarea,{config:a.question3,inputDisabled:s}),React.createElement("p",{className:"small light"},React.createElement("strong",null,"Note:")," We'll review your project and get back to you with approval or feedback within 1-2 business days after you submit for review."),c,l,React.createElement(g["default"],{size:"large",onClick:this.submitQuestions,isLoading:s,disabled:r||s||o},"Submit project for review"),React.createElement(v.Modal,{open:n,onClose:this.closeExamplesModal,header:"Example questions",footer:u},React.createElement("p",{className:"thick"},"Here are some popular questions our users have asked freelancers to answer in propsals:"),React.createElement("p",null,"Do you have any questions about the project description?"),React.createElement("p",null,"Why do you feel you are the best person for this project?"),React.createElement("p",null,"Why are you passionate about this project?"),React.createElement("p",null,"What relevant skills and experience do you have to help you succeed on this project?"),React.createElement("p",null,"What are some examples of past work youâ€™ve completed that are relevant to this project, and why?"),React.createElement("p",null,"Do you have any questions about my company or about me?"),React.createElement("p",null,"Which of the required skills do you excel at and why?")))}}),y=function(e){var t=e.auth;return{user:t}};t["default"]=(0,r.connect)(y)(E)}});